(e=>{e.vc||(e.vc={}),e.vc.utils={fixUnclosedTags:function(e){return e.replace(/<\/([^>]+)$/g,"&#60;/$1").replace(/<([^>]+)?$/g,"&#60;$1")},validateHtml:function(e){if(!e.includes("<"))return e;try{return(new DOMParser).parseFromString(e,"text/html").body.innerHTML}catch(t){return console.error("Failed to execute window.vc.utils.validateHtml function: ",t),e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}},fallbackCopyTextToClipboard:function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(e){console.error("Unable to copy",e)}},copyTextToClipboard:function(e){navigator.clipboard?navigator.clipboard.writeText(e):this.fallbackCopyTextToClipboard.call(this,e)},slugify:function(e){return(e=e||"").toString().toLowerCase().replace(/[^a-z0-9\s-]/g," ").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")},stripHtmlTags:function(e){return e.replace(/(<([^>]+)>)/gi,"")},isBase64:function(e){return/^[A-Za-z0-9+/]+={0,2}$/.test(e)&&e.length%4==0},getMidpointOrder:function(e,t){var n,i=parseFloat(e.get("order")),a=e.get("parent_id");a=vc.shortcodes.where({parent_id:a}).sort((function(e,t){return parseFloat(e.get("order"))-parseFloat(t.get("order"))}));return t?(t=0,(t=(n=vc.shortcodes.where({parent_id:e.get("id")})).length&&(void 0===(t=n[n.length-1].get("order"))||isNaN(t))?0:t)+1):(n=a.findIndex((function(t){return t.id===e.id})),(t=a[n+1])?(n=parseFloat(t.get("order")),Math.abs(n-i)<1e-10?(a.forEach((function(e,t){e.set("order",t+1)})),vc.utils.getMidpointOrder(e)):(i+n)/2):i+1)}}})(window),window.vc||(window.vc={}),(()=>{function e(e){return"\\"+n[e]}vc.templateOptions={default:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},custom:{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}};var t=/(.)^/,n={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},i=/\\|'|\r|\n|\u2028|\u2029/g;vc.template=function(n,a){a=_.defaults({},a,vc.templateOptions.default);var o,s=RegExp([(a.escape||t).source,(a.interpolate||t).source,(a.evaluate||t).source].join("|")+"|$","g"),c=0,r="__p+='";n.replace(s,(function(t,a,o,s,l){return r+=n.slice(c,l).replace(i,e),c=l+t.length,a?r+="'+\n((__t=("+a+"))==null?'':_.escape(__t))+\n'":o?r+="'+\n((__t=("+o+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),t})),r+="';\n",r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(r=a.variable?r:"with(obj||{}){\n"+r+"}\n")+"return __p;\n";try{o=new Function(a.variable||"obj","_",r)}catch(a){throw a.source=r,a}function l(e){return o.call(this,e,_)}return s=a.variable||"obj",l.source="function("+s+"){\n"+r+"}",l}})(),window.Backbone.View.vcExtendUI=function(e){var t=this.extend(e);return t.prototype._vcUIEventsHooks||(t.prototype._vcUIEventsHooks=[]),e.uiEvents&&t.prototype._vcUIEventsHooks.push(e.uiEvents),t},window.vc.View=Backbone.View.extend({delegateEvents:function(){vc.View.__super__.delegateEvents.call(this),this._vcUIEventsHooks&&this._vcUIEventsHooks.length&&_.each(this._vcUIEventsHooks,(function(e){_.isObject(e)&&_.each(e,(function(e,t){_.isString(e)&&_.each(e.split(/\s+/),(function(e){this.on(t,this[e],this)}),this)}),this)}),this)}}),(e=>{_.isUndefined(window.vc)&&(window.vc={}),e("body").on("keyup change input","[data-vc-disable-empty]",(function(){var t=e(this),n=e(t.data("vcDisableEmpty"));t.val().length?n.prop("disabled",!1):n.prop("disabled",!0)}))})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.showSpinner=function(){e("#vc_logo").addClass("vc_ui-wp-spinner")},vc.hideSpinner=function(){e("#vc_logo").removeClass("vc_ui-wp-spinner")},e(document).ajaxSend((function(e,t,n){n&&n.data&&"string"==typeof n.data&&n.data.match(/vc_inline=true/)&&vc.showSpinner()})).ajaxStop((function(){vc.hideSpinner()}))})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.updateSettingsBadge=function(){e("a.vc_custom-code > .vc_custom-code-icon span.vc_badge").each((function(){var t=e(this);vc.isShowBadge()?t.show():t.hide()}))},vc.isShowBadge=function(){var e=!1;return["css","js_header","js_footer"].forEach((function(t){t="$custom_"+t;vc[t]&&(t=vc[t].val())&&""!==t.trim()&&(e=!0)})),e}})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.ModalView=Backbone.View.extend({message_box_timeout:!1,events:{"hidden.bs.modal":"hide","shown.bs.modal":"shown"},initialize:function(){_.bindAll(this,"setSize","hide")},setSize:function(){var t=e(window).height()-150;this.$content.css("maxHeight",t),this.trigger("setSize")},render:function(){return e(window).on("resize.ModalView",this.setSize),this.setSize(),vc.closeActivePanel(),this.$el.modal("show"),this},showMessage:function(t,n){this.message_box_timeout&&this.$el.find(".vc_message").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var i=e('<div class="vc_message type-'+n+'"></div>');this.$el.find(".vc_modal-body").prepend(i),i.text(t).fadeIn(),this.message_box_timeout=window.setTimeout((function(){i.remove()}),6e3)},hide:function(){e(window).off("resize.ModalView")},shown:function(){}})})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.PanelView=vc.View.extend({mediaSizeClassPrefix:"vc_media-",customMediaQuery:!0,panelName:"panel",draggable:!1,$body:!1,$tabs:!1,$content:!1,events:{"click [data-dismiss=panel]":"hide","mouseover [data-transparent=panel]":"addOpacity","click [data-transparent=panel]":"toggleOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .vc_panel-tabs-link":"changeTab"},_vcUIEventsHooks:[{resize:"setResize"}],options:{startTab:0},clicked:!1,showMessageDisabled:!0,initialize:function(){this.clicked=!1,this.$el.removeClass("vc_panel-opacity"),this.$body=e("body"),this.$content=this.$el.find(".vc_panel-body"),_.bindAll(this,"setSize","fixElContainment","changeTab","setTabsSize"),this.on("show",this.setSize,this),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this)},toggleOpacity:function(){this.clicked=!this.clicked},addOpacity:function(){this.clicked||this.$el.addClass("vc_panel-opacity")},removeOpacity:function(){this.clicked||this.$el.removeClass("vc_panel-opacity")},message_box_timeout:!1,init:function(){},render:function(){return this.trigger("render"),this.trigger("afterRender"),this},show:function(){var t;this.$el.hasClass("vc_active")||(vc.closeActivePanel(),this.init(),(vc.active_panel=this).clicked=!1,this.$el.removeClass("vc_panel-opacity"),(t=this.$el.find(".vc_panel-tabs")).length&&(this.$tabs=t,this.setTabs()),this.$el.addClass("vc_active"),this.draggable?this.initDraggable():e(window).trigger("resize"),this.fixElContainment(),this.trigger("show"))},hide:function(e){e&&e.preventDefault&&e.preventDefault(),this.model&&(this.model=null),vc.active_panel=!1,this.$el.removeClass("vc_active")},content:function(){return this.$el.find(".panel-body")},setResize:function(){this.customMediaQuery&&this.setMediaSizeClass()},setMediaSizeClass:function(){var e=this.$el.width(),t={xs:!0,sm:!1,md:!1,lg:!1};525<=e&&(t.sm=!0),745<=e&&(t.md=!0),945<=e&&(t.lg=!0),_.each(t,(function(e,t){e?this.$el.addClass(this.mediaSizeClassPrefix+t):this.$el.removeClass(this.mediaSizeClassPrefix+t)}),this)},fixElContainment:function(){this.$body||(this.$body=e("body"));var t=[20-this.$el.width(),0,this.$body.width()-20,this.$body.height()-30],n=this.$el.position(),i={};n.left<t[0]&&(i.left=t[0]),n.top<0&&(i.top=0),t[2]<n.left&&(i.left=t[2]),t[3]<n.top&&(i.top=t[3]),this.$el.css(i),this.trigger("fixElContainment"),this.setSize()},initDraggable:function(){this.$el.draggable({iframeFix:!0,handle:".vc_panel-heading",start:this.fixElContainment,stop:this.fixElContainment}),this.draggable=!0},setSize:function(){this.trigger("setSize")},setTabs:function(){this.$tabs.length&&(this.$tabs.find(".vc_panel-tabs-control").removeClass("vc_active").eq(this.options.startTab).addClass("vc_active"),this.$tabs.find(".vc_panel-tab").removeClass("vc_active").eq(this.options.startTab).addClass("vc_active"),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabs&&this.$tabs.parents(".vc_with-tabs.vc_panel-body").css("margin-top",this.$tabs.find(".vc_panel-tabs-menu").outerHeight())},changeTab:function(t){t&&t.preventDefault&&t.preventDefault(),t.target&&this.$tabs&&(t=e(t.target),this.$tabs.find(".vc_active").removeClass("vc_active"),t.parent().addClass("vc_active"),this.$el.find(t.data("target")).addClass("vc_active"),window.setTimeout(this.setTabsSize,100))},showMessage:function(t,n){if(this.showMessageDisabled)return!1;this.message_box_timeout&&(this.$el.find(".vc_panel-message").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var i=e('<div class="vc_panel-message type-'+n+'"></div>').appendTo(this.$el.find(".vc_ui-panel-content-container"));i.text(t).fadeIn(),this.message_box_timeout=window.setTimeout((function(){i.remove()}),6e3)},isVisible:function(){return this.$el.is(":visible")},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity")}})})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.active_panel=!1,vc.element_start_index=0,vc.closeActivePanel=function(e){if(!this.active_panel)return!1;(e&&vc.active_panel.model&&vc.active_panel.model.get("id")===e.get("id")||!e)&&(vc.active_panel.model=null,this.active_panel.hide())},vc.activePanelName=function(){return this.active_panel&&this.active_panel.panelName?this.active_panel.panelName:null},e(window).on("orientationchange",(function(){vc.active_panel&&vc.active_panel.$el.css({top:"",left:"auto",height:"auto",width:"auto"})})),e(window).on("resize.fixElContainment",(function(){vc.active_panel&&vc.active_panel.fixElContainment&&vc.active_panel.fixElContainment()}))})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.AddElementBlockView=vc.ModalView.extend({el:e("#vc_add-element-dialog"),prepend:!1,builder:"",events:{"click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements","hidden.bs.modal":"hide","show.bs.modal":"buildFiltering","click .wpb-content-layouts-container [data-filter]":"filterElements","shown.bs.modal":"shown"},buildFiltering:function(){this.do_render=!1,t='[data-vc-ui-element="add-element-button"]',n=this.model?this.model.get("shortcode"):"vc_column",i=this._getNotIn(n),e("#vc_elements_name_filter").val(""),this.$content.addClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter","*");var t,n,i,a,o=vc.getMapped(n),s=!(!n||_.isUndefined(o.as_parent))&&o.as_parent;_.isObject(s)?(a=[],_.isString(s.only)&&a.push(_.reduce(s.only.replace(/\s/,"").split(","),(function(e,t){return e+(_.isEmpty(e)?"":",")+'[data-element="'+t.trim()+'"]'}),"")),_.isString(s.except)&&a.push(_.reduce(s.except.replace(/\s/,"").split(","),(function(e,t){return e+':not([data-element="'+t.trim()+'"])'}),"")),t+=a.join(",")):i&&(t=i),n&&!_.isUndefined(o.allowed_container_element)&&(o.allowed_container_element?_.isString(o.allowed_container_element)&&(t+=":not([data-is-container=true]), [data-element="+o.allowed_container_element+"]"):t+=":not([data-is-container=true])"),this.$buttons.removeClass("vc_visible").addClass("vc_inappropriate"),e(t,this.$content).removeClass("vc_inappropriate").addClass("vc_visible"),this.hideEmptyFilters()},hideEmptyFilters:function(){this.$el.find(".vc_filter-content-elements .active").removeClass("active"),this.$el.find(".vc_filter-content-elements > :first").addClass("active");var t=this;this.$el.find("[data-filter]").each((function(){e(e(this).data("filter")+".vc_visible:not(.vc_inappropriate)",t.$content).length?e(this).parent().show():e(this).parent().hide()}))},render:function(t,n){return this.builder=new vc.ShortcodesBuilder,this.prepend=!!_.isBoolean(n)&&n,this.place_after_id=!!_.isString(n)&&n,this.model=!!_.isObject(t)&&t,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=e('[data-vc-ui-element="add-element-button"]',this.$content),this.preventDoubleExecution=!1,vc.AddElementBlockView.__super__.render.call(this)},hide:function(){this.do_render&&(this.show_settings&&this.showEditForm(),this.exit())},showEditForm:function(){vc.edit_element_block_view.render(this.builder.last())},exit:function(){this.builder.render()},createElement:function(t){var n,i,a;if(!this.preventDoubleExecution){this.preventDoubleExecution=!0,this.do_render=!0,t.preventDefault(),t=e(t.currentTarget).data("tag"),o={},!(n={width:"1/1"})===this.model&&"vc_row"!==t?(this.builder.create({shortcode:"vc_row",params:{}}).create({shortcode:"vc_column",parent_id:this.builder.lastID(),params:n}),this.model=this.builder.last()):!1!==this.model&&"vc_row"===t&&(t+="_inner");var o={shortcode:t,parent_id:!!this.model&&this.model.get("id"),params:"vc_row_inner"===t?o:{}};for(this.prepend?(o.order=0,(s=vc.shortcodes.findWhere({parent_id:this.model.get("id")}))&&(o.order=s.get("order")-1),vc.activity="prepend"):this.place_after_id&&(o.place_after_id=this.place_after_id),this.builder.create(o),a=this.builder.models.length-1;0<=a;a--)this.builder.models[a].get("shortcode");"vc_row"===t?this.builder.create({shortcode:"vc_column",parent_id:this.builder.lastID(),params:n}):"vc_row_inner"===t&&(n={width:"1/1"},this.builder.create({shortcode:"vc_column_inner",parent_id:this.builder.lastID(),params:n}));var s=vc.getMapped(t);_.isString(s.default_content)&&s.default_content.length&&(o=this.builder.parse({},s.default_content,this.builder.last().toJSON()),_.each(o,(function(e){e.default_content=!0,this.builder.create(e)}),this)),this.show_settings=!(_.isBoolean(s.show_settings_on_create)&&!1===s.show_settings_on_create),(i=this).$el.one("hidden.bs.modal",(function(){i.preventDoubleExecution=!1})).modal("hide")}},_getNotIn:_.memoize((function(e){return'[data-vc-ui-element="add-element-button"]:not('+_.reduce(vc.map,(function(t,n){var i=_.isEmpty(t)?"":",";return _.isObject(n.as_child)?(_.isString(n.as_child.only)&&!_.contains(n.as_child.only.replace(/\s/,"").split(","),e)&&(t+=i+"[data-element="+n.base+"]"),_.isString(n.as_child.except)&&_.contains(n.as_child.except.replace(/\s/,"").split(","),e)&&(t+=i+"[data-element="+n.base+"]")):!1===n.as_child&&(t+=i+"[data-element="+n.base+"]"),t}),"")+")"})),filterElements:function(t){t.stopPropagation(),t.preventDefault();t=e(t.currentTarget);var n='[data-vc-ui-element="add-element-button"]',i=e("#vc_elements_name_filter").val();this.$content.removeClass("vc_filter-all"),t.is("[data-filter]")?(e(".wpb-content-layouts-container .isotope-filter .active",this.$content).removeClass("active"),t.parent().addClass("active"),n+=t=t.data("filter"),"*"===t?this.$content.addClass("vc_filter-all"):this.$content.removeClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter",t.replace(".js-category-","")),e("#vc_elements_name_filter").val("")):0<i.length?(n+=':containsi("'+i+'"):not(".vc_element-deprecated")',e(".wpb-content-layouts-container .isotope-filter .active",this.$content).removeClass("active"),this.$content.attr("data-vc-ui-filter","name:"+i)):i.length||(e('.wpb-content-layouts-container .isotope-filter [data-filter="*"]').parent().addClass("active"),this.$content.attr("data-vc-ui-filter","*"),this.$content.addClass("vc_filter-all")),e(".vc_visible",this.$content).removeClass("vc_visible"),e(n,this.$content).addClass("vc_visible")},shown:function(){vc.is_mobile||e("#vc_elements_name_filter").trigger("focus")}})})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.AddElementBlockViewBackendEditor=vc.AddElementBlockView.extend({render:function(t,n){return this.prepend=!!_.isBoolean(n)&&n,this.place_after_id=!!_.isString(n)&&n,this.model=!!_.isObject(t)&&t,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=e('[data-vc-ui-element="add-element-button"]',this.$content),vc.AddElementBlockView.__super__.render.call(this)},createElement:function(t){var n,i,a;this.preventDoubleExecution||(this.preventDoubleExecution=!0,t&&t.preventDefault&&t.preventDefault(),this.do_render=!0,t=e(t.currentTarget).data("tag"),a=!(a={width:"1/1"})===this.model?(i=vc.shortcodes.create({shortcode:"vc_row",params:{}}),a=vc.shortcodes.create({shortcode:"vc_column",params:a,parent_id:i.id,root_id:i.id}),"vc_row"!==t?vc.shortcodes.create({shortcode:t,parent_id:a.id,root_id:i.id}):i):"vc_row"===t?(a={width:"1/1"},i=vc.shortcodes.create({shortcode:"vc_row_inner",params:{},parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),vc.shortcodes.create({shortcode:"vc_column_inner",params:a,parent_id:i.id,root_id:i.id})):vc.shortcodes.create({shortcode:t,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder(),root_id:this.model.get("root_id")}),this.show_settings=!(_.isBoolean(vc.getMapped(t).show_settings_on_create)&&!1===vc.getMapped(t).show_settings_on_create),this.model=a,this.model.get("shortcode"),(n=this).$el.one("hidden.bs.modal",(function(){n.preventDoubleExecution=!1})).modal("hide"))},showEditForm:function(){vc.edit_element_block_view.render(this.model)},exit:function(){},getFirstPositionIndex:function(){return--vc.element_start_index,vc.element_start_index}})})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.PostSettingsPanelView=vc.PanelView.extend({events:{"click [data-save=true]":"save","click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity"},post_settings_editor:!1,is_frontend_editor:!1,eventsAdded:!1,initialize:function(){this.is_frontend_editor=0<e("#vc_inline-frame").length,this.$settingsFields=this.$el.find(".vc_ui-panel-content").find("input, textarea, select"),_.bindAll(this,"setSize","fixElContainment","initializeCategorySelect2","toggleAddCategory","addNewCategory"),this.on("show",this.setSize,this),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this),this.on("afterRender",(function(){e(".edit-form-info").initializeTooltips(".vc_column"),this.eventsAdded||this.addEvents(),this.initializeCategorySelect2(),this.initializeTagsSelect2(),this.setFieldValues()}),this),this.isPageSettingsStatusActive()&&this.render().show()},render:function(){return this.trigger("render"),this.trigger("afterRender"),this},setSize:function(){this.trigger("setSize")},save:function(){var t;this.is_frontend_editor&&e("#vc_post-category").length&&((t=e("#vc_post-category")).val()&&t.val().length||t.val("1").trigger("change")),this.showMessage(window.i18nLocale.page_settings_updated,"success"),vc.storage=vc.storage||{},vc.storage.isChanged=!0,this.trigger("save")},show:function(){this.$el.hasClass("vc_active")||(this.activatePageSettingsStatus(),vc.closeActivePanel(),(vc.active_panel=this).$el.addClass("vc_active"),this.draggable||this.initDraggable(),this.fixElContainment(),this.trigger("show"))},hide:function(e){this.deactivatePageSettingsStatus(),this.isPageSettingsChanged()?confirm(window.i18nLocale.page_settings_confirm)&&(vc.PanelView.prototype.hide.call(this,e),this.rollBackChanges()):vc.PanelView.prototype.hide.call(this,e),this.trigger("hide")},isPageSettingsChanged:function(){if(window.vc.pagesettingseditor){var e,t=window.vc.pagesettingseditor;for(e of Object.keys(t))if(!_.isEqual(t[e].currentValue,t[e].previousValue))return!0}return!1},rollBackChanges:function(){var e,t,n,i,a,o=window.vc.pagesettingseditor;for(a of Object.keys(o))e=o[a].currentValue,t=o[a].previousValue,n=this.$settingsFields.filter("#"+a),o[a].currentValue=t,n.val(t),"vc_featured_image"===a&&n.next(".gallery_widget_attached_images").find(".vc_icon-remove").trigger("click"),"checkbox"===n.attr("type")&&e!==t&&n.next("label").trigger("click");i=new CustomEvent("wpbPageSettingRollBack",{detail:o}),document.dispatchEvent(i)},isPageSettingsStatusActive:function(){return new URL(window.location.href).searchParams.get(this.getPageSettingsSlug())},getPageSettingsSlug:function(){return"vc_page_settings"},activatePageSettingsStatus:function(){var e=new URL(window.location.href);e.searchParams.set(this.getPageSettingsSlug(),!0),window.history.pushState({},"",e)},deactivatePageSettingsStatus:function(){var e=new URL(window.location.href);e.searchParams.delete(this.getPageSettingsSlug()),window.history.pushState({},"",e)},updatePost:function(t){var n="admin_page"===window.vc_mode;this.save(),n?(this.mergeValues(),vc.showMessage(window.i18nLocale.page_settings_updated,"success")):(n=e("#vc_post_status"),t=e(t.currentTarget).data("changeStatus"),n.length&&(t=e("#vc_post_status").val()),vc.builder.save(t,!0))},saveDraft:function(){this.save(),"admin_page"===window.vc_mode?e("#save-post").trigger("click"):vc.builder.save("",!0)},handlePostNameInput:function(t){var n=e(".wpb-post-url--slug");n&&n.text(e(t.target).val())},handlePostNameBlur:function(t){t=e(t.target);var n=e(".wpb-post-url--slug"),i=t.val();i=window.vc.utils.slugify(i);t.val(i),n&&n.text(i)},addEvents:function(){this.$el.find("[name=post_name]")&&(this.$el.find("[name=post_name]").on("input",this.handlePostNameInput.bind(this)),this.$el.find("[name=post_name]").on("blur",this.handlePostNameBlur.bind(this))),this.$el.find("#vc_toggle-add-new-category")&&this.$el.find("#vc_toggle-add-new-category").on("click",this.toggleAddCategory.bind(this)),this.$el.find("#vc_add-new-category-btn")&&this.$el.find("#vc_add-new-category-btn").on("click",this.addNewCategory.bind(this)),this.$settingsFields&&this.$settingsFields.on("change",this.handleSettingsChange.bind(this)),this.eventsAdded=!0},initializeCategorySelect2:function(){this.is_frontend_editor&&e("#vc_post-category").select2({width:"100%",closeOnSelect:!1,allowHtml:!0,templateResult:function(t){var n,i,a;return t.id?(n=e('<span class="wpb_select2-option-checkbox"></span>'),i=t.text.replace(/^\s+/,""),(a=t.text.match(/^\s+/))&&a[0]&&n.html(a[0].replace(/\s/g,"&nbsp;")),a=e('<span class="option-text"></span>').text(i),n.append(a),n):t.text},templateSelection:function(e){return e.text.replace(/^\s+/,"")}})},initializeTagsSelect2:function(){this.is_frontend_editor&&e("#vc_post-tags").select2({width:"100%",tags:!0,tokenSeparators:[","],minimumInputLength:1,ajax:{url:window.ajaxurl,type:"POST",data:function(e){return{action:"vc_get_tags",_vcnonce:window.vcAdminNonce,search:e.term}},processResults:function(e){return e.success?{results:e.data.map((function(e){return{id:e.id,text:e.name}}))}:(console.error("Invalid response from server: ",e.data.message),vc.showMessage(e.data.message,"error"),{results:[]})}}})},toggleAddCategory:function(){e("#vc_add-new-category").toggle()},addNewCategory:function(t){var n;t.preventDefault(),(t=e("#vc_new-category").val())&&(n=e("#vc_new-category-parent").val(),e.ajax({url:window.ajaxurl,type:"POST",data:{action:"vc_create_new_category",category_name:t,"vc_new-category-parent":n,_vcnonce:window.vcAdminNonce},success:function(t){var n;t.success?(0<e('#vc_post-category option[value="'+t.data.id+'"]').length||(n=e("<option></option>").val(t.data.id).text(t.data.name).prop("selected",!0),e("#vc_post-category").prepend(n),e("#vc_post-category").trigger("change")),e("#vc_new-category").val(""),e("#vc_new-category-parent").val("")):(console.error("Error adding category:",t.data.message),vc.showMessage(t.data.message,"error"))}}))},handleSettingsChange:function(t){var n;t=e(t.currentTarget);window.vc.pagesettingseditor||(window.vc.pagesettingseditor={}),t.attr("data-post-custom-layout")||(n=t.val(),"checkbox"===t.attr("type")&&(n=t.is(":checked")),window.vc.pagesettingseditor[t.attr("id")]&&(window.vc.pagesettingseditor[t.attr("id")]={previousValue:window.vc.pagesettingseditor[t.attr("id")].previousValue,currentValue:n}))},setFieldValues:function(){window.vc.pagesettingseditor||(window.vc.pagesettingseditor={}),this.$settingsFields.each((function(){var t=e(this),n=t.val();"checkbox"===t.attr("type")&&(n=t.is(":checked")),window.vc.pagesettingseditor[t.attr("id")]={previousValue:n,currentValue:n}}))},mergeValues:function(){window.vc.pagesettingseditor||(window.vc.pagesettingseditor={});var e,t=window.vc.pagesettingseditor;for(e in t)t[e].previousValue=t[e].currentValue}})})(window.jQuery),window.jQuery,_.isUndefined(window.vc)&&(window.vc={}),vc.PostSettingsPanelViewBackendEditor=vc.PostSettingsPanelView.extend({render:function(){return this.trigger("render"),this.trigger("afterRender"),this},save:function(){vc.PostSettingsPanelViewBackendEditor.__super__.save.call(this),vc.storage.isChanged=!0}}),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.PostSettingsSeoUIPanelView=vc.PanelView.extend({save:function(){for(var t=e("#vc_setting-seo-form").serializeArray(),n={},i=vc.seo_storage.get("formDataPrevious")||{},a=0;a<t.length;a++){var o=t[a].name,s=t[a].value;try{JSON.stringify({[o]:s}),n[o]=s,(i&&i.hasOwnProperty(o)||"focus-keyphrase"===o)&&vc.seo_storage.setResults(s,o,"formDataPrevious")}catch(t){console.warn("Invalid JSON format for field: "+o,t);continue}}e("#vc_post-custom-seo-settings").val(JSON.stringify(n)),this.trigger("save"),window.vc.showMessage(window.i18nLocale.seo_settings_updated,"success")}})})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.CustomCodePanelView=vc.PanelView.extend({events:{"click [data-save=true]":"save","click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"},saved_css_data:"",saved_js_header_data:"",saved_js_footer_data:"",editor_css:!1,editor_js_header:!1,editor_js_footer:!1,is_frontend_editor:!1,initialize:function(){this.is_frontend_editor=0<e("#vc_inline-frame").length,vc.$custom_css=e("#vc_post-custom-css"),vc.$custom_js_header=e("#vc_post-custom-js-header"),vc.$custom_js_footer=e("#vc_post-custom-js-footer"),this.saved_css_data=vc.$custom_css.val(),this.saved_js_header_data=vc.$custom_js_header.val(),this.saved_js_footer_data=vc.$custom_js_footer.val(),window.Vc_postSettingsEditor&&this.initEditor(),_.bindAll(this,"setSize","fixElContainment","changeTab"),this.on("show",this.setSize,this),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this),this.on("afterRender",(function(){e(".edit-form-info").initializeTooltips(".vc_column")}),this)},initEditor:function(){this.editor_css=new Vc_postSettingsEditor,this.editor_css.sel="wpb_css_editor",this.is_css=e("#"+this.editor_css.sel).length,this.editor_css.mode="css",this.editor_js_header=new Vc_postSettingsEditor,this.editor_js_header.sel="wpb_js_header_editor",this.is_js_header=e("#"+this.editor_js_header.sel).length,this.editor_js_header.mode="javascript",this.editor_js_footer=new Vc_postSettingsEditor,this.editor_js_footer.sel="wpb_js_footer_editor",this.is_js_footer=e("#"+this.editor_js_footer.sel).length,this.editor_js_footer.mode="javascript"},render:function(){return this.trigger("render"),this.trigger("afterRender"),this.setEditor(),this},setEditor:function(){this.is_css&&this.editor_css.setEditor(vc.$custom_css.val()),this.is_js_header&&this.editor_js_header.setEditor(vc.$custom_js_header.val()),this.is_js_footer&&this.editor_js_footer.setEditor(vc.$custom_js_footer.val())},setSize:function(){window.Vc_postSettingsEditor&&(this.is_css&&this.editor_css.setSize(),this.is_js_header&&this.editor_js_header.setSize(),this.is_js_footer&&this.editor_js_footer.setSize(),this.trigger("setSize"))},changeTab:function(t){t&&t.preventDefault&&t.preventDefault();var n=(t=e(t.currentTarget)).parent("li");n.hasClass("vc_active")||(t.closest('[data-vc-ui-element="panel-tabs-controls"]').find(".vc_active").removeClass("vc_active"),this.$el.find(".vc_panel-tab.vc_active").removeClass("vc_active"),n.addClass("vc_active"),n=t.data("filter"),this.$el.find('.vc_panel-tab[data-filter="'+n+'"]').addClass("vc_active"),this.setSize(),this.trigger("tabChange",this))},save:function(){var e;this.setAlertOnDataChange(),this.is_css&&(e=this.editor_css.getValue(),vc.$custom_css.val(e),this.saved_css_data=e),this.is_js_header&&(e=this.editor_js_header.getValue(),vc.$custom_js_header.val(e),this.saved_js_header_data=e),this.is_js_footer&&(e=this.editor_js_footer.getValue(),vc.$custom_js_footer.val(e),this.saved_js_footer_data=e),vc.frame_window&&(this.is_css&&vc.frame_window.vc_iframe.loadCustomCss(this.saved_css_data),this.is_js_header&&vc.frame_window.vc_iframe.loadCustomJsHeader(this.saved_js_header_data),this.is_js_footer)&&vc.frame_window.vc_iframe.loadCustomJsFooter(this.saved_js_footer_data),vc.updateSettingsBadge(),window.vc.showMessage(window.i18nLocale.custom_code_updated,"success"),vc.storage=vc.storage||{},vc.storage.isChanged=!0,this.trigger("save")},show:function(){this.$el.hasClass("vc_active")||(vc.closeActivePanel(),(vc.active_panel=this).$el.addClass("vc_active"),this.draggable||this.initDraggable(),this.fixElContainment(),this.trigger("show"))},hide:function(e){if(this.isCodeChanged()){if(!confirm(window.i18nLocale.page_settings_confirm))return;this.rollBackChanges()}vc.PanelView.prototype.hide.call(this,e),vc.updateSettingsBadge(),this.trigger("hide")},isCodeChanged:function(){return this.is_css&&this.saved_css_data!==this.editor_css.getValue()||this.is_js_header&&this.saved_js_header_data!==this.editor_js_header.getValue()||this.is_js_footer&&this.saved_js_footer_data!==this.editor_js_footer.getValue()},rollBackChanges:function(){this.is_css&&this.editor_css.setEditor(this.saved_css_data),this.is_js_header&&this.editor_js_header.setEditor(this.saved_js_header_data),this.is_js_footer&&this.editor_js_footer.setEditor(this.saved_js_footer_data)},setAlertOnDataChange:function(){this.isCodeChanged()&&vc.setDataChanged()}})})(window.jQuery),window.jQuery,_.isUndefined(window.vc)&&(window.vc={}),vc.CustomCodeViewBackendEditor=vc.CustomCodePanelView.extend({render:function(){return this.trigger("render"),this.trigger("afterRender"),this.setEditor(),this},setAlertOnDataChange:function(){this.editor_css&&vc.saved_custom_css!==this.editor_css.getValue()&&window.tinymce&&(window.switchEditors.go("content","tmce"),window.setTimeout((function(){window.tinymce.get("content").isNotDirty=!1}),1e3))},save:function(){vc.CustomCodeViewBackendEditor.__super__.save.call(this),vc.storage.isChanged=!0}}),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.RowLayoutEditorPanelView=vc.PanelView.extend({events:{"click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .vc_layout-btn":"setLayout","click #vc_row-layout-update":"updateFromInput"},_builder:!1,render:function(t){return this.$input=e("#vc_row-layout"),t&&(this.model=t),this.addCurrentLayout(),this.resetMinimize(),vc.column_trig_changes=!0,e(".edit-form-info").initializeTooltips(".vc_ui-panel-content"),this},builder:function(){return this._builder||(this._builder=new vc.ShortcodesBuilder),this._builder},addCurrentLayout:function(){vc.shortcodes.sort();var e=_.map(vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){return(e=e.getParam("width"))||"1/1"}),"",this).join(" + ");this.$input.val(e)},isBuildComplete:function(){return this.builder().isBuildComplete()},setLayout:function(t){if(t&&t.preventDefault&&t.preventDefault(),!this.isBuildComplete())return!1;t=e(t.currentTarget).attr("data-cells"),t=this.model.view.convertRowColumns(t,this.builder()),this.$input.val(t.join(" + "))},updateFromInput:function(e){if(e&&e.preventDefault&&e.preventDefault(),!this.isBuildComplete())return!1;e=this.$input.val();!1!==(e=this.validateCellsList(e))?this.model.view.convertRowColumns(e,this.builder()):window.alert(window.i18nLocale.wrong_cells_layout)},validateCellsList:function(e){var t,n,i,a=[];e=e.replace(/\s/g,"").split("+");return!(1e3<=_.reduce(_.map(e,(function(e){var o;return e.match(/^[vc\_]{0,1}span\d{1,2}$/)?!1===(o=vc_convert_column_span_size(e))?1e3:(t=o.split(/\//),a.push(t[0]+""+t[1]),12*parseInt(t[0],10)/parseInt(t[1],10)):!e.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)||(t=e.split(/\//),n=parseInt(t[0],10),5!==(i=parseInt(t[1],10))&&0!=12%i)||i<n?1e3:(a.push(n+""+i),5===i?n:12*n/i)})),(function(e,t){return t+e}),0))&&a.join("_")}})})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.RowLayoutEditorPanelViewBackend=vc.RowLayoutEditorPanelView.extend({builder:function(){return this.builder||(this.builder=vc.storage),this.builder},isBuildComplete:function(){return!0},setLayout:function(t){t&&t.preventDefault&&t.preventDefault(),t=e(t.currentTarget).attr("data-cells"),t=this.model.view.convertRowColumns(t),this.$input.val(t.join(" + "))}})})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.TemplatesEditorPanelView=vc.PanelView.extend({events:{"click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .wpb_remove_template":"removeTemplate","click [data-template_id]":"loadTemplate","click [data-template_name]":"loadDefaultTemplate","click #vc_template-save":"saveTemplate"},render:function(){this.trigger("render"),this.$name=e("#vc_template-name"),this.$list=e("#vc_template-list");var t=e("#vc_tabs-templates");return t.find(".vc_edit-form-tab-control").removeClass("vc_active").eq(0).addClass("vc_active"),t.find('[data-vc-ui-element="panel-edit-element-tab"]').removeClass("vc_active").eq(0).addClass("vc_active"),t.find(".vc_edit-form-link").on("click",(function(n){n.preventDefault(),n=e(this),t.find(".vc_active").removeClass("vc_active"),n.parent().addClass("vc_active"),e(n.attr("href")).addClass("vc_active")})),this.trigger("afterRender"),this},removeTemplate:function(t){t&&t.preventDefault&&t.preventDefault();var n=(t=e(t.currentTarget)).closest('[data-vc-ui-element="template-title"]').text();confirm(window.i18nLocale.confirm_deleting_template.replace("{template_name}",n))&&(t.closest('[data-vc-ui-element="template"]').remove(),this.$list.html(window.i18nLocale.loading),e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_delete_template",template_id:t.attr("rel"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done((function(e){this.$list.html(e)})))},loadTemplate:function(t){t&&t.preventDefault&&t.preventDefault(),t=e(t.currentTarget),e.ajax({type:"POST",url:vc.frame_window.location.href,data:{action:"vc_frontend_template",template_id:t.data("template_id"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done((function(t){var n,i;_.each(e(t),(function(e){if("vc_template-data"===e.id)try{i=JSON.parse(e.innerHTML)}catch(e){window.console&&window.console.warn&&window.console.warn("loadTemplate json error",e)}"vc_template-html"===e.id&&(n=e.innerHTML)})),n&&i&&vc.builder.buildFromTemplate(n,i),this.showMessage(window.i18nLocale.template_added,"success"),vc.closeActivePanel()}))},ajaxData:function(e){return{action:"vc_frontend_default_template",template_name:e.data("template_name"),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadDefaultTemplate:function(t){t&&t.preventDefault&&t.preventDefault(),t=e(t.currentTarget),e.ajax({type:"POST",url:vc.frame_window.location.href,data:this.ajaxData(t),context:this}).done((function(t){var n,i;_.each(e(t),(function(e){if("vc_template-data"===e.id)try{i=JSON.parse(e.innerHTML)}catch(e){window.console&&window.console.warn&&window.console.warn("loadDefaultTemplate json error",e)}"vc_template-html"===e.id&&(n=e.innerHTML)})),n&&i&&vc.builder.buildFromTemplate(n,i),this.showMessage(window.i18nLocale.template_added,"success")}))},saveTemplate:function(e){e&&e.preventDefault&&e.preventDefault();var t;e=this.$name.val();if(_.isString(e)&&e.length){if(!(t=this.getPostContent()).trim().length)return this.showMessage(window.i18nLocale.template_is_empty,"error"),!1;t={action:"wpb_save_template",template:t,template_name:e,frontend:!0,vc_inline:!0,_vcnonce:window.vcAdminNonce},this.$name.val(""),this.showMessage(window.i18nLocale.template_save,"success"),this.reloadTemplateList(t)}else this.showMessage(window.i18nLocale.please_enter_templates_name,"error")},reloadTemplateList:function(e){this.$list.html(window.i18nLocale.loading).load(window.ajaxurl,e)},getPostContent:function(){return vc.builder.getContent()}})})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.TemplatesEditorPanelViewBackendEditor=vc.TemplatesEditorPanelView.extend({ajaxData:function(e){return{action:"vc_backend_template",template_id:e.attr("data-template_id"),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadTemplate:function(t){t&&t.preventDefault&&t.preventDefault(),t=e(t.currentTarget),e.ajax({type:"POST",url:window.ajaxurl,data:this.ajaxData(t),context:this}).done((function(e){_.each(vc.filters.templates,(function(t){e=t(e)})),vc.storage.append(e),vc.shortcodes.fetch({reset:!0}),vc.closeActivePanel()}))},loadDefaultTemplate:function(t){t&&t.preventDefault&&t.preventDefault(),t=e(t.currentTarget),e.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_backend_default_template",template_name:t.attr("data-template_name"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done((function(e){_.each(vc.filters.templates,(function(t){e=t(e)})),vc.storage.append(e),vc.shortcodes.fetch({reset:!0})}))},getPostContent:function(){return vc.storage.getContent()}})})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.TemplatesPanelViewBackend=vc.PanelView.extend({$name:!1,$list:!1,template_load_action:"vc_backend_load_template",templateLoadPreviewAction:"vc_load_template_preview",save_template_action:"vc_save_template",delete_template_action:"vc_delete_template",appendedTemplateType:"my_templates",appendedTemplateCategory:"my_templates",appendedCategory:"my_templates",appendedClass:"my_templates",loadUrl:window.ajaxurl,events:e.extend(vc.PanelView.prototype.events,{"click .vc_template-save-btn":"saveTemplate","click [data-template_id] [data-template-handler]":"loadTemplate","click .vc_template-delete-icon":"removeTemplate"}),initialize:function(){_.bindAll(this,"checkInput","saveTemplate"),vc.TemplatesPanelViewBackend.__super__.initialize.call(this)},render:function(){return this.$el.css("left",(e(window).width()-this.$el.width())/2),this.$name=this.$el.find('[data-js-element="vc-templates-input"]'),this.$name.off("keypress").on("keypress",this.checkInput),this.$list=this.$el.find(".vc_templates-list-my_templates"),vc.TemplatesPanelViewBackend.__super__.render.call(this)},saveTemplate:function(e){var t,n;return e&&e.preventDefault&&e.preventDefault(),e=this.$name.val(),n=this,_.isString(e)&&e.length?(t=this.getPostContent()).trim().length?(t={action:this.save_template_action,template:t,template_name:e,vc_inline:!0,_vcnonce:window.vcAdminNonce},void this.setButtonMessage(void 0,void 0).reloadTemplateList(t,(function(){n.$name.val("").trigger("change")}),(function(){n.showMessage(window.i18nLocale.template_save_error,"error"),n.clearButtonMessage()}))):(this.showMessage(window.i18nLocale.template_is_empty,"error"),!1):(this.showMessage(window.i18nLocale.please_enter_templates_name,"error"),!1)},checkInput:function(e){if(13===e.which)return this.saveTemplate(),!1},removeTemplate:function(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation();var n,i,a=(t=e(t.target).closest("[data-template_id]")).find('[data-vc-ui-element="template-title"]').text();confirm(window.i18nLocale.confirm_deleting_template.replace("{template_name}",a))&&(n=t.data("template_id"),i=t.data("template_type"),a=t.data("template_action"),t.remove(),e.ajax({type:"POST",url:window.ajaxurl,data:{action:a||this.delete_template_action,template_id:n,template_type:i,vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done((function(){this.showMessage(window.i18nLocale.template_removed,"success"),vc.events.trigger("templates:delete",{id:n,type:i})})))},reloadTemplateList:function(t,n,i){var a=this;e.ajax({type:"POST",url:window.ajaxurl,data:t,context:this}).done((function(t){a.filter=!1,a.$list||(a.$list=a.$el.find(".vc_templates-list-my_templates")),a.$list.prepend(e(t)),"function"==typeof n&&n(t)})).fail("function"==typeof i?i:function(){})},getPostContent:function(){return vc.shortcodes.stringify("template")},loadTemplate:function(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),t=e(t.target).closest("[data-template_id][data-template_type]"),e.ajax({type:"POST",url:this.loadUrl,data:{action:this.template_load_action,template_unique_id:t.data("template_id"),template_type:t.data("template_type"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(this.renderTemplate)},renderTemplate:function(e){var t;_.each(vc.filters.templates,(function(t){e=t(e)})),t=vc.storage.parseContent({},e),_.each(t,(function(e){vc.shortcodes.create(e),vc.latestAddedElement=vc.shortcodes.get(e.id)})),vc.events.trigger("templateAdd"),vc.closeActivePanel()},buildTemplatePreview:function(t){t&&t.preventDefault&&t.preventDefault();try{var n,i=e(t.currentTarget),a=i.closest("[data-template_id]");if(a.hasClass("vc_active")||a.hasClass("vc_loading"))i.vcAccordion("collapseTemplate");else{var o=a.find("[data-js-content]"),s=0<o.children().length;if(this.$content=o,this.$content.find("iframe").length)return i.vcAccordion("collapseTemplate"),!0;var c=this;i.vcAccordion("collapseTemplate",(function(){var t,o=a.data("template_id"),r=a.data("template_type");o&&!s&&(t="?",-1<window.ajaxurl.indexOf("?")&&(t="&"),n=window.ajaxurl+t+e.param({action:c.templateLoadPreviewAction,template_unique_id:o,template_type:r,vc_inline:!0,post_id:window.vc_post_id,_vcnonce:window.vcAdminNonce}),i.find("i").addClass("vc_ui-wp-spinner"),c.$content.html('<iframe style="width: 100%;" data-vc-template-preview-frame="'+o+'"></iframe>'),(t=c.$content.find("[data-vc-template-preview-frame]")).attr("src",n),a.addClass("vc_loading"),t.on("load",(function(){a.removeClass("vc_loading"),i.find("i").removeClass("vc_ui-wp-spinner")})))}))}}catch(t){window.console&&window.console.warn&&window.console.warn("buildTemplatePreview error",t),this.showMessage("Failed to build preview","error")}},setTemplatePreviewSize:function(e){var t=this.$content.find("iframe");0<t.length&&(t=t[0],void 0===e&&(t.height=t.contentWindow.document.body.offsetHeight,e=t.contentWindow.document.body.scrollHeight),t.height=e+"px")}})})(window.jQuery),(e=>{_.isUndefined(window.vc)&&(window.vc={}),vc.TemplatesPanelViewFrontend=vc.TemplatesPanelViewBackend.extend({template_load_action:"vc_frontend_load_template",loadUrl:!1,initialize:function(){this.loadUrl=vc.$frame.attr("src"),vc.TemplatesPanelViewFrontend.__super__.initialize.call(this)},render:function(){return vc.TemplatesPanelViewFrontend.__super__.render.call(this)},renderTemplate:function(t){var n,i;_.each(e(t),(function(e){if("vc_template-data"===e.id)try{i=JSON.parse(e.innerHTML)}catch(e){window.console&&window.console.warn&&window.console.warn("renderTemplate error",e)}"vc_template-html"===e.id&&(n=e.innerHTML)})),n&&i&&vc.builder.buildFromTemplate(n,i)?this.showMessage(window.i18nLocale.template_added_with_id,"error"):this.showMessage(window.i18nLocale.template_added,"success"),vc.closeActivePanel()}})})(window.jQuery),(e=>{var t,n,i=function(t,n){var i=this;this.options=n,this.$element=e(t),this.$dropdownContainer=this.$element.find(this.options.dropdownContainerSelector),this.$dropdown=this.$dropdownContainer.find(this.options.dropdownSelector),this.options.delayInit?(i.$element.addClass(this.options.initializingClass),setTimeout((function(){i.options.autoRefresh||i.refresh(),i.moveTabs(),i.$element.removeClass(i.options.initializingClass)}),i.options.delayInitTime)):(this.options.autoRefresh||this.refresh(),this.moveTabs()),e(window).on("resize",e.proxy(this.moveTabs,this)),this.$dropdownContainer.on("click.vc.tabsLine",e.proxy(this.checkDropdownContainerActive,this))};i.DEFAULTS={initializingClass:"vc_initializing",delayInit:!1,delayInitTime:1e3,activeClass:"vc_active",visibleClass:"vc_visible",dropdownContainerSelector:'[data-vc-ui-element="panel-tabs-line-toggle"]',dropdownSelector:'[data-vc-ui-element="panel-tabs-line-dropdown"]',tabSelector:'>li:not([data-vc-ui-element="panel-tabs-line-toggle"])',dropdownTabSelector:"li",freeSpaceOffset:5,autoRefresh:!1,showDevInfo:!1},i.prototype.refresh=function(){var t,n=this;return n.tabs=[],n.dropdownTabs=[],n.$element.find(n.options.tabSelector).each((function(){n.tabs.push({$tab:e(this),width:e(this).outerWidth()})})),n.$dropdown.find(n.options.dropdownTabSelector).each((function(){var t=e(this).clone().css({visibility:"hidden",position:"fixed"});t.appendTo(n.$element),n.dropdownTabs.push({$tab:e(this),width:t.outerWidth()}),t.remove(),e(this).on("click",n.options.onTabClick)})),"function"==typeof this.options.onTabClick&&(n.tabs.map(t=function(t){void 0===t.$tab.data("tabClickSet")&&(t.$tab.on("click",e.proxy(n.options.onTabClick,t.$tab)),t.$tab.data("tabClickSet",!0))}),n.dropdownTabs.map(t)),this},i.prototype.moveLastToDropdown=function(){var e;return this.tabs.length&&((e=this.tabs.pop()).$tab.prependTo(this.$dropdown),this.dropdownTabs.unshift(e)),this.checkDropdownContainer(),this},i.prototype.moveFirstToContainer=function(){var e;return this.dropdownTabs.length&&((e=this.dropdownTabs.shift()).$tab.appendTo(this.$element),this.tabs.push(e)),this.checkDropdownContainer(),this},i.prototype.getTabsWidth=function(){var e=0;return this.tabs.forEach((function(t){e+=t.width})),e},i.prototype.isDropdownContainerVisible=function(){return this.$dropdownContainer.hasClass(this.options.visibleClass)},i.prototype.getFreeSpace=function(){var e=this.$element.width()-this.getTabsWidth()-this.options.freeSpaceOffset;return this.isDropdownContainerVisible()&&(e-=this.$dropdownContainer.outerWidth(),1===this.dropdownTabs.length)&&0<=e-this.dropdownTabs[0].width+this.$dropdownContainer.outerWidth()&&(e+=this.$dropdownContainer.outerWidth()),e},i.prototype.moveTabsToDropdown=function(){for(var e=this.tabs.length-1;0<=e;e--){if(!(this.getFreeSpace()<0))return this;this.moveLastToDropdown()}return this},i.prototype.moveDropdownToTabs=function(){for(var e=this.dropdownTabs.length,t=0;t<e;t++){if(!(0<=this.getFreeSpace()-this.dropdownTabs[0].width))return this;this.moveFirstToContainer()}return this},i.prototype.showDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.visibleClass),this},i.prototype.hideDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.visibleClass),this},i.prototype.activateDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.activeClass),this},i.prototype.deactivateDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.activeClass),this},i.prototype.checkDropdownContainerActive=function(){return this.$dropdown.find("."+this.options.activeClass+":first").length?this.activateDropdownContainer():this.deactivateDropdownContainer(),this},i.prototype.checkDropdownContainer=function(){return this.dropdownTabs.length?this.showDropdownContainer():this.hideDropdownContainer(),this.checkDropdownContainerActive(),this},i.prototype.moveTabs=function(){return this.$element.closest(".vc_ui-panel-window").hasClass(this.options.activeClass)&&(this.options.autoRefresh&&this.refresh(),this.checkDropdownContainer(),this.moveTabsToDropdown(),this.moveDropdownToTabs(),this.options.showDevInfo)&&this.showDevInfo(),this},i.prototype.showDevInfo=function(){var t=e("#vc-ui-tabs-line-dev-info");t.length&&(this.$devBlock=t),void 0===this.$devBlock&&(this.$devBlock=e('<div id="vc-ui-tabs-line-dev-info" />').css({position:"fixed",right:"40px",top:"40px",padding:"7px 12px",border:"1px solid rgba(0, 0, 0, 0.2)",background:"rgba(0, 0, 0, 0.7)",color:"#0a0","border-radius":"5px","font-family":"tahoma","font-size":"12px","z-index":1100}),this.$devBlock.appendTo("body")),void 0===this.$devInfo&&(this.$devInfo=e("<div />").css({"margin-bottom":"7px","padding-bottom":"7px","border-bottom":"1px dashed rgba(0, 200, 0, .35)"}),this.$devInfo.appendTo(this.$devBlock)),this.$devInfo.empty(),this.$devInfo.append(e("<div />").text("Tabs count: "+this.tabs.length)),this.$devInfo.append(e("<div />").text("Dropdown count: "+this.dropdownTabs.length)),this.$devInfo.append(e("<div />").text("El width: "+this.$element.width())),this.$devInfo.append(e("<div />").text("Tabs width: "+this.getTabsWidth())),this.$devInfo.append(e("<div />").text("Tabs width with dots: "+(this.getTabsWidth()+this.$dropdownContainer.outerWidth()))),this.$devInfo.append(e("<div />").text("Free space: "+this.getFreeSpace())),this.tabs.length&&this.$devInfo.append(e("<div />").text("Last tab width: "+this.tabs[this.tabs.length-1].width)),this.dropdownTabs.length&&this.$devInfo.append(e("<div />").text("First dropdown tab width: "+this.dropdownTabs[0].width))},n=e.fn.vcTabsLine,e.fn.vcTabsLine=t=function(t){return this.each((function(){var n=e(this),a=n.data("vcUiTabsLine"),o=n.data("vc.tabsLine"),s=(a=e.extend(!0,{},i.DEFAULTS,n.data(),a,"object"==typeof t&&t),"string"==typeof t?t:a.action);o||n.data("vc.tabsLine",o=new i(this,a)),s&&o[s]()}))},e.fn.vcTabsLine.Constructor=i,e.fn.vcTabsLine.noConflict=function(){return e.fn.vcTabsLine=n,this},e(window).on("load",(function(){e("[data-vc-ui-tabs-line]").each((function(){var n=e(this);t.call(n,n.data())}))}))})(window.jQuery),window.vc.HelperAjax={ajax:!1,checkAjax:function(){this.ajax&&this.ajax.abort()},resetAjax:function(){this.ajax=!1}},window.vc.HelperPrompts={uiEvents:{render:"removeAllPrompts"},removeAllPrompts:function(){this.$el.find(".vc_ui-panel-content-container").removeClass("vc_ui-content-hidden"),this.$el.find(".vc_ui-prompt").remove()}},window.vc.HelperPanelViewDraggable={draggable:!0,draggableOptions:{iframeFix:!0,handle:'[data-vc-ui-element="panel-heading"]'},uiEvents:{show:"initDraggable"},initDraggable:function(){window.matchMedia("(max-width: 767px )").matches||this.$el.draggable(_.extend({},this.draggableOptions,{start:this.fixElContainment,stop:this.fixElContainment}))}},window.vc.HelperPanelTabs={switchActiveTab:function(e,t){e.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),t.parent().addClass("vc_active"),e.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active")}},(e=>{window.vc.HelperPanelViewResizable={sizeInitialized:!1,uiEvents:{show:"setSavedSize initResize",tabChange:"setDefaultHeightSettings",afterMinimize:"setupOnMinimize",afterUnminimize:"initResize",fixElContainment:"saveUIPanelSizes"},setDefaultHeightSettings:function(){this.$el.css("height","auto"),this.$el.css("maxHeight","75vh")},initResize:function(){var t=this;this.$el.data("uiResizable")&&this.$el.resizable("destroy"),this.$el.resizable({minHeight:240,minWidth:380,resize:function(){t.trigger("resize")},handles:"n, e, s, w, ne, se, sw, nw",start:function(n,i){t.trigger("beforeResizeStart"),t.$el.css("maxHeight","none"),t.$el.css("height",i.size.height),e("iframe").css("pointerEvents","none"),t.trigger("afterResizeStart")},stop:function(){t.trigger("beforeResizeStop"),e("iframe").css("pointerEvents",""),t.saveUIPanelSizes(),t.trigger("afterResizeStop")}}),this.content().addClass("vc_properties-list-init"),this.trigger("resize")},setSavedSize:function(){if(this.setDefaultHeightSettings(),vc.is_mobile)return!1;var e={width:getUserSetting(this.panelName+"_vcUIPanelWidth"),left:getUserSetting(this.panelName+"_vcUIPanelLeft").replace("minus","-"),top:getUserSetting(this.panelName+"_vcUIPanelTop").replace("minus","-")};_.isEmpty(e.width)||this.$el.width(e.width),_.isEmpty(e.left)||this.$el.css("left",e.left),_.isEmpty(e.top)||this.$el.css("top",e.top),this.sizeInitialized=!0},saveUIPanelSizes:function(){if(!1===this.sizeInitialized)return!1;var e={width:this.$el.width(),left:parseInt(this.$el.css("left"),10),top:parseInt(this.$el.css("top"),10)};setUserSetting(this.panelName+"_vcUIPanelWidth",e.width),setUserSetting(this.panelName+"_vcUIPanelLeft",e.left.toString().replace("-","minus")+"px"),setUserSetting(this.panelName+"_vcUIPanelTop",e.top.toString().replace("-","minus")+"px")},setupOnMinimize:function(){this.$el.data("uiResizable")&&this.$el.resizable("destroy"),this.$el.resizable({minWidth:380,handles:"w, e",start:function(){e("iframe").css("pointerEvents","none")},stop:function(){e("iframe").css("pointerEvents","")}})}}})(window.jQuery),(e=>{window.vc.HelperTemplatesPanelViewSearch={searchSelector:"[data-vc-templates-name-filter]",noTemplateSelector:".vc-panel-no-templates-message",lastActiveTab:0,events:{"keyup [data-vc-templates-name-filter]":"searchTemplate","search [data-vc-templates-name-filter]":"searchTemplate"},uiEvents:{show:"focusToSearch"},focusToSearch:function(){vc.is_mobile||e(this.searchSelector,this.$el).trigger("focus")},searchTemplate:function(t){(t=e(t.currentTarget)).val().length?(this.$el.find(".vc_panel-tabs-control.vc_active").length&&(this.lastActiveTab=this.$el.find(".vc_panel-tabs-control").index(this.$el.find(".vc_panel-tabs-control.vc_active"))),this.searchByName(t.val())):this.clearSearch()},clearSearch:function(){this.$el.find("[data-vc-templates-name-filter]").val(""),this.$el.find("[data-template_name]").css("display","block"),this.$el.removeAttr("data-vc-template-search"),this.$el.find(".vc-search-result-empty").removeClass("vc-search-result-empty");var t,n=new jQuery.Event("click");n.isClearSearch=!0,(this.$el.find(".vc_panel-tabs-control.vc_active").length?this.$el.find('.vc_panel-tabs-control:first [data-vc-ui-element="panel-tab-control"]'):((t=this.$el.find(".vc_panel-tabs-control").eq(this.lastActiveTab)).addClass("vc_active"),t.find('[data-vc-ui-element="panel-tab-control"]'))).trigger(n),e(this.noTemplateSelector).hide()},searchByName:function(t){var n=!1;this.$el.find(".vc_panel-tabs-control.vc_active").removeClass("vc_active"),this.$el.attr("data-vc-template-search","true"),this.$el.find("[data-template_name]").css("display","none"),this.$el.find('[data-template_name*="'+vc_slugify(t)+'"]').css("display","block"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"]').each((function(){var t=e(this);t.removeClass("vc-search-result-empty"),t.find("[data-template_name]:visible").length?n=!0:t.addClass("vc-search-result-empty")})),n?e(this.noTemplateSelector).hide():e(this.noTemplateSelector).show()}}})(window.jQuery),(e=>{window.vc.HelperPanelViewHeaderFooter={buttonMessageTimeout:!1,events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'touchstart [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity"},uiEvents:{save:"setButtonMessage",render:"clearButtonMessage"},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity"),this.$el.removeClass("vc_minimized")},toggleOpacity:function(t){t.preventDefault();var n,i="vc_animating",a="vc_minimized",o=this,s=this.$el,c=s.find(s.data("vcPanel")),r=c.closest(c.data("vcPanelContainer")),l=e(t.currentTarget);void 0===s.data("vcHasHeight")&&s.data("vcHasHeight",(t=s.attr("style"),n=!1,t&&t.split(";").forEach((function(t){t=t.split(":"),"height"===e.trim(t[0])&&(n=!0)})),n)),s.hasClass(a)?(void 0===s.data("vcMinimizeHeight")&&s.data("vcMinimizeHeight",e(window).height()-.2*e(window).height()),s.animate({height:s.data("vcMinimizeHeight")},{duration:400,start:function(){l.prop("disabled",!0),s.addClass(i),o.tabsMenu&&o.tabsMenu()&&o.tabsMenu().vcTabsLine("moveTabs")},complete:function(){s.removeClass(a),s.removeClass(i),s.data("vcHasHeight")||s.css({height:""}),o.trigger("afterUnminimize"),l.prop("disabled",!1)}})):(s.data("vcMinimizeHeight",s.height()),s.animate({height:c.outerHeight()+r.outerHeight()-r.height()},{duration:400,start:function(){l.prop("disabled",!0),s.addClass(i)},complete:function(){s.addClass(a),s.removeClass(i),s.css({height:""}),o.trigger("afterMinimize"),l.prop("disabled",!1)}}))},setButtonMessage:function(e,t){var n,i;return this.clearButtonMessage=_.bind(this.clearButtonMessage,this),this.buttonMessageTimeout||(void 0===e&&(e=window.i18nLocale.ui_saved),void 0===t&&(t="success"),n=(i=this.$el.find('[data-vc-ui-element="button-save"]')).html(),i.addClass("vc_ui-button-"+t+" vc_ui-button-undisabled").removeClass("vc_ui-button-action").data("vcCurrentTextHtml",n).data("vcCurrentTextType",t).html(e),_.delay(this.clearButtonMessage,5e3),this.buttonMessageTimeout=!0),this},clearButtonMessage:function(){var e,t,n;this.buttonMessageTimeout&&(window.clearTimeout(this.buttonMessageTimeout),t=(n=this.$el.find('[data-vc-ui-element="button-save"]')).data("vcCurrentTextHtml")||"Save",e=n.data("vcCurrentTextType"),n.html(t).removeClass("vc_ui-button-"+e+" vc_ui-button-undisabled").addClass("vc_ui-button-action"),this.buttonMessageTimeout=!1)}}})(window.jQuery),(e=>{window.vc.TemplateWindowUIPanelBackendEditor=vc.TemplatesPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:"template_window",showMessageDisabled:!1,initialize:function(){window.vc.TemplateWindowUIPanelBackendEditor.__super__.initialize.call(this),this.trigger("show",this.initTemplatesTabs,this)},show:function(){this.clearSearch(),window.vc.TemplateWindowUIPanelBackendEditor.__super__.show.call(this)},initTemplatesTabs:function(){this.$el.find('[data-vc-ui-element="panel-tabs-controls"]').vcTabsLine("moveTabs")},showMessage:function(t,n){var i;if(this.showMessageDisabled)return!1;i="vc_col-xs-12 wpb_element_wrapper",this.message_box_timeout&&(this.$el.find("[data-vc-panel-message]").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var a,o=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>');switch(n){case"error":a=e('<div class="'+i+'" data-vc-panel-message>').html(o({color:"danger",icon:"times",text:t}));break;case"warning":a=e('<div class="'+i+'" data-vc-panel-message>').html(o({color:"warning",icon:"exclamation-triangle",text:t}));break;case"success":a=e('<div class="'+i+'" data-vc-panel-message>').html(o({color:"success",icon:"check",text:t}))}a.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),a.fadeIn(),this.message_box_timeout=window.setTimeout((function(){a.remove()}),6e3)},changeTab:function(t){t&&t.preventDefault&&t.preventDefault(),t&&!t.isClearSearch&&this.clearSearch(),(t=e(t.currentTarget)).parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),t.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.$el.find(t.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))},setPreviewFrameHeight:function(t,n){parseInt(n,10)<100&&(n=100),e('data-vc-template-preview-frame="'+t+'"').height(n)}}),window.vc.TemplateWindowUIPanelBackendEditor.prototype.events=e.extend(!0,window.vc.TemplateWindowUIPanelBackendEditor.prototype.events,{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'touchstart [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity","keyup [data-vc-templates-name-filter]":"searchTemplate","search [data-vc-templates-name-filter]":"searchTemplate","click .vc_template-save-btn":"saveTemplate","click [data-template_id] [data-template-handler]":"loadTemplate",'click [data-vc-container=".vc_ui-list-bar"][data-vc-preview-handler]':"buildTemplatePreview",'click [data-vc-ui-delete="template-title"]':"removeTemplate",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"}),window.vc.TemplateWindowUIPanelFrontendEditor=vc.TemplatesPanelViewFrontend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:"template_window",showMessageDisabled:!1,show:function(){this.clearSearch(),window.vc.TemplateWindowUIPanelFrontendEditor.__super__.show.call(this)},showMessage:function(t,n){if(this.showMessageDisabled)return!1;this.message_box_timeout&&(this.$el.find("[data-vc-panel-message]").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var i,a=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>'),o="vc_col-xs-12 wpb_element_wrapper";switch(n){case"error":i=e('<div class="'+o+'" data-vc-panel-message>').html(a({color:"danger",icon:"times",text:t}));break;case"warning":i=e('<div class="'+o+'" data-vc-panel-message>').html(a({color:"warning",icon:"exclamation-triangle",text:t}));break;case"success":i=e('<div class="'+o+'" data-vc-panel-message>').html(a({color:"success",icon:"check",text:t}))}i.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),i.fadeIn(),this.message_box_timeout=window.setTimeout((function(){i.remove()}),6e3)},changeTab:function(t){t&&t.preventDefault&&t.preventDefault(),t&&!t.isClearSearch&&this.clearSearch(),(t=e(t.currentTarget)).parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),t.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.$el.find(t.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))}}),e.fn.vcAccordion.Constructor.prototype.collapseTemplate=function(t){var n,i,a,o=this.$element,s=0,c=this.getContainer().find("[data-vc-preview-handler]").each((function(){var t=e(this),n=t.data("vc.accordion");void 0===n&&(t.vcAccordion(),n=t.data("vc.accordion")),n&&n.setIndex&&n.setIndex(s++)})).filter((function(){var t=e(this).data("vc.accordion");return t.getTarget().hasClass(t.activeClass)})).filter((function(){return o[0]!==this}));c.length&&e.fn.vcAccordion.call(c,"hide"),this.isActive()?e.fn.vcAccordion.call(o,"hide"):(e.fn.vcAccordion.call(o,"show"),n=o.closest(".vc_ui-list-bar-item"),i=o.closest("[data-template_id]"),a=i.closest("[data-vc-ui-element=panel-content]").parent(),setTimeout((function(){var e;Math.round(i.offset().top-a.offset().top)<0&&(e=Math.round(i.offset().top-a.offset().top+a.scrollTop()-n.height()),a.animate({scrollTop:e},400)),"function"==typeof t&&t(i,a)}),400))}})(window.jQuery),(e=>{window.vc.element_start_index=0,window.vc.AddElementUIPanelBackendEditor=vc.PanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelTabs).extend({el:"#vc_ui-panel-add-element",searchSelector:"#vc_elements_name_filter",prepend:!1,builder:"",events:{'click [data-vc-ui-element="button-close"]':"hide",'touchstart [data-vc-ui-element="button-close"]':"hide","click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"handleFiltering","search #vc_elements_name_filter":"handleFiltering","cut #vc_elements_name_filter":"handleFiltering","paste #vc_elements_name_filter":"handleFiltering","click [data-vc-manage-elements]":"openPresetWindow",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"},changeTab:function(t){t&&t.preventDefault&&t.preventDefault();var n=e(t.currentTarget);n.parent().hasClass("vc_active")||(this.switchActiveTab(this.$el,n),this.trigger("tabChange"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive")),this.handleFiltering(t)},initialize:function(){window.vc.AddElementUIPanelBackendEditor.__super__.initialize.call(this),window.vc.events.on("vc:savePreset",this.updateAddElementPopUp.bind(this)),window.vc.events.on("vc:deletePreset",this.removePresetFromAddElementPopUp.bind(this))},render:function(t,n){return _.isUndefined(vc.ShortcodesBuilder)||(this.builder=new vc.ShortcodesBuilder),this.$el.is(":hidden")&&window.vc.closeActivePanel(),(window.vc.active_panel=this).prepend=!!_.isBoolean(n)&&n,this.place_after_id=!!_.isString(n)&&n,this.model=!!_.isObject(t)&&t,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=e('[data-vc-ui-element="add-element-button"]',this.$content),this.buildFiltering(),this.$el.find('[data-vc-ui-element="panel-tab-control"]').eq(0).click(),this.show(),this.$el.find('[data-vc-ui-element="panel-tabs-controls"]').vcTabsLine("moveTabs"),vc.is_mobile||e(this.searchSelector).trigger("focus"),vc.AddElementUIPanelBackendEditor.__super__.render.call(this)},buildFiltering:function(){var t,n,i,a='[data-vc-ui-element="add-element-button"]',o=this._getNotIn(this.model?this.model.get("shortcode"):"");e(this.searchSelector).val(""),this.$content.addClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter","*"),n=!(!(t=this.model?this.model.get("shortcode"):"vc_column")||_.isUndefined(vc.getMapped(t).as_parent))&&vc.getMapped(t).as_parent,_.isObject(n)?(i=[],_.isString(n.only)&&i.push(_.reduce(n.only.replace(/\s/,"").split(","),(function(e,t){return e+(_.isEmpty(e)?"":",")+'[data-element="'+t.trim()+'"]'}),"")),_.isString(n.except)&&i.push(_.reduce(n.except.replace(/\s/,"").split(","),(function(e,t){return e+':not([data-element="'+t.trim()+'"])'}),"")),a+=i.join(",")):o&&(a=o),!1===t||_.isUndefined(vc.getMapped(t).allowed_container_element)||(!1===vc.getMapped(t).allowed_container_element?a+=":not([data-is-container=true])":_.isString(vc.getMapped(t).allowed_container_element)&&(a+=":not([data-is-container=true]), [data-element="+vc.getMapped(t).allowed_container_element+"]")),this.$buttons.removeClass("vc_visible").addClass("vc_inappropriate"),e(a,this.$content).removeClass("vc_inappropriate").addClass("vc_visible"),this.hideEmptyFilters()},hideEmptyFilters:function(){var t=this;this.$el.find('[data-vc-ui-element="panel-add-element-tab"].vc_active').removeClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-add-element-tab"]:first').addClass("vc_active"),this.$el.find("[data-filter]").each((function(){e(e(this).data("filter")+".vc_visible:not(.vc_inappropriate)",t.$content).length?e(this).parent().show():e(this).parent().hide()}))},_getNotIn:_.memoize((function(e){return'[data-vc-ui-element="add-element-button"]:not('+_.reduce(vc.map,(function(t,n){var i=_.isEmpty(t)?"":",";return _.isObject(n.as_child)?(_.isString(n.as_child.only)&&!_.contains(n.as_child.only.replace(/\s/,"").split(","),e)&&(t+=i+"[data-element="+n.base+"]"),_.isString(n.as_child.except)&&_.contains(n.as_child.except.replace(/\s/,"").split(","),e)&&(t+=i+"[data-element="+n.base+"]")):!1===n.as_child&&(t+=i+"[data-element="+n.base+"]"),t}),"")+")"})),handleFiltering:function(e){"cut"==e.type||"paste"===e.type?setTimeout(function(){this.filterElements(e)}.bind(this),0):(e?(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()):e=window.event,this.filterElements(e))},filterElements:function(t){var n=e(t.currentTarget),i='[data-vc-ui-element="add-element-button"]',a=e(this.searchSelector).val();this.$content.removeClass("vc_filter-all"),n.closest(".vc_ui-tabs-line").parent().find('[data-vc-ui-element="panel-add-element-tab"].vc_active').removeClass("vc_active"),n.is("[data-filter]")?(n.parent().addClass("vc_active"),i+=n=n.data("filter"),"*"===n?this.$content.addClass("vc_filter-all"):this.$content.removeClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter",n.replace(".js-category-","")),e(this.searchSelector).val("")):a.length?(i+=':containsi("'+a+'"):not(".vc_element-deprecated")',this.$content.attr("data-vc-ui-filter","name:"+a)):(a.length,e('[data-vc-ui-element="panel-tab-control"][data-filter="*"]').parent().addClass("vc_active"),this.$content.attr("data-vc-ui-filter","*").addClass("vc_filter-all")),e(".vc_visible",this.$content).removeClass("vc_visible"),e(i,this.$content).addClass("vc_visible"),a.length&&13===(t.keyCode||t.which)&&1===(n=e(".vc_visible:not(.vc_inappropriate)",this.$content)).length&&n.find("[data-vc-clickable]").click();var o=!1;i=e(".vc-panel-no-results-message");this.$content.find(".wpb-content-layouts").each((function(){var t=e(this);0<t.find(".vc_visible").length?(t.closest(".vc_clearfix").show(),o=!0):t.closest(".vc_clearfix").hide()})),o?i.hide():i.show()},createElement:function(t){var n,i,a,o,s,c,r,l,d;t&&t.preventDefault&&t.preventDefault(),r=(t=e(t.currentTarget)).data("tag"),c={},s={width:"1/1"},(t=t.closest("[data-preset]"))&&(l=t.data("preset"),d=t.data("element")),!1===this.model?(window.vc.storage.lock(),"vc_section"===r?(t={shortcode:r},l&&"vc_section"===d&&(t.preset=l),i=vc.shortcodes.create(t)):(t={shortcode:"vc_row",params:c},l&&d===r&&(t.preset=l),t={shortcode:"vc_column",params:s,parent_id:(o=vc.shortcodes.create(t)).id,root_id:o.id},l&&"vc_column"===d&&(t.preset=l),a=vc.shortcodes.create(t),i=o,"vc_row"!==r&&(n={shortcode:r,parent_id:a.id,root_id:o.id},l&&d===r&&(n.preset=l),i=vc.shortcodes.create(n)))):i="vc_row"===r?(a="vc_section"===this.model.get("shortcode")?(window.vc.storage.lock(),o=vc.shortcodes.create({shortcode:"vc_row",params:c,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),vc.shortcodes.create({shortcode:"vc_column",params:s,parent_id:o.id,root_id:o.id})):(t={},c={width:"1/1"},window.vc.storage.lock(),o=vc.shortcodes.create({shortcode:"vc_row_inner",params:t,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),vc.shortcodes.create({shortcode:"vc_column_inner",params:c,parent_id:o.id,root_id:o.id})),o):(n={shortcode:r,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder(),root_id:this.model.get("root_id")},l&&d===r&&(n.preset=l),vc.shortcodes.create(n)),this.model=i,window.vc.latestAddedElement=i,s=!(_.isBoolean(vc.getMapped(r).show_settings_on_create)&&!1===vc.getMapped(r).show_settings_on_create),this.model.get("shortcode"),this.hide(),s&&this.showEditForm()},getFirstPositionIndex:function(){return--window.vc.element_start_index,vc.element_start_index},show:function(){this.$el.addClass("vc_active"),this.trigger("show")},hide:function(){this.$el.removeClass("vc_active"),window.vc.active_panel=!1,this.trigger("hide")},showEditForm:function(){window.vc.edit_element_block_view.render(this.model,!1,!0)},updateAddElementPopUp:function(e,t,n,i){var a=this.$el.find('[data-element="'+t+'"]:first').clone(!0);vc_all_presets[e]=i,a.find("[data-vc-shortcode-name]").text(n),a.find(".vc_element-description").text(""),a.attr("data-preset",e),a.addClass("js-category-_my_elements_"),a.insertAfter(this.$el.find('[data-element="'+t+'"]:last')),this.$el.find('[data-filter="js-category-_my_elements_"]').show(),(i=this.$body.find('[data-vc-ui-element="panel-preset"] [data-vc-presets-list-content] .vc_ui-template:first').clone(!0)).find('[data-vc-ui-element="template-title"]').attr("title",n).text(n),i.find('[data-vc-ui-delete="preset-title"]').attr("data-preset",e).attr("data-preset-parent",t),i.find("[data-vc-ui-add-preset]").attr("data-preset",e).attr("id",t).attr("data-tag",t),i.show(),i.insertAfter(this.$body.find('[data-vc-ui-element="panel-preset"] [data-vc-presets-list-content] .vc_ui-template:last'))},removePresetFromAddElementPopUp:function(e){this.$el.find('[data-preset="'+e+'"]').remove()},openPresetWindow:function(e){e&&e.preventDefault&&e.preventDefault(),window.vc.preset_panel_view.render().show()}}),window.vc.AddElementUIPanelFrontendEditor=vc.AddElementUIPanelBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).extend({events:{'click [data-vc-ui-element="button-close"]':"hide",'touchstart [data-vc-ui-element="button-close"]':"hide","keyup #vc_elements_name_filter":"handleFiltering","search #vc_elements_name_filter":"handleFiltering","cut #vc_elements_name_filter":"handleFiltering","paste #vc_elements_name_filter":"handleFiltering","click .vc_shortcode-link":"createElement",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"},createElement:function(t){var n,i,a,o,s,c,r;for(t&&t.preventDefault&&t.preventDefault(),s=(t=e(t.currentTarget)).data("tag"),o={},a={width:"1/1"},(t=t.closest("[data-preset]"))&&(c=t.data("preset"),r=t.data("element")),this.prepend&&(window.vc.activity="prepend"),0==this.model?"vc_section"===s?(t={shortcode:s},c&&"vc_section"===r&&(t.preset=c),this.builder.create(t)):(t={shortcode:"vc_row",params:o},c&&"vc_row"===r&&(t.preset=c),this.builder.create(t),t={shortcode:"vc_column",parent_id:this.builder.lastID(),params:a},c&&"vc_column"===r&&(t.preset=c),this.builder.create(t),"vc_row"!==s&&(n={shortcode:s,parent_id:this.builder.lastID()},c&&r===s&&(n.preset=c),this.builder.create(n))):"vc_row"===s?"vc_section"===this.model.get("shortcode")?this.builder.create({shortcode:"vc_row",params:o,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()}).create({shortcode:"vc_column",params:a,parent_id:this.builder.lastID()}):(t={width:"1/1"},this.builder.create({shortcode:"vc_row_inner",params:{},parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()}).create({shortcode:"vc_column_inner",params:t,parent_id:this.builder.lastID()})):(n={shortcode:s,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()},c&&r===s&&(n.preset=c),this.builder.create(n)),this.model=this.builder.last(),i=this.builder.models.length-1;0<=i;i--)this.builder.models[i].get("shortcode");_.isString(vc.getMapped(s).default_content)&&vc.getMapped(s).default_content.length&&(o=this.builder.parse({},window.vc.getMapped(s).default_content,this.builder.last().toJSON()),_.each(o,(function(e){e.default_content=!0,this.builder.create(e)}),this)),this.model=this.builder.last(),window.vc.latestAddedElement=this.model,a=!(_.isBoolean(vc.getMapped(s).show_settings_on_create)&&!1===vc.getMapped(s).show_settings_on_create),this.hide(),a&&this.showEditForm(),this.builder.render(null,this.model)}})})(window.jQuery),(e=>{window.vc.ExtendPresets={settingsMenuSelector:'[data-vc-ui-element="settings-dropdown-list"]',settingsButtonSelector:'[data-vc-ui-element="settings-dropdown-button"]',settingsDropdownSelector:'[data-vc-ui-element="settings-dropdown"]',settingsPresetId:null,uiEvents:{init:"addEvents",render:"hideDropdown",afterRender:"afterRenderActions"},afterRenderActions:function(){this.untaintSettingsPresetData(),this.showDropdown()},hideDropdown:function(){this.$el.find('[data-vc-ui-element="settings-dropdown"]').hide()},showDropdown:function(){var e=this.model.get("shortcode");window.vc_settings_show&&"vc_column"!==e&&this.$el.find('[data-vc-ui-element="settings-dropdown"]').show()},showDropdownMenu:function(){var t=this.model.get("shortcode"),n=e(this);n.data("vcSettingsMenuLoaded")&&t===n.data("vcShortcodeName")||this.reloadSettingsMenuContent()},addEvents:function(){var t=this.$el.find(".vc_edit-form-tab.vc_active"),n=this.model.get("shortcode"),i=this;e(document).off("beforeMinimize.vc.paramWindow",this.minimizeButtonSelector).on("beforeMinimize.vc.paramWindow",this.minimizeButtonSelector,(function(){t.find(".vc_ui-prompt-presets .vc_ui-prompt-close").trigger("click")})),e(document).off("close.vc.paramWindow",this.closeButtonSelector).on("beforeClose.vc.paramWindow",this.closeButtonSelector,(function(){t.find(".vc_ui-prompt-presets .vc_ui-prompt-close").trigger("click")})),e(document).off("show.vc.accordion",this.settingsButtonSelector).on("show.vc.accordion",this.settingsButtonSelector,(function(){var t=e(this);t.data("vcSettingsMenuLoaded")&&n===t.data("vcShortcodeName")||i.reloadSettingsMenuContent()}))},saveSettingsAjaxData:function(e,t,n,i){return{action:"vc_action_save_settings_preset",shortcode_name:e,is_default:n?1:0,vc_inline:!0,title:t,data:i,_vcnonce:window.vcAdminNonce}},saveSettings:function(t,n){var i=this.model.get("shortcode"),a=JSON.stringify(this.getParamsForSettingsPreset());if(void 0!==t&&t.length)return void 0===n&&(n=!1),this.checkAjax(),this.ajax=e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.saveSettingsAjaxData(i,t,n,a),context:this}).done((function(e){e.success&&(this.setSettingsMenuContent(e.html),this.settingsPresetId=e.id,this.untaintSettingsPresetData())})).always(this.resetAjax),this.ajax},fetchSaveSettingsDialogAjaxData:function(){return{action:"vc_action_render_settings_preset_title_prompt",vc_inline:!0,_vcnonce:window.vcAdminNonce}},fetchSaveSettingsDialog:function(t){var n=this.$el.find(".vc_ui-panel-content-container");n.find(".vc_ui-prompt-presets").length?void 0!==t&&t(!1):(this.checkAjax(),this.ajax=e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.fetchSaveSettingsDialogAjaxData()}).done((function(e){e.success&&(n.prepend(e.html),void 0!==t)&&t(!0)})).fail((function(){void 0!==t&&t(!1)})).always(this.resetAjax))},showSaveSettingsDialog:function(t){var n=this;this.isSettingsPresetDefault=!!t,this.fetchSaveSettingsDialog((function(t){var i,a,o=n.$el.find(".vc_ui-panel-content-container"),s=o.find(".vc_ui-prompt-presets"),c=s.find(".textfield"),r=(o.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible"),s.find("[data-vc-view-settings-preset]"));"undefined"!==window.vc_vendor_settings_presets[n.model.get("shortcode")]?r.removeAttr("disabled"):r.attr("disabled","disabled"),s.addClass("vc_visible"),c.trigger("focus"),o.addClass("vc_ui-content-hidden"),t&&(i=s.find("#vc_ui-save-preset-btn"),a=0,s.on("submit",(function(){var e=c.val();return e.length&&n.saveSettings(e,n.isSettingsPresetDefault).done((function(t){var r=this.getParamsForSettingsPreset();c.val(""),n.setCustomButtonMessage(i,void 0,void 0,!0),vc.events.trigger("vc:savePreset",t.id,n.model.get("shortcode"),e,r),a=_.delay((function(){s.removeClass("vc_visible"),o.removeClass("vc_ui-content-hidden")}),5e3)})).fail((function(){n.setCustomButtonMessage(i,window.i18nLocale.ui_danger,"danger",!0)})),!1})),s.on("click",".vc_ui-prompt-close",(function(){return n.checkAjax(),s.removeClass("vc_visible"),o.removeClass("vc_ui-content-hidden"),n.clearCustomButtonMessage.call(this,i),a&&(window.clearTimeout(a),a=0),!1})),e(".edit-form-info").initializeTooltips())}))},loadSettingsAjaxData:function(e){return{action:"vc_action_get_settings_preset",vc_inline:!0,id:e,_vcnonce:window.vcAdminNonce}},loadSettings:function(t){return this.panelInit=!1,this.checkAjax(),this.ajax=e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.loadSettingsAjaxData(t),context:this}).done((function(e){e.success&&(this.settingsPresetId=t,this.applySettingsPreset(e.data))})).always(this.resetAjax),this.ajax},saveAsDefaultSettingsAjaxData:function(e,t){return{action:"vc_action_set_as_default_settings_preset",shortcode_name:e,id:t,vc_inline:!0,_vcnonce:window.vcAdminNonce}},saveAsDefaultSettings:function(t,n){var i=this.model.get("shortcode");(t=t||this.settingsPresetId)?(this.checkAjax(),this.ajax=e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.saveAsDefaultSettingsAjaxData(i,t),context:this}).done((function(e){e.success&&(this.setSettingsMenuContent(e.html),this.untaintSettingsPresetData(),n)&&n()})).always(this.resetAjax)):this.showSaveSettingsDialog(!0)},restoreDefaultSettingsAjaxData:function(e){return{action:"vc_action_restore_default_settings_preset",shortcode_name:e,vc_inline:!0,_vcnonce:window.vcAdminNonce}},restoreDefaultSettings:function(){var t=this.model.get("shortcode");this.checkAjax(),this.ajax=e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.restoreDefaultSettingsAjaxData(t),context:this}).done((function(e){e.success&&this.setSettingsMenuContent(e.html)})).always(this.resetAjax)},setSettingsMenuContent:function(e){var t=this.$el.find(this.settingsButtonSelector),n=this.$el.find(this.settingsMenuSelector),i=this.model.get("shortcode"),a=this;t.data("vcShortcodeName",i),n.html(e),window.vc_presets_data&&0<window.vc_presets_data.presetsCount?n.find("[data-vc-view-settings-preset]").removeAttr("disabled"):n.find("[data-vc-view-settings-preset]").attr("disabled","disabled"),n.find("[data-vc-view-settings-preset]").on("click",(function(){a.showViewSettingsList(),a.closeSettings()})),n.find("[data-vc-save-settings-preset]").on("click",(function(){a.showSaveSettingsDialog(),a.closeSettings()})),n.find("[data-vc-save-template]").on("click",(function(){a.showSaveTemplateDialog(),a.closeSettings()})),n.find("[data-vc-save-default-settings-preset]").on("click",(function(){a.saveAsDefaultSettings(),a.closeSettings()})),n.find("[data-vc-restore-default-settings-preset]").on("click",(function(){a.restoreDefaultSettings(),a.closeSettings()}))},reloadSettingsMenuContentAjaxData:function(e){return{action:"vc_action_render_settings_preset_popup",shortcode_name:e,vc_inline:!0,_vcnonce:window.vcAdminNonce}},showViewSettingsList:function(){var t,n,i,a=this.$el.find(".vc_ui-panel-content-container");a.find(".vc_ui-prompt-view-presets:not(.vc_visible)").remove(),a.find(".vc_ui-prompt-view-presets").length||(a.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible"),t=this,n=jQuery('<form class="vc_ui-prompt vc_ui-prompt-view-presets"><div class="vc_ui-prompt-controls"><button type="button" class="vc_general vc_ui-control-button vc_ui-prompt-close"><i class="vc-composer-icon vc-c-icon-close"></i></button></div><div class="vc_ui-prompt-title"><label for="prompt_title" class="wpb_element_label">Elements</label></div><div class="vc_ui-prompt-content"><div class="vc_ui-prompt-column"><div class="vc_ui-template-list vc_ui-list-bar" data-vc-action="collapseAll" style="margin-top: 20px;" data-vc-presets-list-content></div></div></div>'),this.buildsettingsListContent(n),n.appendTo(a),n.addClass("vc_visible"),a.addClass("vc_ui-content-hidden"),i=function(){return n.remove(),a.removeClass("vc_ui-content-hidden"),!1},n.off("click.vc1").on("click.vc1","[data-vc-load-settings-preset]",(function(n){t.loadSettings(e(n.currentTarget).data("vcLoadSettingsPreset")),i()})),n.off("click.vc4").on("click.vc4","[data-vc-set-default-settings-preset]",(function(){t.saveAsDefaultSettings(e(this).data("vcSetDefaultSettingsPreset"),(function(){t.buildsettingsListContent(n)}))})),n.off("click.vc3").on("click.vc3",".vc_ui-prompt-close",(function(){i(),t.checkAjax()})))},buildsettingsListContent:function(e){var t=vc.template('<div class="vc_ui-template"><div class="vc_ui-list-bar-item"><button class="vc_ui-list-bar-item-trigger" title="Apply Element" type="button" data-vc-load-settings-preset="<%- id %>"><%- title %></button><div class="vc_ui-list-bar-item-actions"><button class="vc_general vc_ui-control-button" title="Apply Element" type="button" data-vc-load-settings-preset="<%- id %>"><i class="vc-composer-icon vc-c-icon-add"></i></button><button class="vc_general vc_ui-control-button" title="Delete Element" type="button" data-vc-delete-settings-preset="<%- id %>"><i class="vc-composer-icon vc-c-icon-delete_empty"></i></button></div></div></div>'),n=e.find("[data-vc-presets-list-content]");n.empty(),_.each(window.vc_presets_data.presets[0],(function(e,i){var a=e;0<window.vc_presets_data.defaultId&&parseInt(i,10)===window.vc_presets_data.defaultId&&(a=e+" (default)"),n.append(t({title:a,id:i}))})),_.each(window.vc_presets_data.presets[1],(function(e,i){var a=e;0<window.vc_presets_data.defaultId&&parseInt(i,10)===window.vc_presets_data.defaultId&&(a=e+" (default)"),n.append(t({title:a,id:i}))}))},reloadSettingsMenuContent:function(){var t=this.model.get("shortcode"),n=this.$el.find(this.settingsButtonSelector),i=!1;return this.setSettingsMenuContent(""),this.checkAjax(),this.ajax=e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.reloadSettingsMenuContentAjaxData(t),context:this}).done((function(e){e.success&&(i=!0,this.setSettingsMenuContent(e.html),n.data("vcSettingsMenuLoaded",!0))})).always((function(){i||this.closeSettings(),this.resetAjax()})),this.ajax},closeSettings:function(e){void 0===e&&(e=!1);var t=this.$el.find(this.settingsMenuSelector),n=this.$el.find(this.settingsButtonSelector);e&&(n.data("vcSettingsMenuLoaded",!1),t.html("")),n.vcAccordion("hide")},isSettingsPresetDataTainted:function(){var e=(e=JSON.stringify(this.getParamsForSettingsPreset())).replace(/vc_custom_\d+/,"");return this.$el.data("vcSettingsPresetHash")!==vc_globalHashCode(e)},untaintSettingsPresetData:function(){var e=(e=JSON.stringify(this.getParamsForSettingsPreset())).replace(/vc_custom_\d+/,"");this.$el.data("vcSettingsPresetHash",vc_globalHashCode(e))},applySettingsPresetAjaxData:function(e){var t=this.model.get("parent_id");return{action:"vc_edit_form",tag:this.model.get("shortcode"),parent_tag:t?vc.shortcodes.get(t).get("shortcode"):null,post_id:vc_post_id,params:e,_vcnonce:window.vcAdminNonce}},applySettingsPreset:function(t){return this.currentModelParams=t,vc.events.trigger("presets:apply",this.model,t),this._killEditor(),this.trigger("render"),this.show(),this.checkAjax(),this.ajax=e.ajax({type:"POST",url:window.ajaxurl,data:this.applySettingsPresetAjaxData(t),context:this}).done(this.buildParamsContent).always(this.resetAjax),this},getParamsForSettingsPreset:function(){var e=this.model.get("shortcode"),t=this.getParams();return"vc_column"!==e&&"vc_column_inner"!==e||(delete t.width,delete t.offset),t}},vc.events.on("presets.apply",(function(e,t){return"vc_tta_section"===e.get("shortcode")&&void 0!==t.tab_id&&(t.tab_id=vc_guid()+"-cl"),t}))})(window.jQuery),(e=>{window.vc.ExtendTemplates={fetchSaveTemplateDialogAjaxData:function(){return{action:"vc_action_render_settings_templates_prompt",vc_inline:!0,_vcnonce:window.vcAdminNonce}},fetchSaveTemplateDialog:function(t){var n=this.$el.find(".vc_ui-panel-content-container");if(!n.find(".vc_ui-prompt-templates").length)return this.checkAjax(),this.ajax=e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.fetchSaveTemplateDialogAjaxData()}).done((function(e){e.success&&(n.prepend(e.html),void 0!==t)&&t(!0)})).always(this.resetAjax),this.ajax;void 0!==t&&t(!1)},showSaveTemplateDialog:function(){var e=this;this.fetchSaveTemplateDialog((function(t){var n,i,a=e.$el.find(".vc_ui-panel-content-container"),o=a.find(".vc_ui-prompt-templates"),s=o.find(".textfield");a.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible"),o.addClass("vc_visible"),s.trigger("focus"),a.addClass("vc_ui-content-hidden"),t&&(n=0,i=o.find("#vc_ui-save-templates-btn"),o.on("submit",(function(){var t=s.val();return e.$el.find(e.settingsButtonSelector),t.length&&(t={action:vc.templates_panel_view.save_template_action,template:vc.shortcodes.singleStringify(e.model.get("id"),"template"),template_name:t,vc_inline:!0,_vcnonce:window.vcAdminNonce},vc.templates_panel_view.reloadTemplateList(t,(function(){s.val(""),e.setCustomButtonMessage(i,void 0,void 0,!0),n=_.delay((function(){o.removeClass("vc_visible"),a.removeClass("vc_ui-content-hidden")}),5e3)}),(function(){e.setCustomButtonMessage(i,window.i18nLocale.ui_danger,"danger")}))),!1})),o.on("click",".vc_ui-prompt-close",(function(){return e.checkAjax(),o.removeClass("vc_visible"),a.removeClass("vc_ui-content-hidden"),e.clearCustomButtonMessage.call(this,i),n&&(window.clearTimeout(n),n=0),!1})))}))}}})(window.jQuery),(e=>{window.vc.EditElementPanelView=vc.PanelView.vcExtendUI(vc.HelperAjax).vcExtendUI(vc.ExtendPresets).vcExtendUI(vc.ExtendTemplates).vcExtendUI(vc.HelperPrompts).extend({panelName:"edit_element",el:"#vc_properties-panel",contentSelector:".vc_ui-panel-content.vc_properties-list",minimizeButtonSelector:'[data-vc-ui-element="button-minimize"]',closeButtonSelector:'[data-vc-ui-element="button-close"]',titleSelector:".vc_panel-title",tabsInit:!1,doCheckTabs:!0,$tabsMenu:!1,dependent_elements:{},mapped_params:{},draggable:!1,panelInit:!1,$spinner:!1,activeTabIndex:0,buttonMessageTimeout:!1,notRequestTemplate:!1,requiredParamsInitialized:!1,currentModelParams:!1,customButtonMessageTimeout:!1,events:{"click [data-save=true]":"save","click [data-dismiss=panel]":"hide","mouseover [data-transparent=panel]":"addOpacity","click [data-transparent=panel]":"toggleOpacity","mouseout [data-transparent=panel]":"removeOpacity"},formRender:function(){var e=this,t=null;this.$el.find(".vc_edit-form-tab").on("input change",(function(n){clearTimeout(t),vc.saveInProcess=!0,t=setTimeout((function(){e.save(n)}),500)}))},initialize:function(){_.bindAll(this,"setSize","setTabsSize","fixElContainment","hookDependent","resetAjax","removeAllPrompts"),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this),this.on("render",this.setTitle,this),this.on("render",this.prepareContentBlock,this),window.vc_auto_save&&this.on("afterRender",this.formRender,this),this.on("afterRender",(function(){e(".edit-form-info").initializeTooltips(),this.reInitJsFunctions()}),this)},reInitJsFunctions:function(){try{window.vc.frame_window&&window.vc.frame_window.vc_js&&vc.events.on("shortcodeView:updated",window.vc.frame_window.vc_js)}catch(e){console.error("Failed to execute window.vc.frame_window.vc_js function in reInitJsFunctions(): ",e)}},setCustomButtonMessage:function(e,t,n,i){return void 0===e&&(e=this.$el.find('[data-vc-ui-element="button-save"]')),void 0===i&&(i=!1),this.clearCustomButtonMessage=_.bind(this.clearCustomButtonMessage,this),!i&&!vc.frame_window||this.customButtonMessageTimeout||(void 0===t&&(t=window.i18nLocale.ui_saved),void 0===n&&(n="success"),i=e.html(),e.addClass("vc_ui-button-"+n+" vc_ui-button-undisabled").removeClass("vc_ui-button-action").data("vcCurrentTextHtml",i).data("vcCurrentTextType",n).html(t),_.delay(this.clearCustomButtonMessage.bind(this,e),5e3),this.customButtonMessageTimeout=!0),this},clearCustomButtonMessage:function(e){var t,n;this.customButtonMessageTimeout&&(window.clearTimeout(this.customButtonMessageTimeout),n=e.data("vcCurrentTextHtml")||"Save",t=e.data("vcCurrentTextType"),e.html(n).removeClass("vc_ui-button-"+t+" vc_ui-button-undisabled").addClass("vc_ui-button-action"),this.customButtonMessageTimeout=!1)},render:function(t,n,i){return this.$el.is(":hidden")&&vc.closeActivePanel(),n&&(this.notRequestTemplate=!0),this.model=t,this.currentModelParams=this.model.get("params"),(vc.active_panel=this).resetMinimize(),this.clicked=!1,this.$el.css("height","auto"),this.$el.css("maxHeight","75vh"),n=this.model.setting("params")||[],this.$el.attr("data-vc-shortcode",this.model.get("shortcode")),this.tabsInit=!1,this.panelInit=!1,this.activeTabIndex=0,this.requiredParamsInitialized=!1,this.mapped_params={},this.dependent_elements={},_.each(n,(function(e){this.mapped_params[e.param_name]=e}),this),this.trigger("render"),this.show(),this.checkAjax(),t=this.model.get("id"),this.isEditElementPanelCache(t)?this.buildParamsContent(window.vc.EditElementPanelCache[t]):this.ajax=e.ajax({type:"POST",url:window.ajaxurl,data:this.ajaxData(i),context:this}).done(this.buildParamsContent).always(this.resetAjax),this},prepareContentBlock:function(){this.$content=this.notRequestTemplate?this.$el:this.$el.find(this.contentSelector).removeClass("vc_with-tabs"),this.$content.empty(),this.$spinner=e('<span class="vc_ui-wp-spinner vc_ui-wp-spinner-lg vc_ui-wp-spinner-dark"></span>'),this.$content.prepend(this.$spinner)},buildParamsContent:function(t){var n,i,a,o=this.model.get("id"),s=(o=(this.setEditElementPanelCache(o,t),this.getExternalScriptsFromDataHtml(t)),t=this.removeExternalScriptsFromDataHtml(t),(n=(t=e(t)).find('[data-vc-ui-element="panel-tabs-controls"]')).find(".vc_edit-form-tab-control:first-child").addClass("vc_active"),i=this.$el.find('[data-vc-ui-element="panel-header-content"]'),(a=t.find('[data-vc-ui-element="panel-edit-element-tab"]'))&&a.addClass("visually-hidden"),i&&i.addClass("visually-hidden"),this.$content.html(t)),c=(this.loadScriptsSequentially(o,(function(){s.append("<script async>window.setTimeout(function(){window.wpb_edit_form_loaded=true;},100);<\/script>")})),this.$content.prepend(this.$spinner),n.prependTo(i),this),r=0,l=function(){!window.wpb_edit_form_loaded&&r<1e3?(r++,setTimeout(l,100)):(c.$content.removeAttr("data-vc-param-initialized"),c.activeTabIndex=0,c.tabsInit=!1,c.panelInit=!1,c.dependent_elements={},c.requiredParamsInitialized=!1,c.$content.find("[data-vc-param-initialized]").removeAttr("data-vc-param-initialized"),a.removeClass("visually-hidden"),c.$content.find(".vc_ui-wp-spinner").remove(),c.init(),c.$content.parent().scrollTop(1).scrollTop(0),c.$content.removeClass("vc_properties-list-init"),c.$el.trigger("vcPanel.shown"),c.trigger("afterRender"),vc.events.trigger("editElementPanel:ready"))};window.setTimeout(l,10)},getExternalScriptsFromDataHtml:function(e){for(var t,n=[],i=this.getExternalScriptRegex();t=i.exec(e);)n.push(t[1]);return n},removeExternalScriptsFromDataHtml:function(e){return e.replace(this.getExternalScriptRegex(),"")},getExternalScriptRegex:function(){return/<script\s+src="([^"]+)"><\/script>/g},loadScriptsSequentially:function(e,t){var n,i;0===e.length?t():(n=e.shift(),(i=document.createElement("script")).src=n,i.onload=function(){this.loadScriptsSequentially(e,t)}.bind(this),document.head.appendChild(i))},setEditElementPanelCache:function(e,t){window.vc.EditElementPanelCache||(window.vc.EditElementPanelCache={}),window.vc.EditElementPanelCache[e]=t},removeElementEditElementPanelCache:function(e){window.vc.EditElementPanelCache&&window.vc.EditElementPanelCache[e]&&delete window.vc.EditElementPanelCache[e]},isEditElementPanelCache:function(e){return window.vc.EditElementPanelCache&&window.vc.EditElementPanelCache[e]},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity")},ajaxData:function(e){var t=(t=this.model.get("parent_id"))?this.model.collection.get(t).get("shortcode"):null,n=this.model.get("params");n=_.extend({},vc.getDefaults(this.model.get("shortcode")),n);return{action:"vc_edit_form",tag:this.model.get("shortcode"),parent_tag:t,post_id:vc_post_id,params:n,usage_count:e,_vcnonce:window.vcAdminNonce}},init:function(){vc.EditElementPanelView.__super__.init.call(this),this.$el.find('[data-vc-ui-element="panel-header-content"]').removeClass("visually-hidden"),this.initParams(),this.initDependency(),e(".wpb_edit_form_elements .textarea_html").each((function(){window.init_textarea_html(e(this))})),this.trigger("init"),this.panelInit=!0},initParams:function(){var t=this,n=this.content().find('#vc_edit-form-tabs [data-vc-ui-element="panel-edit-element-tab"]:eq('+this.activeTabIndex+")");(n=n.length?n:this.content()).attr("data-vc-param-initialized")||(e('[data-vc-ui-element="panel-shortcode-param"]',n).each((function(){var n,i=e(this);i.data("vcInitParam")||(n=i.data("param_settings"),vc.atts.init.call(t,n,i),i.data("vcInitParam",!0))})),n.attr("data-vc-param-initialized",!0)),this.requiredParamsInitialized||_.isUndefined(vc.required_params_to_init)||(e('[data-vc-ui-element="panel-shortcode-param"]',this.content()).each((function(){var n,i=e(this);!i.data("vcInitParam")&&-1<_.indexOf(vc.required_params_to_init,i.data("param_type"))&&(n=i.data("param_settings"),vc.atts.init.call(t,n,i),i.data("vcInitParam",!0))})),this.requiredParamsInitialized=!0)},initDependency:function(){var t={};_.each(this.mapped_params,(function(n){var i,a,o;_.isObject(n)&&_.isObject(n.dependency)&&(i=n.dependency,_.isString(n.dependency.element)&&(a=e("[name="+n.dependency.element+"].wpb_vc_param_value",this.$content),o=e("[name= "+n.param_name+"].wpb_vc_param_value",this.$content),_.each(a,(function(n){var i=(n=e(n)).attr("name");_.isArray(this.dependent_elements[n.attr("name")])||(this.dependent_elements[n.attr("name")]=[]),this.dependent_elements[n.attr("name")].push(o),n.data("dependentSet")||(n.attr("data-dependent-set","true"),n.off("keyup change",this.hookDependent).on("keyup change",this.hookDependent)),t[i]||(t[i]=n)}),this)),_.isString(i.callback))&&window[i.callback].call(this)}),this),this.doCheckTabs=!1,_.each(t,(function(e){this.hookDependent({currentTarget:e})}),this),this.doCheckTabs=!0,this.checkTabs(),t=null},hookDependent:function(t){var n,i=e(t.currentTarget),a=i.closest(".vc_column"),o=this.dependent_elements[i.attr("name")],s=i.is(":checkbox")?_.map(this.$content.find("[name="+e(t.currentTarget).attr("name")+"].wpb_vc_param_value:checked"),(function(t){return e(t).val()})):i.val();t=this.doCheckTabs;return this.doCheckTabs=!1,n=i.is(":checkbox")?!this.$content.find("[name="+i.attr("name")+"].wpb_vc_param_value:checked").length:!s.length,a.hasClass("vc_dependent-hidden")?_.each(o,(function(e){var t=jQuery.Event("change");t.extra_type="vcHookDepended",e.closest(".vc_column").addClass("vc_dependent-hidden"),e.trigger(t)})):_.each(o,(function(e){var t=e.attr("name"),i=(t=_.isObject(this.mapped_params[t])&&_.isObject(this.mapped_params[t].dependency)?this.mapped_params[t].dependency:{},e.closest(".vc_column"));(t=(_.isBoolean(t.not_empty)&&!0===t.not_empty&&!n||_.isBoolean(t.is_empty)&&!0===t.is_empty&&n||t.value&&_.intersection(_.isArray(t.value)?t.value:[t.value],_.isArray(s)?s:[s]).length||t.value_not_equal_to&&!_.intersection(_.isArray(t.value_not_equal_to)?t.value_not_equal_to:[t.value_not_equal_to],_.isArray(s)?s:[s]).length||t.value_includes&&s.includes(t.value_includes)?i.removeClass("vc_dependent-hidden"):i.addClass("vc_dependent-hidden"),jQuery.Event("change"))).extra_type="vcHookDepended",e.trigger(t)}),this),t&&(this.checkTabs(),this.doCheckTabs=!0),this},checkTabs:function(){var t=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$content.hasClass("vc_with-tabs"))&&(this.$tabsMenu=this.$content.find(".vc_edit-form-tabs-menu")),this.$tabsMenu&&(this.$content.find('[data-vc-ui-element="panel-edit-element-tab"]').each((function(n){var i=t.$tabsMenu.find('> [data-tab-index="'+n+'"]');e(this).find('[data-vc-ui-element="panel-shortcode-param"]:not(".vc_dependent-hidden")').length?i.hasClass("vc_dependent-hidden")&&(i.removeClass("vc_dependent-hidden").removeClass("vc_tab-color-animated").addClass("vc_tab-color-animated"),window.setTimeout((function(){i.removeClass("vc_tab-color-animated")}),200)):i.addClass("vc_dependent-hidden")})),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabsMenu.parents(".vc_with-tabs.vc_panel-body").css("margin-top",this.$tabsMenu.outerHeight())},setActive:function(){this.$el.prev().addClass("active")},window:function(){return window},getParams:function(){var e=this.mapped_params;return this.params=_.extend({},this.model.get("params")),_.each(e,(function(e){var t=vc.atts.parseFrame.call(this,e);this.params[e.param_name]=t}),this),_.each(vc.edit_form_callbacks,(function(e){e.call(this)}),this),this.params},content:function(){return this.$content},save:function(t){var n=this.model.get("id");if(this.removeElementEditElementPanelCache(n),vc.saveInProcess=!0,t=t&&t.target&&t.target.classList.contains("textarea_html")||!!(t&&t.target&&t.target.closest(".vc_ui-panel-footer-container"))&&!!(n=t.target.closest(".vc_ui-panel-window-inner"))&&(n=e(n).find(".vc_ui-panel-content-container"))&&0<n.find(".html-active").length,this.panelInit&&this.model){var i=(n=this).model.get("shortcode"),a=n.getParams(),o=_.extend({},vc.getDefaults(i),vc.getMergedParams(i,a));if(!_.isUndefined(a.content)){if(t)try{a.content=window.vc.utils.fixUnclosedTags(a.content),a.content=window.vc.utils.validateHtml(a.content)}catch(t){console.error("Error processing HTML content: ",t)}o.content=a.content}n.model.save({params:o}),n.showMessage(window.sprintf(window.i18nLocale.inline_element_saved,vc.getMapped(i).name),"success"),window.vc_auto_save||window.vc.frame_window||this.hide(),n.trigger("save"),vc.saveInProcess=!1}},show:function(){this.$el.hasClass("vc_active")||(this.$el.addClass("vc_active"),this.draggable||this.initDraggable(),this.fixElContainment(),this.trigger("show"))},hide:function(e){e&&e.preventDefault&&e.preventDefault(),vc.saveInProcess?(this.$el.addClass("visually-hidden"),setTimeout(function(){this.handleHide()}.bind(this),500)):this.handleHide()},handleHide:function(){this.checkAjax(),this.ajax=!1,this.model=null,vc.active_panel=!1,this.currentModelParams=!1,this._killEditor(),this.$el.removeClass("vc_active visually-hidden"),this.$el.find(".vc_properties-list").removeClass("vc_with-tabs").css("margin-top","auto"),this.$content.empty(),this.trigger("hide")},setTitle:function(){return this.$el.find(this.titleSelector).html(vc.getMapped(this.model.get("shortcode")).name+" "+window.i18nLocale.settings),this},_killEditor:function(){_.isUndefined(window.tinyMCE)||e("textarea.textarea_html",this.$el).each((function(){var t=e(this).attr("id");"4"===tinymce.majorVersion?window.tinyMCE.execCommand("mceRemoveEditor",!0,t):window.tinyMCE.execCommand("mceRemoveControl",!0,t)})),jQuery("body").off("click.wpcolorpicker")}}),window.vc.EditElementUIPanel=vc.EditElementPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI(vc.HelperPanelTabs).extend({el:"#vc_ui-panel-edit-element",events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'touchstart [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"},titleSelector:'[data-vc-ui-element="panel-title"]',initialize:function(){vc.EditElementUIPanel.__super__.initialize.call(this),this.on("afterResizeStart",(function(){this.$el.css("maxHeight","none")}))},show:function(){vc.EditElementUIPanel.__super__.show.call(this),e('[data-vc-ui-element="panel-tabs-controls"]',this.$el).remove(),this.$el.css("maxHeight","75vh")},tabsMenu:function(){var e;return!1===this.tabsInit&&(this.tabsInit=!0,(e=this.$el.find('[data-vc-ui-element="panel-tabs-controls"]')).length)&&(this.$tabsMenu=e),this.$tabsMenu},buildTabs:function(){this.content().find('[data-vc-ui-element="panel-tabs-controls"]').prependTo('[data-vc-ui-element="panel-header-content"]')},changeTab:function(t){t&&t.preventDefault&&t.preventDefault(),(t=e(t.currentTarget)).parent().hasClass("vc_active")||(this.switchActiveTab(this.$el,t),this.activeTabIndex=this.$el.find(t.data("vcUiElementTarget")).addClass("vc_active").index(),this.initParams(),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"),this.$content.parent().scrollTop(1).scrollTop(0),this.trigger("tabChange"))},checkTabs:function(){var t=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$tabsMenu=this.$el.find('[data-vc-ui-element="panel-tabs-controls"]')),this.tabsMenu()&&(this.content().find('[data-vc-ui-element="panel-edit-element-tab"]').each((function(n){var i=t.$tabsMenu.find('[data-tab-index="'+n+'"]');e(this).find('[data-vc-ui-element="panel-shortcode-param"]:not(".vc_dependent-hidden")').length?i.hasClass("vc_dependent-hidden")&&(i.removeClass("vc_dependent-hidden"),window.setTimeout((function(){i.removeClass("vc_tab-color-animated")}),200)):i.addClass("vc_dependent-hidden")})),this.$tabsMenu.vcTabsLine("refresh"),this.$tabsMenu.vcTabsLine("moveTabs"))}})})(window.jQuery),(e=>{window.vc.TemplateLibraryView=vc.PanelView.vcExtendUI(vc.HelperAjax).extend({myTemplates:[],$mainPopup:!1,$loadingPage:!1,$gridContainer:!1,$errorMessageContainer:!1,$myTemplateContainer:!1,$popupItems:!1,$previewImage:!1,$previewTitle:!1,$previewUpdate:!1,$previewDownload:!1,$previewUpdateBtn:!1,$previewDownloadBtn:!1,$templatePreview:!1,$templatePage:!1,$downloadPage:!1,$updatePage:!1,$content:!1,$filter:!1,compiledGridTemplate:!1,compiledTemplate:!1,loaded:!1,data:!1,events:{"click [data-dismiss=panel]":"hide","click .vc_ui-panel-close-button":"closePopupButton","click .vc_ui-access-library-btn":"accessLibrary","click #vc_template-library-template-grid .vc_ui-panel-template-preview-button":"previewButton","click .vc_ui-panel-back-button":"backToTemplates","click .vc_ui-panel-template-download-button, #vc_template-library-download-btn":"downloadButton","click .vc_ui-panel-template-update-button, #vc_template-library-update-btn":"updateButton","keyup #vc_template_lib_name_filter":"filterTemplates","search #vc_template_lib_name_filter":"filterTemplates"},initialize:function(){_.bindAll(this,"loadLibrary","addTemplateStatus","loadMyTemplates","deleteTemplate"),this.$mainPopup=this.$el.find(".vc_ui-panel-popup"),this.$loadingPage=this.$el.find(".vc_ui-panel-loading"),this.$gridContainer=this.$el.find("#vc_template-library-template-grid"),this.$errorMessageContainer=this.$el.find("#vc_template-library-panel-error-message"),this.$myTemplateContainer=this.$el.find("#vc_template-library-shared_templates"),this.$popupItems=this.$el.find(".vc_ui-panel-popup-item"),this.$previewImage=this.$el.find(".vc_ui-panel-preview-image"),this.$previewTitle=this.$el.find(".vc_ui-panel-template-preview .vc_ui-panel-title"),this.$previewUpdate=this.$el.find("#vc_template-library-update"),this.$previewDownload=this.$el.find("#vc_template-library-download"),this.$previewUpdateBtn=this.$previewUpdate.find("#vc_template-library-update-btn"),this.$previewDownloadBtn=this.$previewUpdate.find("#vc_template-library-download-btn"),this.$templatePreview=this.$el.find(".vc_ui-panel-template-preview"),this.$templatePage=this.$el.find(".vc_ui-panel-template-content"),this.$downloadPage=this.$el.find(".vc_ui-panel-download"),this.$updatePage=this.$el.find(".vc_ui-panel-update"),this.$filter=this.$el.find("#vc_template_lib_name_filter"),this.$content=this.$el.find(".vc_ui-templates-content");var t=e("#vc_template-grid-item").html();this.compiledGridTemplate=vc.template(t),t=e("#vc_template-item").html();this.compiledTemplate=vc.template(t),window.vc.events.on("templates:delete",this.deleteTemplate)},getLibrary:function(){var t,n;this.loaded?this.showLibrary():(this.checkAjax(),t=this.getStorage("templates"),n=this,t&&"object"==typeof t&&!_.isEmpty(t)?(this.loaded=!0,this.loadLibrary(t),this.showLibrary()):this.ajax=e.getJSON("https://vc-cc-templates.wpbakery.com/templates.json").done((function(e){n.setStorage("templates",e),n.loaded=!0,n.loadLibrary(e),n.showLibrary()})).always(this.resetAjax))},removeStorage:function(e){try{localStorage.removeItem("vc4-"+e),localStorage.removeItem("vc4-"+e+"_expiresIn")}catch(t){return console.error("removeStorage: Error removing key ["+e+"] from localStorage: "+JSON.stringify(t)),!1}return!0},getStorage:function(e){var t=Date.now(),n=localStorage.getItem("vc4-"+e+"_expiresIn");if((n=null==n?0:n)<t)return this.removeStorage(e),null;try{return JSON.parse(localStorage.getItem("vc4-"+e))}catch(t){return console.error("getStorage: Error reading key ["+e+"] from localStorage: "+JSON.stringify(t)),null}},setStorage:function(e,t,n){n=null==n?86400:Math.abs(n),n=Date.now()+1e3*n;try{localStorage.setItem("vc4-"+e,JSON.stringify(t)),localStorage.setItem("vc4-"+e+"_expiresIn",n)}catch(e){return window.console&&window.console.warn&&window.console.warn("template setStorage error",e),!1}return!0},loadLibrary:function(e){var t,n;e&&(t="",(n=this).loaded=!0,this.data=e,this.$filter.val(""),e.forEach((function(e){e=n.addTemplateStatus(e),t+=n.compiledGridTemplate({id:e.id,title:e.title,thumbnailUrl:e.thumbnailUrl,previewUrl:e.previewUrl,status:e.status,downloaded:_.find(n.myTemplates,{id:e.id}),version:e.version})})),this.$gridContainer.html(t))},showLibrary:function(){this.$loadingPage.addClass("vc_ui-hidden"),this.$mainPopup.removeClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},addTemplateStatus:function(e){var t,n="",i=_.find(this.myTemplates,{id:e.id});return i&&(t=window.i18nLocale.ui_template_downloaded,n='<span class="vc_ui-panel-template-item-info"><span>'+(t=e.version>i.version?window.i18nLocale.ui_template_fupdate:t)+"</span></span>"),e.status=n,e},loadMyTemplates:function(){var e="",t=this;this.myTemplates.forEach((function(n){e+=t.compiledTemplate({post_id:n.post_id,title:n.title})})),this.$myTemplateContainer.html(e)},closePopupButton:function(e){e&&e.preventDefault&&e.preventDefault(),this.$mainPopup.toggleClass("vc_ui-hidden"),this.$popupItems.addClass("vc_ui-hidden"),this.$content.removeClass("vc_ui-hidden")},accessLibrary:function(){this.$loadingPage.removeClass("vc_ui-hidden"),this.$content.addClass("vc_ui-hidden"),this.getLibrary()},previewButton:function(t){var n=(t=e(t.currentTarget)).data("preview-url"),i=t.data("title"),a=t.data("template-id");t=t.data("template-version"),this.$previewImage.attr("src",n),this.$previewTitle.text(i),n=_.find(this.myTemplates,{id:a});this.$previewUpdate.toggleClass("vc_ui-hidden",!(n&&n.version<t)),this.$previewDownload.toggleClass("vc_ui-hidden",!!n),this.$previewUpdateBtn.data("template-id",a),this.$previewDownloadBtn.data("template-id",a),this.$popupItems.addClass("vc_ui-hidden"),this.$templatePreview.removeClass("vc_ui-hidden"),this.$templatePreview.attr("data-template-id",a)},backToTemplates:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},deleteTemplate:function(e){"shared_templates"===e.type&&-1!==(e=_.findIndex(this.myTemplates,{post_id:e.id}))&&(this.myTemplates.splice(e,1),this.loaded)&&this.loadLibrary(this.data)},downloadButton:function(e){e&&e.preventDefault&&e.preventDefault(),(e=jQuery(e.currentTarget).closest("[data-template-id]").data("templateId"))&&(this.showDownloadOverlay(),this.downloadTemplate(e))},updateButton:function(e){e&&e.preventDefault&&e.preventDefault(),jQuery(e.currentTarget).closest("[data-template-id]").data("templateId")&&this.showUpdateOverlay()},showDownloadOverlay:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$downloadPage.removeClass("vc_ui-hidden")},hideDownloadOverlay:function(e){e?(this.$errorMessageContainer.html(e),this.$errorMessageContainer.removeClass("vc_ui-hidden")):this.$errorMessageContainer.addClass("vc_ui-hidden"),this.$downloadPage.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},showUpdateOverlay:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$updatePage.removeClass("vc_ui-hidden")},hideUpdateOverlay:function(){this.$updatePage.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},downloadTemplate:function(t){this.checkAjax();var n=!0;this.ajax=e.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_shared_templates_download",id:t,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done((function(e){var i;e&&e.success&&(i=_.find(this.data,{id:t}))&&(n=!1,i.post_id=e.data.post_id,this.myTemplates.unshift(i),this.loadMyTemplates(),this.loadLibrary(this.data),this.showLibrary())})).always((function(e,t){var i="";"success"===t&&!n||(i=e&&e.data&&e.data.message?e.data.message:window.i18nLocale.ui_templates_failed_to_download),this.hideDownloadOverlay(i),this.resetAjax()}))},filterTemplates:function(){var t='.vc_ui-panel-template-item .vc_ui-panel-template-item-name:containsi("'+this.$filter.val()+'")';e(".vc_ui-panel-template-item.vc_ui-visible",this.$gridContainer).removeClass("vc_ui-visible"),e(t,this.$gridContainer).closest(".vc_ui-panel-template-item").addClass("vc_ui-visible")}}),e((function(){window.vcTemplatesLibraryData&&(window.vc.templatesLibrary=new vc.TemplateLibraryView({el:'[data-vc-ui-element="panel-edit-element-tab"][data-tab="shared_templates"]'}),window.vc.templatesLibrary.myTemplates=window.vcTemplatesLibraryData.templates||[],window.vc.templatesLibrary.loadMyTemplates())}))})(window.jQuery),vc.PostSettingsUIPanelFrontendEditor=vc.PostSettingsPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({panelName:"post_settings",previewTab:null,events:function(){return _.extend({'click [data-vc-ui-element="button-update"], [data-vc-ui-element="button-publish"], [data-vc-ui-element="button-submit-review"]':"updatePost",'click [data-vc-ui-element="button-save-draft"]':"saveDraft","click #wpb-settings-preview":"preview"},window.vc.PostSettingsUIPanelFrontendEditor.__super__.events)},setSize:function(){this.trigger("setSize")},setDefaultHeightSettings:function(){this.$el.css("height","75vh")},preview:function(e){this.save();var t=setInterval((function(){var n;vc.storage.isChanged&&(clearInterval(t),(n=vc.builder.getPostData()).action="vc_preview",vc.builder.ajax(n).done((function(t){var n;(t=JSON.parse(t)).success?(n=e.target.getAttribute("data-button-link"))&&(this.previewTab&&!this.previewTab.closed?(this.previewTab.location.reload(),this.previewTab.focus()):this.previewTab=window.open(n,"_blank")):window.vc.showMessage(window.i18nLocale.preview_error+t.data,"error")})).fail((function(){window.vc.showMessage(window.i18nLocale.preview_error,"error")})))}),50)}}),vc.PostSettingsUIPanelBackendEditor=vc.PostSettingsPanelViewBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({events:function(){return _.extend({'click [data-vc-ui-element="button-update"], [data-vc-ui-element="button-publish"]':"updatePost",'click [data-vc-ui-element="button-save-draft"]':"saveDraft","click #wpb-settings-preview":"preview"},window.vc.PostSettingsUIPanelBackendEditor.__super__.events)},setSize:function(){this.trigger("setSize")},setDefaultHeightSettings:function(){this.$el.css("height","75vh")},preview:function(){this.save();var e=setInterval((function(){vc.storage.isChanged&&(clearInterval(e),document.getElementById("post-preview").click(),0!==jQuery('#vc_ui-panel-post-settings [data-change-status="publish"]').length)&&(window.vc.pagesettingseditor={})}),50)}}),vc.CustomCodeUIPanelFrontendEditor=vc.CustomCodePanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({panelName:"custom_code",uiEvents:{setSize:"setEditorSize",show:"setEditorSize"},previewTab:null,events:function(){return _.extend({'click [data-vc-ui-element="panel-tab-control"]':"changeTab"},window.vc.CustomCodeUIPanelFrontendEditor.__super__.events)},setSize:function(){this.trigger("setSize")},setDefaultHeightSettings:function(){this.$el.css("height","75vh")},setEditorSize:function(){window.Vc_postSettingsEditor&&(this.editor_css.setSizeResizable(),this.editor_js_header.setSizeResizable(),this.editor_js_footer.setSizeResizable())}}),vc.CustomCodeUIPanelBackendEditor=vc.CustomCodeViewBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({uiEvents:{setSize:"setEditorSize",show:"setEditorSize"},events:function(){return _.extend({'click [data-vc-ui-element="panel-tab-control"]':"changeTab"},window.vc.CustomCodeUIPanelBackendEditor.__super__.events)},setSize:function(){this.trigger("setSize")},setEditorSize:function(){window.Vc_postSettingsEditor&&(this.editor_css.setSizeResizable(),this.editor_js_header.setSizeResizable(),this.editor_js_footer.setSizeResizable())},setDefaultHeightSettings:function(){this.$el.css("height","75vh")}}),(()=>{var e={'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'touchstart [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity",'click [data-vc-ui-element="button-layout"]':"setLayout",'click [data-vc-ui-element="button-update-layout"]':"updateFromInput"};vc.RowLayoutUIPanelFrontendEditor=vc.RowLayoutEditorPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"rowLayouts",events:e}),vc.RowLayoutUIPanelBackendEditor=vc.RowLayoutEditorPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"rowLayouts",events:e})})(),(e=>{window.vc.PresetSettingsUIPanelFrontendEditor=vc.PanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperAjax).vcExtendUI({panelName:"preset_settings",showMessageDisabled:!1,events:{'click [data-vc-ui-delete="preset-title"]':"removePreset",'click [data-vc-ui-element="button-close"]':"hide",'touchstart [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity","click [data-vc-ui-add-preset]":"createPreset"},initialize:function(e){this.frontEnd=e&&e.frontEnd},createPreset:function(t){var n,i,a,o,s;_.isUndefined(vc.ShortcodesBuilder)||(this.builder=new vc.ShortcodesBuilder),a=(t=e(t.currentTarget)).data("preset"),t=t.data("tag"),o={width:"1/1"},s={shortcode:"vc_row",params:{}},this.frontEnd?(this.builder.create(s),i={shortcode:"vc_column",params:o,parent_id:this.builder.lastID()},this.builder.create(i),n={shortcode:t,parent_id:this.builder.lastID()},a&&(n.preset=a),window.vc.closeActivePanel(),this.builder.create(n),this.model=this.builder.last(),this.builder.render()):(i={shortcode:"vc_column",params:o,parent_id:(o=vc.shortcodes.create(s)).id,root_id:o.id},n={shortcode:t,parent_id:vc.shortcodes.create(i).id,root_id:o.id},a&&(n.preset=a),s=vc.shortcodes.create(n),window.vc.closeActivePanel(),this.model=s),_.isBoolean(vc.getMapped(t).show_settings_on_create)&&!1===vc.getMapped(t).show_settings_on_create||this.showEditForm()},showEditForm:function(){window.vc.edit_element_block_view.render(this.model)},render:function(){return this.$el.css("left",(e(window).width()-this.$el.width())/2),this},removePreset:function(e){e&&e.preventDefault&&e.preventDefault();var t=(n=jQuery(e.currentTarget).closest('[data-vc-ui-delete="preset-title"]')).data("preset"),n=n.data("preset-parent");this.deleteSettings(t,n,e)},deleteSettings:function(t,n){var i=this;return!!confirm(window.i18nLocale.delete_preset_confirmation)&&(this.checkAjax(),this.ajax=e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.deleteSettingsAjaxData(n,t),context:this}).done((function(e){e&&e.success&&(this.showMessage(window.i18nLocale.preset_removed,"success"),i.$el.find('[data-preset="'+t+'"]').closest(".vc_ui-template").remove(),window.vc.events.trigger("vc:deletePreset",t))})).always(this.resetAjax),this.ajax)},deleteSettingsAjaxData:function(e,t){return{action:"vc_action_delete_settings_preset",shortcode_name:e,vc_inline:!0,id:t,_vcnonce:window.vcAdminNonce}},showMessage:function(t,n){var i;if(this.showMessageDisabled)return!1;i="vc_col-xs-12 wpb_element_wrapper",this.message_box_timeout&&(this.$el.find("[data-vc-panel-message]").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var a,o=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>');switch(n){case"error":a=e('<div class="'+i+'" data-vc-panel-message>').html(o({color:"danger",icon:"times",text:t}));break;case"warning":a=e('<div class="'+i+'" data-vc-panel-message>').html(o({color:"warning",icon:"exclamation-triangle",text:t}));break;case"success":a=e('<div class="'+i+'" data-vc-panel-message>').html(o({color:"success",icon:"check",text:t}))}a.prependTo(this.$el.find(".vc_properties-list")),a.fadeIn(),this.message_box_timeout=window.setTimeout((function(){a.remove()}),6e3)}})})(window.jQuery),((e,t)=>{var n,i=[],a=wp.media,o=a.featuredImage.set,s=a.editor.send.attachment,c=i18nLocale,r={};function l(t,n){var o=t.models?t.pluck("id"):t;e.ajax({dataType:"json",type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:o,vc_inline:!0,_vcnonce:window.vcAdminNonce}}).done((function(i){var o,s,c;if("function"==typeof n){for(o=[],c=0;c<i.data.ids.length;c++)s=(s="function"==typeof s?t.get(i.data.ids[c]):t[i.data.ids[c]])||a.model.Attachment.get(i.data.ids[c]),o.push(s);var r=(e=>{for(var t=[],n=0;n<e.length;n++)e[n].get("url")||t.push(e[n].fetch());return t})(o);e.when.apply(e,r).done((function(){n(o)}))}})).fail((function(t){e(".media-modal-close").click(),i=[],window.vc&&window.vc.active_panel&&window.i18nLocale&&window.i18nLocale.error_while_saving_image_filtered&&window.vc.active_panel.showMessage(window.i18nLocale.error_while_saving_image_filtered,"error"),window.console&&window.console.warn&&window.console.warn("processImages failed",t)})).always((function(){e(".media-modal").removeClass("processing-media")}))}function d(t){var n,i,a=e(".media-frame:visible [data-vc-preview-image-filter="+t+"]");a.length&&(n=e(".media-frame:visible .attachment-info .thumbnail-image").eq(-1),i=n.find("img"),n.addClass("loading"),i.data("original-src")||i.data("original-src",i.attr("src")),a.val().length?e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"vc_media_editor_preview_image",filter:a.val(),attachment_id:t,preferred_size:window.getUserSetting("imgsize","medium"),_vcnonce:window.vcAdminNonce}}).done((function(e){e.success&&e.data.src.length&&i.attr("src",e.data.src)})).fail((function(e,t,n){window.console.warn("Filter preview failed:",t,n)})).always((function(){n.removeClass("loading")})):(i.attr("src",i.data("original-src")),n.removeClass("loading")))}n=t.extend(a.view.AttachmentCompat.prototype.render),a.view.AttachmentCompat.prototype.render=function(){var i=this,a=this.model.get("id");return n.call(this),t.defer((function(){var t,n=i.controller.$el.find(".attachment-info"),o=i.controller.$el.find("[data-vc-preview-image-filter]");n.length&&o.length&&(t='<div class="vc-filter-wrapper"><label class="setting vc-image-filter-setting">',t=(t+='<span class="name">'+o.parent().find(".vc-filter-label").text()+"</span>")+o[0].outerHTML+"</label></div>",e(".vc-filter-wrapper").length||n.before(t),o.parents("tr").remove()),void 0!==window.vc_selectedFilters&&void 0!==window.vc_selectedFilters[a]&&(n=e(".media-frame:visible [data-vc-preview-image-filter="+a+"]")).length&&n.val(window.vc_selectedFilters[a]).trigger("change"),d(a)})),this},a.editor.send.attachment=function(e,t){i.push(t.id),l([t.id],(function(t){var n=t.slice(0).pop().attributes;s(e,n).done((function(e){!function e(t,n){i&&i[0]!==n?setTimeout((function(){e(t,n)}),50):(i.shift(),a.editor.insert(t))}(e,n.id)}))}))},a.featuredImage.set=function(t){-1!==t?e.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:[t],_vcnonce:window.vcAdminNonce}}).done((function(e){!0===e.success&&e.data.ids.length?(e=e.data.ids.pop(),o(e)):o(t)})).fail((function(){o(t)})):o(t)},a.controller.VcSingleImage=a.controller.FeaturedImage.extend({defaults:t.defaults({id:"vc_single-image",filterable:"uploaded",multiple:!1,toolbar:"vc_single-image",title:c.set_image,priority:60,syncSelection:!1},a.controller.Library.prototype.defaults),updateSelection:function(){var e,n=this.get("selection"),i=a.vc_editor.getData();void 0!==i&&""!==i&&-1!==i&&(e=t.map(i.toString().split(/,/),(function(e){return(e=a.model.Attachment.get(e)).get("url")&&e.get("url").length||e.fetch(),e}))),n.reset(e)}}),a.controller.VcGallery=a.controller.VcSingleImage.extend({defaults:t.defaults({id:"vc_gallery",title:c.add_images,toolbar:"main-insert",filterable:"uploaded",library:a.query({type:"image"}),multiple:"add",editable:!0,priority:60,syncSelection:!1},a.controller.Library.prototype.defaults)}),a.VcSingleImage={getData:function(){return this.$hidden_ids.val()},set:function(t){var n=vc.template(e("#vc_settings-image-block").html(),vc.templateOptions.custom);return this.$img_ul.html(n(t)),this.$clear_button.show(),this.$hidden_ids.val(t.id).trigger("change"),!1},frame:function(t){return window.vc_selectedFilters={},this.element=t,this.$button=e(this.element),this.$block=this.$button.closest(".edit_form_line"),this.$hidden_ids=this.$block.find(".gallery_widget_attached_images_ids"),this.$img_ul=this.$block.find(".gallery_widget_attached_images_list"),this.$clear_button=this.$img_ul.next(),this._frame||(this._frame=a({state:"vc_single-image",states:[new a.controller.VcSingleImage]}),this._frame.on("toolbar:create:vc_single-image",(function(e){this.createSelectToolbar(e,{text:c.set_image,close:!1})}),this._frame),this._frame.state("vc_single-image").on("select",this.select)),this._frame},select:function(){var e=this.get("selection");vc.events.trigger("click:media_editor:add_image",e,"single")}},a.view.MediaFrame.VcGallery=a.view.MediaFrame.Post.extend({createStates:function(){this.states.add([new a.controller.VcGallery])},bindHandlers:function(){a.view.MediaFrame.Select.prototype.bindHandlers.apply(this,arguments),this.on("toolbar:create:main-insert",this.createToolbar,this),t.each({content:{embed:"embedContent","edit-selection":"editSelectionContent"},toolbar:{"main-insert":"mainInsertToolbar"}},(function(e,n){t.each(e,(function(e,t){this.on(n+":render:"+t,this[e],this)}),this)}),this)},mainInsertToolbar:function(e){var t=this;this.selectionStatusToolbar(e),e.set("insert",{style:"primary",priority:80,text:c.add_images,requires:{selection:!0},click:function(){var e=t.state(),n=e.get("selection");vc.events.trigger("click:media_editor:add_image",n,"gallery"),e.trigger("insert",n)}})}}),a.vc_editor=t.clone(a.editor),t.extend(a.vc_editor,{$vc_editor_element:null,getData:function(){return a.vc_editor.$vc_editor_element.closest(".edit_form_line").find(".gallery_widget_attached_images_ids").val()},insert:function(n){var i=(o=a.vc_editor.$vc_editor_element.closest(".edit_form_line")).find(".gallery_widget_attached_images_ids"),o=o.find(".gallery_widget_attached_images_list"),s="",c=vc.template(e("#vc_settings-image-block").html(),vc.templateOptions.custom);t.each(n,(function(e){s+=c(e)})),i.val(t.map(n,(function(e){return e.id})).join(",")).trigger("change"),o.html(s)},open:function(e){var t;return e=this.id(e),t=(t=this.get(e))||this.add(e),window.vc_selectedFilters={},window.setTimeout((function(){t.state().get("library").more()}),50),t.open()},add:function(e,n){var i=this.get(e);if(!i){if(r[e])return r[e];i=r[e]=new a.view.MediaFrame.VcGallery(t.defaults(n||{},{state:"vc_gallery",title:c.add_images,library:{type:"image"},multiple:!0}))}return i},init:function(){e("body").off("click.vcGalleryWidget").on("click.vcGalleryWidget",".gallery_widget_add_images",(function(t){t.preventDefault(),t=e(this),a.vc_editor.$vc_editor_element=e(this),"true"===t.attr("use-single")?a.VcSingleImage.frame(this).open("vc_editor"):(t.blur(),a.vc_editor.open("wpbakery"))}))}}),t.bindAll(a.vc_editor,"open"),e(document).ready((function(){a.vc_editor.init()})),vc.events.on("click:media_editor:add_image",(function(n,i){e(".media-modal").addClass("processing-media"),l(n,(function(o){var s;o=t.map(o,(function(e){return e.attributes}));switch(n.reset(o),s=t.map(n.models,(function(e){return e.attributes})),i=void 0===i?"":i){case"gallery":a.vc_editor.insert(s);break;case"single":a.VcSingleImage.set(s[0])}e(".media-modal").removeClass("processing-media"),e(".media-modal-close").click()}))})),e("body").on("change","[data-vc-preview-image-filter]",(function(){var t=e(this).data("vcPreviewImageFilter");void 0===window.vc_selectedFilters&&(window.vc_selectedFilters={}),window.vc_selectedFilters[t]=e(this).val(),d(t)}))})(window.jQuery,window._),window._.isUndefined(window.vc)&&(window.vc={}),((e,t,n)=>{window.vc_toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},window.vc_convert_column_size=function(e){var n="vc_col-sm-",i=(e=e?e.split("/"):[1,1],t.range(1,13)),a=!t.isUndefined(e[0])&&0<=t.indexOf(i,parseInt(e[0],10))&&parseInt(e[0],10);i=!t.isUndefined(e[1])&&0<=t.indexOf(i,parseInt(e[1],10))&&parseInt(e[1],10);return!1!==a&&!1!==i?n+12*a/i:n+"12"},window.vc_convert_column_span_size=function(e){return"span12"===(e=e.replace(/^vc_/,""))?"1/1":"span11"===e?"11/12":"span10"===e?"5/6":"span9"===e?"3/4":"span8"===e?"2/3":"span7"===e?"7/12":"span6"===e?"1/2":"span5"===e?"5/12":"span4"===e?"1/3":"span3"===e?"1/4":"span2"===e?"1/6":"span1"===e&&"1/12"},window.vc_get_column_mask=function(e){var n,i,a,o=e.split("_");e=o.length;for(n in a=0,o)!isNaN(parseFloat(o[n]))&&isFinite(o[n])&&(i=o[n].match(/(\d{1,2})(\d{1,2})/),a=t.reduce(i.slice(1),(function(e,t){return e+parseInt(t,10)}),a));return e+""+a},window.VCS4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},window.vc_guid=function(){return window.VCS4()+window.VCS4()+"-"+window.VCS4()},window.vc_button_param_target_callback=function(){var e=this.$content.find("[name=target]").parents('[data-vc-ui-element="panel-shortcode-param"]:first'),i=n(".wpb-edit-form [name=href]"),a=t.debounce((function(){var t=n(this).val();0<t.length&&"http://"!==t&&"https://"!==t?e.show():e.hide()}),300);i.on("keyup",a).trigger("keyup")},window.vc_cta_button_param_target_callback=function(){var e=this.$content.find("[name=target]").parents('[data-vc-ui-element="panel-shortcode-param"]:first'),i=n(".wpb-edit-form [name=href]"),a=t.debounce((function(){var t=n(this).val();0<t.length&&"http://"!==t&&"https://"!==t?e.show():e.hide()}),300);i.on("keyup",a).trigger("keyup")},window.vc_grid_exclude_dependency_callback=function(){var e=n(".wpb_vc_param_value[name=exclude]",this.$content).data("vc-param-object");if(!e)return!1;var t=n('select.wpb_vc_param_value[name="post_type"]',this.$content),i=t.val();e.source_data=function(e){return{query:{query:i,term:e.term}}},e.source_data_val=i,t.on("change",(function(){i=n(this).val(),e.source_data_val!=i&&(e.source_data=function(e){return{query:{query:i,term:e.term}}},e.$el.data("uiAutocomplete").destroy(),e.$sortable_wrapper.find(".vc_data").remove(),e.render(),e.source_data_val=i)}))},window.vcGridFilterExcludeCallBack=function(){var e=n(".wpb_vc_param_value[name=filter_source]",this.$content),t=e.val(),i=n(".wpb_vc_param_value[name=exclude_filter]",this.$content).data("vc-param-object");if(void 0===i)return!1;e.on("change",(function(){var e=n(this);t!==e.val()&&i.clearValue(),i.source_data=function(){return{vc_filter_by:e.val()}}})).trigger("change")},window.vcGridTaxonomiesCallBack=function(){var e=n(".wpb_vc_param_value[name=post_type]",this.$content),t=e.val(),i=n(".wpb_vc_param_value[name=taxonomies]",this.$content).data("vc-param-object");if(void 0===i)return!1;e.on("change",(function(){var a=n(this);t!==a.val()&&i.clearValue(),i.source_data=function(){return{vc_filter_post_type:e.val()}}})).trigger("change")},window.vcChartCustomColorDependency=function(){var e=n(".wpb_vc_param_value[name=style]",this.$content),t=this.$content;e.on("change",(function(){var e=n(this).val();t.toggleClass("vc_chart-edit-form-custom-color","custom"===e)})),e.trigger("change")},window.vc_wpnop=function(e){var t,n,i,a,o;return e=void 0!==e?e+"":"",window.switchEditors&&void 0!==window.switchEditors.pre_wpautop?(e=window.switchEditors.pre_wpautop(e)).replace(/<p>(<!--(?:.*)-->)<\/p>/g,"$1"):e?(t=(n="blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure")+"|div|p",n+="|pre",a=i=!1,o=[],-1!==(e=-1===e.indexOf("<script")&&-1===e.indexOf("<style")?e:e.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,(function(e){return o.push(e),"<wp-preserve>"}))).indexOf("<pre")&&(i=!0,e=e.replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,(function(e){return(e=(e=e.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/\r?\n/g,"<wp-line-break>")}))),-1!==e.indexOf("[caption")&&(a=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,(function(e){return e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")}))),e=(e=(e=(e=(e=-1!==(e=-1!==(e=-1!==(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(new RegExp("\\s*</("+t+")>\\s*","g"),"</$1>\n")).replace(new RegExp("\\s*<((?:"+t+")(?: [^>]*)?)>","g"),"\n<$1>")).replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>")).replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n")).replace(/\s*<p>/gi,"")).replace(/\s*<\/p>\s*/gi,"\n\n")).replace(/\n[\s\u00a0]+\n/g,"\n\n")).replace(/(\s*)<br ?\/?>\s*/gi,(function(e,t){return t&&-1!==t.indexOf("\n")?"\n\n":"\n"}))).replace(/\s*<div/g,"\n<div")).replace(/<\/div>\s*/g,"</div>\n")).replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n")).replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption")).replace(new RegExp("\\s*<((?:"+n+")(?: [^>]*)?)\\s*>","g"),"\n<$1>")).replace(new RegExp("\\s*</("+n+")>\\s*","g"),"</$1>\n")).replace(/<((li|dt|dd)[^>]*)>/g," \t<$1>")).indexOf("<option")?(e=e.replace(/\s*<option/g,"\n<option")).replace(/\s*<\/select>/g,"\n</select>"):e).indexOf("<hr")?e.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n"):e).indexOf("<object")?e.replace(/<object[\s\S]+?<\/object>/g,(function(e){return e.replace(/[\r\n]+/g,"")})):e).replace(/<\/p#>/g,"</p>\n")).replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1")).replace(/^\s+/,"")).replace(/[\s\u00a0]+$/,""),i&&(e=e.replace(/<wp-line-break>/g,"\n")),a&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),o.length?e.replace(/<wp-preserve>/g,(function(){return o.shift()})):e):""},window.vc_wpautop=function(e){var t,n,i;return e=void 0!==e?e+"":"",(e=window.switchEditors&&void 0!==window.switchEditors.wpautop?window.switchEditors.wpautop(e):(n=t=!1,i="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary",-1===(e=(e=-1!==(e=e.replace(/\r\n|\r/g,"\n")).indexOf("<object")?e.replace(/<object[\s\S]+?<\/object>/g,(function(e){return e.replace(/\n+/g,"")})):e).replace(/<[^<>]+>/g,(function(e){return e.replace(/[\n\t ]+/g," ")}))).indexOf("<pre")&&-1===e.indexOf("<script")||(t=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]*?<\/\1>/g,(function(e){return e.replace(/\n/g,"<wp-line-break>")}))),-1!==(e=-1!==e.indexOf("<figcaption")?(e=e.replace(/\s*(<figcaption[^>]*>)/g,"$1")).replace(/<\/figcaption>\s*/g,"</figcaption>"):e).indexOf("[caption")&&(n=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,(function(e){return(e=(e=e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>")).replace(/<[^<>]+>/g,(function(e){return e.replace(/[\n\t ]+/," ")}))).replace(/\s*\n\s*/g,"<wp-temp-br />")}))),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e+="\n\n").replace(/<br \/>\s*<br \/>/gi,"\n\n")).replace(new RegExp("(<(?:"+i+")(?: [^>]*)?>)","gi"),"\n\n$1")).replace(new RegExp("(</(?:"+i+")>)","gi"),"$1\n\n")).replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n")).replace(/\s*<option/gi,"<option")).replace(/<\/option>\s*/gi,"</option>")).replace(/\n\s*\n+/g,"\n\n")).replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n")).replace(/<p>\s*?<\/p>/gi,"")).replace(new RegExp("<p>\\s*(</?(?:"+i+")(?: [^>]*)?>)\\s*</p>","gi"),"$1")).replace(/<p>(<li.+?)<\/p>/gi,"$1")).replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>")).replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>")).replace(new RegExp("<p>\\s*(</?(?:"+i+")(?: [^>]*)?>)","gi"),"$1")).replace(new RegExp("(</?(?:"+i+")(?: [^>]*)?>)\\s*</p>","gi"),"$1")).replace(/(<br[^>]*>)\s*\n/gi,"$1")).replace(/\s*\n/g,"<br />\n")).replace(new RegExp("(</?(?:"+i+")[^>]*>)\\s*<br />","gi"),"$1")).replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1")).replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]")).replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,(function(e,t,n){return n.match(/<p( [^>]*)?>/)?e:t+"<p>"+n+"</p>"})),t&&(e=e.replace(/<wp-line-break>/g,"\n")),n?e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>"):e)).replace(/<p>(<!--(?:.*)-->)<\/p>/g,"$1")},window.vc_regexp_shortcode=t.memoize((function(){return RegExp("\\[(\\[?)([\\w|-]+\\b)(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")})),window.vcAddShortcodeDefaultParams=function(n){var i=n.get("params"),a=n.get("preset");i=t.extend({},e.getDefaults(n.get("shortcode")),i);a&&window.vc_all_presets[a]&&(i=window.vc_all_presets[a],void 0!==e.frame_window)&&window.vc_all_presets[a].css&&e.frame_window.vc_iframe.setCustomShortcodeCss(window.vc_all_presets[a].css),n.set({params:i},{silent:!0})},window.vc_globalHashCode=function(e){return(e="string"!=typeof e?JSON.stringify(e):e).length?e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0):0},e.memoizeWrapper=function(e,n){var i={};return function(){var a=n?n.apply(this,arguments):arguments[0];return t.hasOwnProperty.call(i,a)||(i[a]=e.apply(this,arguments)),t.isObject(i[a])?window.jQuery.fn.extend(!0,{},i[a]):i[a]}},window.vcChartParamAfterAddCallback=function(e,t){if("new"!==t&&"clone"!==t||e.find(".vc_control.column_toggle").click(),"new"===t){for(var n,i=["white","black"],a=e.find("[name=values_color]"),o=a.find("option"),s=0;!(100<s++);)if(n=Math.floor(Math.random()*o.length),-1===window.jQuery.inArray(o.eq(n).val(),i)){o.eq(n).prop("selected",!0),a.trigger("change");break}t=["#5472d2","#00c1cf","#fe6c61","#8d6dc4","#4cadc9","#cec2ab","#50485b","#75d69c","#f7be68","#5aa1e3","#6dab3c","#f4524d","#f79468","#b97ebb","#ebebeb","#f7f7f7","#0088cc","#58b9da","#6ab165","#ff9900","#ff675b","#555555"],n=Math.floor(Math.random()*t.length),e.find("[name=values_custom_color]").val(t[n]).trigger("change")}},e.events.on("shortcodes:vc_row:add:param:name:parallax shortcodes:vc_row:update:param:name:parallax",(function(e,t){t&&(t=e.get("params"))&&t.css&&(t.css=t.css.replace(/(background(\-position)?\s*\:\s*[\S]+(\s*[^\!\s]+)?)[\s*\!important]*/g,"$1"),e.set("params",t,{silent:!0}))})),e.events.on("shortcodes:vc_single_image:sync shortcodes:vc_single_image:add",(function(e){var t=e.get("params");t.link&&!t.onclick&&(t.onclick="custom_link",e.save({params:t}))})),window.vcEscapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return null==e?"":e.replace(/[&<>"']/g,(function(e){return t[e]}))},window.vc_slugify=function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}})(window.vc,window._,window.jQuery),window.jQuery.expr.pseudos.containsi=function(e,t,n){return 0<=window.jQuery(e).text().toUpperCase().indexOf(n[3].toUpperCase())},_.isUndefined(window.vc)&&(window.vc={}),window.vc.filters={templates:[]},window.vc.addTemplateFilter=function(e){_.isFunction(e)&&this.filters.templates.push(e)},(e=>{function t(e){return encodeURIComponent(e).replace(/[!'()*]/g,escape)}function n(t,n){this.el=t,this.$el=e(this.el),this.$el_wrap="",this.$block="",this.suggester="",this.selected_items=[],this.options=_.isObject(n)?n:{},_.defaults(this.options,{css_class:"vc_suggester",limit:!1,source:{},predefined:[],locked:!1,select_callback:function(){},remove_callback:function(){},update_callback:function(){},check_locked_callback:function(){return!1}}),this.init()}window.init_textarea_html=function(t){var n,i,a,o=e("#wp-link");o.parent().hasClass("wp-dialog")&&o.wpdialog("destroy"),n=t.attr("id"),i=(o=t.closest(".edit_form_line")).find(".vc_textarea_html_content");try{_.isUndefined(tinyMCEPreInit.qtInit[n])&&(window.tinyMCEPreInit.qtInit[n]=_.extend({},window.tinyMCEPreInit.qtInit[window.wpActiveEditor],{id:n})),window.tinyMCEPreInit&&window.tinyMCEPreInit.mceInit[window.wpActiveEditor]&&(a=!1,window.tinyMCEPreInit.mceInit[n]=_.extend({},window.tinyMCEPreInit.mceInit[window.wpActiveEditor],{resize:"vertical",height:200,id:n,setup:function(t){var i;void 0!==t.onLoadContent&&t.onLoadContent.add((function(){var t=setTimeout((function(){1===e("#"+n).size()&&(e(".vc_edit-form-tab *:input[type!=hidden]:first").focus(),clearTimeout(t))}),100)})),void 0!==t.on?(t.on("init",(function(){window.wpActiveEditor=n})),window.vc_auto_save&&(i=_.debounce((function(){vc.edit_element_block_view.save(),a=!1}),500),t.on("keyup",(function(){a=!0,vc.saveInProcess=!0,i()})),t.on("blur",(function(){a&&!vc.saveInProcess&&(vc.saveInProcess=!0,vc.edit_element_block_view.save(),a=!1)})),t.on("ExecCommand",i),e("#wpb_tinymce_content").on("change",(function(){a=!0,vc.saveInProcess=!0,i()})))):t.onInit.add((function(){window.wpActiveEditor=n}))}}),window.tinyMCEPreInit.mceInit[n].plugins=window.tinyMCEPreInit.mceInit[n].plugins.replace(/,?wpfullscreen/,""),window.tinyMCEPreInit.mceInit[n].wp_autoresize_on=!1),vc.edit_element_block_view&&vc.edit_element_block_view.currentModelParams?t.val(vc_wpautop(vc.edit_element_block_view.currentModelParams[i.attr("name")]||"")):t.val(i.val()),quicktags(window.tinyMCEPreInit.qtInit[n]),QTags._buttonsInit(),window.tinymce&&(window.switchEditors&&window.switchEditors.go(n,"tmce"),"4"===tinymce.majorVersion)&&tinymce.execCommand("mceAddEditor",!0,n),window.wpActiveEditor=n}catch(i){t.data("vcTinyMceDisabled",!0).appendTo(o),e("#wp-"+n+"-wrap").remove(),console&&console.error&&(console.error("VC: Tinymce error! Compatibility problem with other plugins."),console.error(i))}},Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;0<=t;t--)e="0"+e;return"#"+e},vc.loop_partial=function(t,n,i,a){return i=_.isObject(i)&&!_.isUndefined(i[n])?i[n]:"",vc.template(e("#_vcl-"+t).html(),vc.templateOptions.custom)({name:n,data:i,settings:a})},vc.loop_field_not_hidden=function(e,t){return!(_.isObject(t[e])&&_.isBoolean(t[e].hidden)&&!0===t[e].hidden)},vc.is_locked=function(e){return _.isObject(e)&&_.isBoolean(e.locked)&&!0===e.locked},n.prototype={constructor:n,init:function(){_.bindAll(this,"buildSource","itemSelected","labelClick","setFocus","resize"),this.$el.wrap('<ul class="'+this.options.css_class+'"><li class="input"/></ul>'),this.$el_wrap=this.$el.parent(),this.$block=this.$el_wrap.closest("ul").append(e('<li class="clear"/>')),this.$el.on("focus",this.resize).on("blur",(function(){e(this).parent().width(170),e(this).val("")})),this.$block.on("click",this.setFocus),this.suggester=this.$el.data("suggest"),this.$el.autocomplete({source:this.buildSource,select:this.itemSelected,minLength:2,focus:function(){return!1}}).data("ui-autocomplete")._renderItem=function(t,n){return e('<li data-value="'+n.value+'">').append("<a>"+n.name+"</a>").appendTo(t)},this.$el.autocomplete("widget").addClass("vc_ui-front"),_.isArray(this.options.predefined)&&_.each(this.options.predefined,(function(e){this.create(e)}),this)},resize:function(){var e=this.$el_wrap.position(),t=this.$block.position();this.$el_wrap.width(parseFloat(this.$block.width())-(parseFloat(e.left)-parseFloat(t.left)+4))},setFocus:function(t){t.preventDefault(),e(t.target).hasClass(this.options.css_class)&&this.$el.trigger("focus")},itemSelected:function(e,t){return this.$el.blur(),this.create(t.item),this.$el.trigger("focus"),!1},create:function(t){var n,i=this.selected_items.push(t)-1,a=!0===this.options.check_locked_callback(this.$el,t)?"":' <a class="remove">&times;</a>';_.isUndefined(this.selected_items[i].action)&&(this.selected_items[i].action="+"),n="-"===this.selected_items[i].action?" exclude":" include",(n=e('<li class="vc_suggest-label'+n+'" data-index="'+i+'" data-value="'+t.value+'"><span class="label">'+t.name+"</span>"+a+"</li>")).insertBefore(this.$el_wrap),_.isEmpty(a)||n.on("click",this.labelClick),this.options.select_callback(n,this.selected_items)},labelClick:function(t){t.preventDefault();var n=e(t.currentTarget),i=parseInt(n.data("index"),10);if(e(t.target).is(".remove"))return this.selected_items.splice(i,1),this.options.remove_callback(n,this.selected_items),n.remove(),!1;this.selected_items[i].action="+"===this.selected_items[i].action?"-":"+","+"===this.selected_items[i].action?n.removeClass("exclude").addClass("include"):n.removeClass("include").addClass("exclude"),this.options.update_callback(n,this.selected_items)},buildSource:function(t,n){this.ajax&&(this.ajax.abort(),n([]),this.ajax=!1);var i=_.filter(_.map(this.selected_items,(function(e){return e?e.value:void 0}))).join(",");this.ajax=e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"wpb_get_loop_suggestion",field:this.suggester,exclude:i,query:t.term,_vcnonce:window.vcAdminNonce}}).done((function(e){n(e)}))}},e.fn.suggester=function(t){return this.each((function(){var i=e(this),a=i.data("suggester");a||i.data("suggester",a=new n(this,t)),"string"==typeof t&&a[t]()}))};var i=Backbone.View.extend({className:"loop_params_holder",events:{"click input, select":"save","change input, select":"save","change :checkbox[data-input]":"updateCheckbox"},query_options:{},return_array:{},controller:"",initialize:function(){_.bindAll(this,"save","updateSuggestion","suggestionLocked")},render:function(t){var n=vc.template(e("#vcl-loop-frame").html(),_.extend({},vc.templateOptions.custom,{variable:"loop"}));return this.controller=t,this.$el.html(n(this.model)),this.controller.$el.append(this.$el),_.each(e("[data-suggest]"),(function(t){t=e(t);var n=window.decodeURIComponent(e("[data-suggest-prefill="+t.data("suggest")+"]").val());t.suggester({predefined:e.parseJSON(n),select_callback:this.updateSuggestion,update_callback:this.updateSuggestion,remove_callback:this.updateSuggestion,check_locked_callback:this.suggestionLocked})}),this),this.save(),this},show:function(){this.$el.slideDown()},save:function(){this.return_array={},_.each(this.model,(function(e,t){e=this.getValue(t,e),_.isString(e)&&!_.isEmpty(e)&&(this.return_array[t]=e)}),this),this.controller.setInputValue(this.return_array)},getValue:function(t){return e("[name="+t+"]",this.$el).val()},hide:function(){this.$el.slideUp()},toggle:function(){this.$el.is(":animated")||this.$el.slideToggle()},updateCheckbox:function(t){t=e(t.currentTarget).data("input");var n=e("[data-name="+t+"]",this.$el),i=[];e("[data-input="+t+"]:checked").each((function(){i.push(e(this).val())})),n.val(i),this.save()},updateSuggestion:function(e,t){e=e.closest("[data-block=suggestion]"),t=_.reduce(t,(function(e,t){return _.isEmpty(t)?"":e+(_.isEmpty(e)?"":",")+("-"===t.action?"-":"")+t.value}),"").trim(),e.find("[data-suggest-value]").val(t).trigger("change")},suggestionLocked:function(e,t){return t=t.value,e=e.closest("[data-block=suggestion]").find("[data-suggest-value]").data("suggest-value"),this.controller.settings&&this.controller.settings[e]&&_.isBoolean(this.controller.settings[e].locked)&&1==this.controller.settings[e].locked&&_.isString(this.controller.settings[e].value)&&0<=_.indexOf(this.controller.settings[e].value.replace("-","").split(/\,/),""+t)}}),a=Backbone.View.extend({events:{"click .vc_loop-build":"showEditor"},initialize:function(){_.bindAll(this,"createEditor"),this.$input=e(".wpb_vc_param_value",this.$el),this.$button=this.$el.find(".vc_loop-build"),this.data=this.$input.val(),this.settings=e.parseJSON(window.decodeURIComponent(this.$button.data("settings")))},render:function(){return this},showEditor:function(t){if(t.preventDefault(),_.isObject(this.loop_editor_view))return this.loop_editor_view.toggle(),!1;e.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"wpb_get_loop_settings",value:this.data,settings:this.settings,post_id:vc_post_id,_vcnonce:window.vcAdminNonce}}).done(this.createEditor)},createEditor:function(e){this.loop_editor_view=new i({model:_.isEmpty(e)?{}:e}),this.loop_editor_view.render(this).show()},setInputValue:function(e){this.$input.val(_.map(e,(function(e,t){return t+":"+e})).join("|"))}}),o=Backbone.View.extend({events:{"click .vc_options-edit":"showEditor","click .vc_close-button":"showEditor","click input, select":"save","change input, select":"save","keyup input":"save"},data:{},fields:{},initialize:function(){this.$button=this.$el.find(".vc_options-edit"),this.$form=this.$el.find(".vc_options-fields"),this.$input=this.$el.find(".wpb_vc_param_value"),this.settings=this.$form.data("settings"),this.parseData(),this.render()},render:function(){var t="";return _.each(this.settings,(function(n){_.isUndefined(this.data[n.name])?_.isUndefined(n.value)||(n.value=n.value.toString().split(","),this.data[n.name]=n.value):n.value=this.data[n.name],this.fields[n.name]=n;var i=e("#vcl-options-field-"+n.type);i.is("script")&&(i=vc.template(i.html(),vc.templateOptions.custom),t+=i(_.extend({},{name:"",label:"",value:[],options:"",description:""},n)))}),this),this.$form.html(t+this.$form.html()),this},parseData:function(){_.each(this.$input.val().split("|"),(function(e){var t;e.match(/\:/)&&(t=(e=e.split(":"))[0],this.data[t]=_.map(e[1].split(","),(function(e){return window.decodeURIComponent(e)})))}),this)},saveData:function(){var e=_.map(this.data,(function(e,t){return t+":"+_.map(e,(function(e){return window.encodeURIComponent(e)})).join(",")})).join("|");this.$input.val(e)},showEditor:function(){this.$form.slideToggle()},save:function(t){var n;(t=e(t.currentTarget)).is(":checkbox")?(n=[],this.$el.find("input[name="+t.attr("name")+"]").each((function(){this.checked&&n.push(e(this).val())})),this.data[t.attr("name")]=n):this.data[t.attr("name")]=[t.val()],this.saveData()}});function s(t){this.el=t,this.$el=e(this.el),this.$data_field=this.$el.find(".wpb_vc_param_value"),this.$toolbar=this.$el.find(".vc_sorted-list-toolbar"),this.$current_control=this.$el.find(".vc_sorted-list-container"),_.defaults(this.options,{}),this.init()}s.prototype={constructor:s,init:function(){function e(e){return window.decodeURIComponent(e)}_.bindAll(this,"controlEvent","save"),this.$toolbar.on("change","input",this.controlEvent);var t,n=this.$data_field.val().split(",");for(t in n){var i=n[t].split("|"),a=!(!i.length||!i[0].length)&&this.$toolbar.find("[data-element="+decodeURIComponent(i[0])+"]");!1!==a&&a.is("input")&&(a.prop("checked",!0),this.createControl({value:a.val(),label:a.parent().text(),sub:a.data("subcontrol"),sub_value:_.map(i.slice(1),e)}))}this.$current_control.sortable({stop:this.save}).on("change","select",this.save)},createControl:function(e){var t="",n=_.isUndefined(e.sub_value)?[]:e.sub_value;_.isArray(e.sub)&&_.each(e.sub,(function(e,i){t+=" <select>",_.each(e,(function(e){t+='<option value="'+e[0]+'"'+(_.isString(n[i])&&n[i]===e[0]?' selected="true"':"")+">"+e[1]+"</option>"})),t+="</select>"}),this),this.$current_control.append('<li class="vc_control-'+e.value+'" data-name="'+e.value+'">'+e.label+t+"</li>")},controlEvent:function(t){(t=e(t.currentTarget))[0].checked?this.createControl({value:t.val(),label:t.parent().text(),sub:t.data("subcontrol")}):this.$current_control.find(".vc_control-"+t.val()).remove(),this.save()},save:function(){var t=_.map(this.$current_control.find("[data-name]"),(function(t){var n=encodeURIComponent(e(t).data("name"));return e(t).find("select").each((function(){var t=e(this);t.is("select")&&""!==t.val()&&(n+="|"+encodeURIComponent(t.val()))})),n})).join(",");this.$data_field.val(t)}},e.fn.VcSortedList=function(t){return this.each((function(){var n=e(this),i=n.data("vc_sorted_list");i||n.data("vc_sorted_list",i=new s(this)),"string"==typeof t&&i[t]()}))};var c=Backbone.View.extend({preview_el:".vc_google_fonts_form_field-preview-container > span",font_family_dropdown_el:".vc_google_fonts_form_field-font_family-container > select",font_style_dropdown_el:".vc_google_fonts_form_field-font_style-container > select",font_style_dropdown_el_container:".vc_google_fonts_form_field-font_style-container",status_el:".vc_google_fonts_form_field-status-container > span",events:{"change .vc_google_fonts_form_field-font_family-container > select":"fontFamilyDropdownChange","change .vc_google_fonts_form_field-font_style-container > select":"fontStyleDropdownChange"},initialize:function(){_.bindAll(this,"previewElementInactive","previewElementActive","previewElementLoading"),this.$preview_el=e(this.preview_el,this.$el),this.$font_family_dropdown_el=e(this.font_family_dropdown_el,this.$el),this.$font_style_dropdown_el=e(this.font_style_dropdown_el,this.$el),this.$font_style_dropdown_el_container=e(this.font_style_dropdown_el_container,this.$el),this.$status_el=e(this.status_el,this.$el),this.fontFamilyDropdownRender()},render:function(){return this},previewElementRender:function(){return this.$preview_el.css({"font-family":this.font_family,"font-style":this.font_style,"font-weight":this.font_weight}),this},previewElementInactive:function(){this.$status_el.text(window.i18nLocale.gfonts_loading_google_font_failed||"Loading font failed.").css("color","#FF0000")},previewElementActive:function(){this.$preview_el.text("Grumpy wizards make toxic brew for the evil Queen and Jack.").css("color","inherit"),this.fontStyleDropdownRender()},previewElementLoading:function(){this.$preview_el.text(window.i18nLocale.gfonts_loading_google_font||"Loading Font...")},fontFamilyDropdownRender:function(){return this.fontFamilyDropdownChange(),this},fontFamilyDropdownChange:function(){this.$status_el.text("");var e=this.$font_family_dropdown_el.find(":selected");return this.font_family_format=e.val(),this.font_family=e.attr("data[font_family]"),this.font_types=e.attr("data[font_types]"),this.font_vendor=e.attr("data[font_vendor]"),this.font_url=e.attr("data[font_url]"),this.$font_style_dropdown_el_container.parent().hide(),this.font_family_format&&0<this.font_family_format.length&&(this.font_vendor?WebFont.load({custom:{families:[this.font_family],urls:[this.font_url]},inactive:this.previewElementInactive,active:this.previewElementActive,loading:this.previewElementLoading}):WebFont.load({google:{families:[this.font_family_format]},inactive:this.previewElementInactive,active:this.previewElementActive,loading:this.previewElementLoading})),this},fontStyleDropdownRender:function(){var e,t=this.font_types.split(","),n="",i=this.$font_family_dropdown_el.attr("default[font_style]");for(e in t){var a=t[e].split(":"),o="";n=n+"<option "+(o=_.isString(i)&&0<i.length&&t[e]==i?"selected":o)+' value="'+t[e]+'" data[font_weight]="'+a[1]+'" data[font_style]="'+a[2]+'" class="'+a[2]+"_"+a[1]+'" >'+a[0]+"</option>"}return this.$font_style_dropdown_el.html(n),this.$font_style_dropdown_el_container.parent().show(),this.fontStyleDropdownChange(),this},fontStyleDropdownChange:function(){var e=this.$font_style_dropdown_el.find(":selected");return this.font_weight=e.attr("data[font_weight]"),this.font_style=e.attr("data[font_style]"),this.previewElementRender(),this}}),r=Backbone.View.extend({min_length:2,delay:500,auto_focus:!0,ajax_url:window.ajaxurl,source_data:function(){return{}},replace_values_on_select:!1,initialize:function(t){_.bindAll(this,"sortableChange","resize","labelRemoveHook","updateItems","sortableCreate","sortableUpdate","source","select","labelRemoveClick","createBox","focus","response","change","close","open","create","search","_renderItem","_renderMenu","_renderItemData","_resizeMenu"),t=e.extend({min_length:this.min_length,delay:this.delay,auto_focus:this.auto_focus,replace_values_on_select:this.replace_values_on_select},t),this.options=t,this.param_name=this.options.param_name,this.$el=this.options.$el,this.$el_wrap=this.$el.parent(),this.$sortable_wrapper=this.$el_wrap.parent(),this.$input_param=this.options.$param_input,this.selected_items=[],this.isMultiple=!1,this.render()},resize:function(){var e=this.$el_wrap.position(),t=this.$block.position();this.$el.autocomplete("widget").width(parseFloat(this.$block.width())-(parseFloat(e.left)-parseFloat(t.left)+4)+11)},enableMultiple:function(){this.isMultiple=!0,this.$el.show(),this.$el.trigger("focus")},enableSortable:function(){this.sortable=this.$sortable_wrapper.sortable({items:".vc_data",axis:"y",change:this.sortableChange,create:this.sortableCreate,update:this.sortableUpdate})},updateItems:function(){this.selected_items.length?this.$input_param.val(this.getSelectedItems().join(", ")):this.$input_param.val("")},sortableChange:function(){},itemsCreate:function(){var e=[];this.$block.find(".vc_data").each((function(t,n){e.push({label:n.dataset.label,value:n.dataset.value})})),this.selected_items=e},sortableCreate:function(){},sortableUpdate:function(){var t=this.$sortable_wrapper.sortable("toArray",{attribute:"data-index"}),n=[],i=(_.each(t,(function(e){n.push(this.selected_items[e])}),this),0);e("li.vc_data",this.$sortable_wrapper).each((function(){e(this).attr("data-index",i++)})),this.selected_items=n,this.updateItems()},getWidget:function(){return this.$el.autocomplete("widget")},render:function(){var t;return this.$el.on("focus",this.resize),this.data=this.$el.autocomplete({source:this.source,minLength:this.options.min_length,delay:this.options.delay,autoFocus:this.options.auto_focus,select:this.select,focus:this.focus,response:this.response,change:this.change,close:this.close,open:this.open,create:this.create,search:this.search}),this.data.data("ui-autocomplete")._renderItem=this._renderItem,this.data.data("ui-autocomplete")._renderMenu=this._renderMenu,this.data.data("ui-autocomplete")._resizeMenu=this._resizeMenu,0<this.$input_param.val().length&&(this.isMultiple?this.$el.trigger("focus"):this.$el.hide(),e(".vc_autocomplete-label.vc_data",(t=this).$sortable_wrapper).each((function(){t.labelRemoveHook(e(this))}))),this.getWidget().addClass("vc_ui-front").addClass("vc_ui-auotocomplete"),this.$block=this.$el_wrap.closest("ul").append(e('<li class="clear"/>')),this.itemsCreate(),this},close:function(){this.selected&&this.options.no_hide&&(this.getWidget().show(),this.selected++,2<this.selected)&&(this.selected=void 0)},open:function(){var e=this.getWidget().menu(),t=e.position();e.css("left",t.left-6),e.css("top",t.top+2)},focus:function(e){if(!this.options.replace_values_on_select)return e.preventDefault(),!1},create:function(){},change:function(){},response:function(){},search:function(){},select:function(t,n){var i,a,o;return this.selected=1,n.item&&(this.options.unique_values&&(i=this.getWidget().data("uiMenu").active,this.options.groups&&(a=i.prev(),o=i.next(),a.hasClass("vc_autocomplete-group"))&&!o.hasClass("vc_autocomplete-item")&&a.remove(),i.remove(),e("li.ui-menu-item",this.getWidget()).length||(this.selected=void 0)),this.createBox(n.item),this.isMultiple?this.$el.trigger("focus"):this.$el.hide()),!1},createBox:function(t){var n=this.selected_items.push(t)-1;this.updateItems(),(n=e('<li class="vc_autocomplete-label vc_data" data-index="'+n+'" data-value="'+t.value+'" data-label="'+t.label+'"><span class="vc_autocomplete-label"><a>'+t.label+'</a></span><a class="vc_autocomplete-remove">&times;</a></li>')).insertBefore(this.$el_wrap),this.labelRemoveHook(n)},labelRemoveHook:function(e){this.$el.blur(),this.$el.val(""),e.on("click",this.labelRemoveClick)},labelRemoveClick:function(t){t.preventDefault();var n=e(t.currentTarget);if(e(t.target).is(".vc_autocomplete-remove"))return this.selected_items.splice(n.index(),1),n.remove(),this.updateItems(),this.$el.show(),!1},getSelectedItems:function(){var e;return!!this.selected_items.length&&(e=[],_.each(this.selected_items,(function(t){e.push(t.value)})),e)},_renderMenu:function(t,n){var i=this,a=null;this.options.groups&&n.sort((function(e,t){return e.group>t.group})),e.each(n,(function(e,n){i.options.groups&&n.group!=a&&(a=n.group,t.append('<li class="ui-autocomplete-group vc_autocomplete-group" aria-label="'+a+'">'+a+"</li>")),i._renderItemData(t,n)}))},_renderItem:function(t,n){return e('<li data-value="'+n.value+'" class="vc_autocomplete-item">').append("<a>"+n.label+"</a>").appendTo(t)},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_resizeMenu:function(){},clearValue:function(){this.selected_items=[],this.updateItems(),e(".vc_autocomplete-label.vc_data",this.$sortable_wrapper).remove()},source:function(t,n){var i=this;this.options.values&&0<this.options.values.length?this.options.unique_values?n(e.ui.autocomplete.filter(_.difference(this.options.values,this.selected_items),t.term)):n(e.ui.autocomplete.filter(this.options.values,t.term)):e.ajax({type:"POST",dataType:"json",url:this.ajax_url,data:e.extend({action:"vc_get_autocomplete_suggestion",shortcode:vc.active_panel.model.get("shortcode"),param:this.param_name,query:t.term,_vcnonce:window.vcAdminNonce},this.source_data(t,n))}).done((function(e){i.options.unique_values?n(_.filter(e,(function(e){return!_.findWhere(i.selected_items,e)}))):n(e)}))}}),l=Backbone.View.extend({$content:{},initialize:function(){_.bindAll(this,"content"),this.$content=this.$el,this.model=vc.active_panel.model},setContent:function(e){this.$content=e},content:function(){return this.$content},render:function(){var t=this;return e('[data-vc-ui-element="panel-shortcode-param"]',this.content()).each((function(){var n=e(this),i=n.data("param_settings");vc.atts.init.call(t,i,n),n.data("vcInitParam",!0)})),this}}),d=Backbone.View.extend({options:{max_items:0,sortable:!0,deletable:!0,collapsible:!0},items:0,$ul:!1,initializer:{},mappedParams:{},adminLabelParams:[],groupParamName:"",events:{"click > .edit_form_line > .vc_param_group-list > .vc_param_group-add_content":"addNew"},initialize:function(t){var n,i,a;this.$ul=this.$el.find("> .edit_form_line > .vc_param_group-list"),n=e("> .wpb_vc_row",this.$ul),this.initializer=new l({el:this.$el}),this.model=vc.active_panel.model,i=this.$ul.data("settings"),this.mappedParams={},this.adminLabelParams=[],this.options=_.defaults({},_.isObject(t.settings)?t.settings:{},i,this.options),this.groupParamName=this.options.param.param_name,_.isObject(this.options.param)&&_.isArray(this.options.param.params)&&_.each(this.options.param.params,(function(e){var t=this.groupParamName+"_"+e.param_name;this.mappedParams[t]=e,_.isObject(e)&&!0===e.admin_label&&this.adminLabelParams.push(t)}),this),this.items=0,a=this,n.length&&n.each((function(){n.data("vc-param-group-param",new h({el:e(this),parent:a})),a.items++,a.afterAdd(e(this),"init")})),this.options.sortable&&this.$ul.sortable({handle:".vc_control.column_move",items:"> .wpb_vc_row:not(vc_param_group-add_content-wrapper)",placeholder:"vc_placeholder",stop:function(){e(this).closest(".vc_edit-form-tab").trigger("change")}})},addNew:function(t){var n;t.preventDefault(),this.addAllowed()&&(void 0===this.options.param.callbacks||void 0===this.options.param.callbacks.before_add||"function"!=typeof(n=window[this.options.param.callbacks.before_add])||n())&&((n=e(JSON.parse(this.$ul.next(".vc_param_group-template").html()))).removeClass("vc_param_group-add_content-wrapper"),n.insertBefore(t.currentTarget),n.show(),this.initializer.setContent(n.find("> .wpb_element_wrapper")),this.initializer.render(),this.items++,n.data("vc-param-group-param",new h({el:n,parent:this})),this.afterAdd(n,"new"),vc.events.trigger("vc-param-group-add-new",t,n,this))},addAllowed:function(){return 0<this.options.max_items&&this.items+1<=this.options.max_items||this.options.max_items<=0},afterAdd:function(e,t){var n;this.addAllowed()||(this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone").hide(),this.$ul.find("> .vc_param_group-add_content").hide()),this.options.sortable||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_control.column_move").hide(),this.options.deletable||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_delete").hide(),this.options.collapsible||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_toggle").hide(),void 0!==this.options.param.callbacks&&void 0!==this.options.param.callbacks.after_add&&"function"==typeof(n=window[this.options.param.callbacks.after_add])&&n(e,t)},afterDelete:function(){var e;this.addAllowed()&&(this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone").show(),this.$ul.find("> .vc_param_group-add_content").show()),void 0!==this.options.param.callbacks&&void 0!==this.options.param.callbacks.after_delete&&"function"==typeof(e=window[this.options.param.callbacks.after_delete])&&e()}}),h=Backbone.View.extend({dependentElements:!1,mappedParams:!1,groupParamName:"",adminLabelParams:[],events:{"click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_toggle":"toggle","click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_delete":"deleteParam","click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_clone":"clone"},initialize:function(e){this.options=e,this.$content=this.options.parent.$ul,this.model=vc.active_panel.model,this.mappedParams=this.options.parent.mappedParams,this.groupParamName=this.options.parent.groupParamName,this.adminLabelParams=this.options.parent.adminLabelParams,this.dependentElements={},_.bindAll(this,"hookDependent"),this.initializeDependency(),_.bindAll(this,"hookAdminLabel"),this.initializeAdminLabels()},initializeAdminLabels:function(){for(var t=this.hookAdminLabel,n=function(){var n=e(this);n.data("vc_admin_labels")||(n.data("vc_admin_labels",!0),n.on("keyup change",t),t({currentTarget:this}))},i=0;i<this.adminLabelParams.length;i++)e("[name="+this.adminLabelParams[i]+"].wpb_vc_param_value",this.$el).each(n)},hookAdminLabel:function(t){for(var n="",i="",a=[],o=(c=e(t.currentTarget)).closest(".vc_param_group-wrapper"),s=(t=c.closest(".vc_param").find(".vc_param-group-admin-labels"),0);s<this.adminLabelParams.length;s++){var c,r=this.adminLabelParams[s],l=(c=o.find("[name="+r+"]")).closest('[data-vc-ui-element="panel-shortcode-param"]');void 0!==this.mappedParams[r]&&(n=this.mappedParams[r].heading),i=c.is("select")?c.find("option:selected").text():!c.is("input:checkbox")||c[0].checked?c.val():"",r={type:l.data("param_type"),param_name:l.data("param_name")},""!==(i=_.isObject(vc.atts[r.type])&&_.isFunction(vc.atts[r.type].render)?vc.atts[r.type].render.call(this,r,i):i)&&a.push("<label>"+_.escape(n)+"</label>: "+_.escape(i))}t.html(a.join(", ")).toggleClass("vc_hidden-label",!a.length)},initializeDependency:function(){var t={};_.each(this.mappedParams,(function(n,i){var a,o;_.isObject(n)&&_.isObject(n.dependency)&&_.isString(n.dependency.element)&&(a=e("[name="+this.groupParamName+"_"+n.dependency.element+"].wpb_vc_param_value",this.$el),(o=e("[name="+i+"].wpb_vc_param_value",this.$el)).length)&&_.each(a,(function(i){var a=(i=e(i)).attr("name"),s=n.dependency;_.isArray(this.dependentElements[a])||(this.dependentElements[a]=[]),this.dependentElements[a].push(o),i.data("dependentSet")||(i.attr("data-dependent-set","true"),i.on("keyup change",this.hookDependent)),t[a]||(t[a]=i),_.isString(s.callback)&&window[s.callback].call(this)}),this)}),this),_.each(t,(function(e){this.hookDependent({currentTarget:e})}),this)},hookDependent:function(t){var n=(t=e(t.currentTarget)).closest(".vc_column"),i=this.dependentElements[t.attr("name")],a=t.is(":checkbox")?_.map(this.$el.find("[name="+t.attr("name")+"].wpb_vc_param_value:checked"),(function(t){return e(t).val()})):t.val(),o=t.is(":checkbox")?!this.$el.find("[name="+t.attr("name")+"].wpb_vc_param_value:checked").length:!a.length;return n.hasClass("vc_dependent-hidden")?_.each(i,(function(t){var n=e.Event("change");n.extra_type="vcHookDependedParamGroup",t.closest(".vc_column").addClass("vc_dependent-hidden"),t.trigger(n)})):_.each(i,(function(t){var n=t.attr("name"),i=(n=_.isObject(this.mappedParams[n])&&_.isObject(this.mappedParams[n].dependency)?this.mappedParams[n].dependency:{},t.closest(".vc_column"));_.isBoolean(n.not_empty)&&!0===n.not_empty&&!o||_.isBoolean(n.is_empty)&&!0===n.is_empty&&o||n.value&&_.intersection(_.isArray(n.value)?n.value:[n.value],_.isArray(a)?a:[a]).length||n.value_not_equal_to&&!_.intersection(_.isArray(n.value_not_equal_to)?n.value_not_equal_to:[n.value_not_equal_to],_.isArray(a)?a:[a]).length||n.value_includes&&a.includes(n.value_includes)?i.removeClass("vc_dependent-hidden"):i.addClass("vc_dependent-hidden"),(n=e.Event("change")).extra_type="vcHookDependedParamGroup",t.trigger(n)}),this),this},deleteParam:function(e){e&&e.preventDefault&&e.preventDefault(),!0===confirm(window.i18nLocale.press_ok_to_delete_section)&&(this.options.parent.items--,this.options.parent.afterDelete(),this.$el.remove(),this.unbind(),this.remove())},content:function(){return this.$content},clone:function(n){var i,a;n.preventDefault(),this.options.parent.addAllowed()&&(n=this.options.parent.$ul.data("settings"),i=this.$content,this.$content=this.$el,a=vc.atts.param_group.parseOne.call(this,n),e.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_param_group_clone",param:t(JSON.stringify(n)),shortcode:vc.active_panel.model.get("shortcode"),value:a,vc_inline:!0,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done((function(t){t=t.data||"",(t=e(t)).insertAfter(this.$el),this.$content=i,this.options.parent.initializer.$content=e("> .wpb_element_wrapper",t),this.options.parent.initializer.render(),t.data("vc-param-group-param",new h({el:t,parent:this.options.parent})),this.options.parent.items++,this.options.parent.afterAdd(t,"clone")})))},toggle:function(e){e.preventDefault(),(e=this.$el).find("> .wpb_element_wrapper").slideToggle(),e.toggleClass("vc_param_group-collapsed").siblings(":not(.vc_param_group-collapsed)").addClass("vc_param_group-collapsed").find("> .wpb_element_wrapper").slideUp()}}),p=(vc.edit_form_callbacks=[],vc.atts={parse:function(e){var t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),n=t.closest('[data-vc-ui-element="panel-shortcode-param"]');n=_.isUndefined(vc.atts[e.type])||_.isUndefined(vc.atts[e.type].parse)?t.length?t.val():null:n.data("vcInitParam")?vc.atts[e.type].parse.call(this,e):(n=this.model.get("params"),_.isUndefined(n[e.param_name])?t.length?t.val():null:n[e.param_name]);return void 0!==t.data("js-function")&&void 0!==window[t.data("js-function")]&&(0,window[t.data("js-function")])(this.$el,this,e),n},parseFrame:function(e){return vc.atts.parse.call(this,e)},parseText:function(e){var t=(e=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]")).val();e=e.attr("data-value-type");try{e&&"text"===e&&(t=window.vc.utils.stripHtmlTags(t)),t=window.vc.utils.fixUnclosedTags(t)}catch(e){console.error("Failed to execute window.vc.utils functions during param parse: ",e)}return t},init:function(e,t){_.isUndefined(vc.atts[e.type])||_.isUndefined(vc.atts[e.type].init)||vc.atts[e.type].init.call(this,e,t)}},vc.atts.textarea_html={parse:function(e){var t,n=this.window();e=this.content().find(".textarea_html."+e.param_name);try{n.tinyMCE&&_.isArray(n.tinyMCE.editors)&&_.each(n.tinyMCE.editors,(function(e){"wpb_tinymce_content"===e.id&&e.save()}))}catch(n){window.console&&window.console.warn&&window.console.warn("textarea_html atts parse error",n)}try{t=window.vc.utils.validateHtml(e.val())}catch(n){console.error("Error validating HTML content: ",n),t=e.val()}return t},render:function(e,t){return _.isUndefined(t)?t:vc_wpautop(t)}},vc.atts.textfield={parse:function(e){return vc.atts.parseText.call(this,e)}},vc.atts.textarea={parse:function(e){return vc.atts.parseText.call(this,e)}},vc.atts.textarea_safe={parse:function(e){return(e=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").val()).match(/"|(http)/)?"#E-8_"+base64_encode(rawurlencode(e)):e},render:function(t,n){return n&&n.match(/^#E\-8_/)?e("<div/>").text(rawurldecode(base64_decode(n.replace(/^#E\-8_/,"")))).html():n}},vc.atts.checkbox={parse:function(t){var n=[],i="";return e("input[name="+t.param_name+"]",this.content()).each((function(){var t=e(this);this.checked&&n.push(t.attr("value"))})),0<n.length?n.join(","):i},defaults:function(){return""}},vc.atts.el_id={clone:function(e,t,n){var i=e.get("params");_.isUndefined(n)||_.isUndefined(n.settings)||_.isUndefined(n.settings.auto_generate)||!0!==n.settings.auto_generate?i[n.param_name]="":i[n.param_name]=Date.now()+"-"+vc_guid(),e.set({params:i},{silent:!0})},create:function(e,t,n){if(e.get("cloned"))return vc.atts.el_id.clone(e,t,n);!_.isEmpty(t)||_.isUndefined(n)||_.isUndefined(n.settings)||_.isUndefined(n.settings.auto_generate)||1!=n.settings.auto_generate||((t=e.get("params"))[n.param_name]=Date.now()+"-"+vc_guid(),e.set({params:t},{silent:!0}))}},vc.events.on("shortcodes:add:param:type:el_id",vc.atts.el_id.create),vc.atts.posttypes={parse:function(t){var n=[],i="";return e("input[name="+t.param_name+"]",this.content()).each((function(){var t=e(this);this.checked&&n.push(t.attr("value"))})),0<n.length?n.join(","):i}},vc.atts.taxonomies={parse:function(t){var n=[],i="";return e("input[name="+t.param_name+"]",this.content()).each((function(){var t=e(this);this.checked&&n.push(t.attr("value"))})),0<n.length?n.join(","):i}},vc.atts.exploded_textarea={parse:function(e){return this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").val().replace(/\n/g,",")}},vc.atts.exploded_textarea_safe={parse:function(e){return(e=(e=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").val()).replace(/\n/g,",")).match(/"|(http)/)?"#E-8_"+base64_encode(rawurlencode(e)):e},render:function(t,n){return n&&n.match(/^#E\-8_/)?e("<div/>").text(rawurldecode(base64_decode(n.replace(/^#E\-8_/,"")))).html():n}},vc.atts.textarea_raw_html={parse:function(e){return e=vc.atts.parseText.call(this,e),base64_encode(rawurlencode(e))},render:function(t,n){var i;return null!=n&&(i=window.vc.utils.isBase64(n)?rawurldecode(base64_decode(n.trim())):n,n)?e("<div/>").text(i).html():""}},vc.atts.textarea_ace={init:function(t,n){var i,a=n.find(".textarea_ace_container"),o=n.find('input.wpb_vc_param_value[name="content"]');n=a.attr("id");"undefined"!=typeof ace?((i=ace.edit(n)).setTheme("ace/theme/chrome"),a=t.mode||"html",i.session.setMode("ace/mode/"+a),i.session.setOption("wrap","free"),a="",o.val()&&(a=rawurldecode(base64_decode(o.val()))),i.setValue(a,-1),i.clearSelection(),i.getSession().on("change",(function(){var e=i.getValue();try{e=window.vc.utils.fixUnclosedTags(e)}catch(e){console.error("Failed to execute window.vc.utils.fixUnclosedTags function: ",e)}e=base64_encode(rawurlencode(e)),o.val(e)})),e(window).on("resize",(function(){i.resize()}))):console.error("ACE Editor is not loaded.")},parse:function(){return this.content().find('input.wpb_vc_param_value[name="content"]').val()},render:function(t,n){return(n=n?rawurldecode(base64_decode(n.trim())):"")?e("<div/>").text(n).html():""}},vc.atts.dropdown={render:function(e,t){return t},init:function(t,n){e(".wpb_vc_param_value.dropdown",n).on("change",(function(){var t=e(this),n=t.find(":selected"),i=t.data("option");n=(n=n.length?n.attr("class").replace(/\s/g,"_"):"").replace("#","hash-"),void 0!==i&&t.removeClass(i),void 0!==n&&(t.data("option",n),t.addClass(n))}))},defaults:function(e){var t;return _.isArray(e.value)||_.isString(e.value)?_.isArray(e.value)?(t=e.value[0],_.isArray(t)&&t.length?t[0]:t):"":(t=_.values(e.value)[0]).label?t.value:t}},vc.atts.href={parse:function(e){var t="";return(e=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]")).length&&"http://"!==e.val()?e.val():t}},vc.atts.attach_image={isParse:!1,parse:function(t){var n=this.content().find(".wpb_vc_param_value[name="+t.param_name+"]"),i="";return n.parent().find("li.added").length&&(i=n.parent().find("li.added img").attr("src")),e("[data-model-id="+this.model.id+"]").data("field-"+t.param_name+"-attach-image",i),vc.atts.attach_image.isParse=!0,n.length?n.val():null},render:function(t,n){var i=e("[data-model-id="+this.model.id+"]"),a=i.data("field-"+t.param_name+"-attach-image"),o=this.$el.find(".attachment-thumbnail[data-name="+t.param_name+"]"),s={image_src:"",image_alt:""};return"image"===t.param_name&&("external_link"===this.model.getParam("source")?(s.image_src=this.model.getParam("custom_src"),vc.atts.attach_image.updateImage(o,s)):_.isEmpty(n)&&"featured_image"!==this.model.getParam("source")?_.isUndefined(a)||(i.removeData("field-"+t.param_name+"-attach-image"),s.image_src=a,vc.atts.attach_image.updateImage(o,s)):(u("get_attach_image",t,n,this.model),vc.atts.attach_image.isParse&&e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_data",content:n,params:this.model.get("params"),postId:vc_post_id,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done((function(e){var t;e.success&&(t=e.data.image_src.length||"featured_image"===this.model.getParam("source"),vc.atts.attach_image.updateImage(o,e.data,t))})))),n},updateImage:function(e,t,n){var i=t.image_src;t=t.image_alt;e.length&&((n=void 0!==n&&n)||!_.isEmpty(i)?(e.attr("src",i),e.attr("alt",t),(_.isEmpty(i)?(e.hide(),e.next().removeClass("image-exists")):(e.show(),e.next().addClass("image-exists"))).next().addClass("image-exists")):e.attr("src","").hide().next().removeClass("image-exists").next().removeClass("image-exists"))}},vc.atts.attach_images={isParse:!1,parse:function(t){var n=this.content().find(".wpb_vc_param_value[name="+t.param_name+"]"),i="";return n.parent().find("li.added").each((function(){i+='<li><img src="'+e(this).find("img").attr("src")+'" alt=""></li>'})),e("[data-model-id="+this.model.id+"]").data("field-"+t.param_name+"-attach-images",i),vc.atts.attach_images.isParse=!0,n.length?n.val():null},render:function(t,n){var i=this.$el.find(".attachment-thumbnails[data-name="+t.param_name+"]");return"external_link"===this.model.getParam("source")&&(n=this.model.getParam("custom_srcs")),_.isEmpty(n)?(this.$el.removeData("field-"+t.param_name+"-attach-images"),vc.atts.attach_images.updateImages(i,"")):(u("get_gallery_images",t,n,this.model),vc.atts.attach_images.isParse&&e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_get_gallery_html",content:n,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done((function(e){e=e.data,vc.atts.attach_images.updateImages(i,e)}))),n},updateImages:function(e,t){e.html(t),t.length?e.removeClass("image-exists").next().addClass("image-exists"):e.addClass("image-exists").next().removeClass("image-exists")}},vc.atts.google_fonts={parse:function(t){t=this.content().find(".wpb_vc_param_value[name="+t.param_name+"]").parent();var n={};return n.font_family=t.find(".vc_google_fonts_form_field-font_family-select > option:selected").val(),n.font_style=t.find(".vc_google_fonts_form_field-font_style-select > option:selected").val(),n.font_vendor=t.find(".vc_google_fonts_form_field-font_family-select > option:selected").attr("data[font_vendor]"),t=_.map(n,(function(e,t){if(_.isString(e)&&0<e.length)return t+":"+encodeURIComponent(e)})),e.grep(t,(function(e){return _.isString(e)&&0<e.length})).join("|")},init:function(e,t){var n=t;n.length&&("undefined"!=typeof WebFont?t.data("vc-param-object",new c({el:n})):n.find("> .edit_form_line").html(window.i18nLocale.gfonts_unable_to_load_google_fonts||"Unable to load Google Fonts"))}},vc.atts.font_container={parse:function(t){t=this.content().find(".wpb_vc_param_value[name="+t.param_name+"]").parent();var n={};return n.tag=t.find(".vc_font_container_form_field-tag-select > option:selected").val(),n.font_size=t.find(".vc_font_container_form_field-font_size-input").val(),n.text_align=t.find(".vc_font_container_form_field-text_align-select > option:selected").val(),n.font_family=t.find(".vc_font_container_form_field-font_family-select > option:selected").val(),n.color=t.find(".vc_font_container_form_field-color-input").val(),n.line_height=t.find(".vc_font_container_form_field-line_height-input").val(),n.font_style_italic=t.find(".vc_font_container_form_field-font_style-checkbox.italic").prop("checked")?"1":"",n.font_style_bold=t.find(".vc_font_container_form_field-font_style-checkbox.bold").prop("checked")?"1":"",t=_.map(n,(function(e,t){if(_.isString(e)&&0<e.length)return t+":"+encodeURIComponent(e)})),e.grep(t,(function(e){return _.isString(e)&&0<e.length})).join("|")},init:function(e,t){vc.atts.colorpicker.init.call(this,e,t)}},vc.atts.param_group={parse:function(t){var n=this.content(),i=n.find('.wpb_el_type_param_group[data-vc-ui-element="panel-shortcode-param"][data-vc-shortcode-param-name="'+t.param_name+'"]').find("> .edit_form_line > .vc_param_group-list");t=vc.atts.param_group.extractValues.call(this,t,e('>.wpb_vc_row:not(".vc_param_group-add_content-wrapper")',i));return this.$content=n,encodeURIComponent(JSON.stringify(t))},extractValues:function(t,n){var i=[],a=this;return n.each((function(){var n={};a.$content=e(this),_.each(t.params,(function(i){var o,s=(i=e.extend({},i)).param_name;i.param_name=t.param_name+"_"+s,((o=vc.atts.parse.call(a,i)).length||i.save_always)&&(n[s]=o)})),i.push(n)})),i},parseOne:function(e){var n=this.content();e=vc.atts.param_group.extractValues.call(this,e,n);return this.$content=n,t(JSON.stringify(e))},init:function(e,t){t.data("vc-param-object",new d({el:t,settings:{param:e}}))}},vc.atts.colorpicker={init:function(t,n){n=n[0],vc.initColorPicker(n,null,{change:function(t){e(t).trigger("change")},cancel:function(t){e(t).trigger("change")}})}},vc.atts.autocomplete={init:function(t,n){n.length&&n.each((function(){var t=e(".wpb_vc_param_value",this),n=t.attr("name"),i=e(".vc_auto_complete_param",this);n=e.extend({$param_input:t,param_name:n,$el:i},t.data("settings")),i=new r(n);n.multiple&&i.enableMultiple(),n.sortable&&i.enableSortable(),t.data("vc-param-object",i)}))}},vc.atts.loop={init:function(e,t){t.data("vc-param-object",new a({el:t}))}},vc.atts.vc_link={init:function(t,n){e(".vc_link-build",n).on("click",(function(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),t=e(this).closest(".vc_link"),n=t.find(".wpb_vc_param_value"),i=t.find(".url-label"),a=t.find(".title-label"),t=n.data("json"),o=e("#wp-link-submit"),s=e('<input type="submit" name="vc_link-submit" id="vc_link-submit" class="button-primary" value="Set Link">'),o.hide(),e("#vc_link-submit").remove(),s.insertBefore(o),c=e('<div class="link-target vc-link-nofollow"><label><span></span> <input type="checkbox" id="vc-link-nofollow"> Add nofollow option to link</label></div>'),e("#link-options .vc-link-nofollow").remove(),c.insertAfter(e("#link-options .link-target")),setTimeout((function(){var t=e("#most-recent-results").css("top");e("#most-recent-results").css("top",parseInt(t,10)+c.height())}),200),r=!window.wpLink&&e.fn.wpdialog&&e("#wp-link").length?{$link:!1,open:function(){this.$link=e("#wp-link").wpdialog({title:wpLinkL10n.title,width:480,height:"auto",modal:!0,dialogClass:"wp-dialog",zIndex:3e5}),this.$link.addClass("vc-link-wrapper")},close:function(){this.$link&&(this.$link.wpdialog("close"),this.$link.removeClass("vc-link-wrapper"))}}:window.wpLink;var n,i,a,o,s,c,r,l=function(t,c){jQuery(c).addClass("vc-link-wrapper");var l=e("#wp-link-cancel button");s.off("click.vcLink").on("click.vcLink",(function(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),(t={}).url=(e("#wp-link-url").length?e("#wp-link-url"):e("#url-field")).val(),t.title=(e("#wp-link-text").length?e("#wp-link-text"):e("#link-title-field")).val();var c,d=e("#wp-link-target").length?e("#wp-link-target"):e("#link-target-checkbox");return t.target=d[0].checked?"_blank":"",t.rel=e("#vc-link-nofollow")[0].checked?"nofollow":"",c=_.map(t,(function(e,t){if(_.isString(e)&&0<e.length)return t+":"+encodeURIComponent(e).trim()})).filter((function(e){return e})).join("|"),n.val(c).trigger("change"),n.data("json",t),i.html(t.url+t.target),a.html(t.title),r.close("noReset"),o.show(),s.off("click.vcLink"),s.remove(),l.off("click.vcLinkCancel"),window.wpLink.textarea="",d.attr("checked",!1),e("#most-recent-results").css("top",""),e("#vc-link-nofollow").attr("checked",!1),!1})),l.off("click").on("click.vcLinkCancel",(function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),r.close("noReset"),s.off("click.vcLink"),s.remove(),l.off("click.vcLinkCancel"),window.wpLink.textarea=""}))},d=function(e,t){jQuery(t).removeClass("vc-link-wrapper"),jQuery(document).off("wplink-open",l),jQuery(document).off("wplink-close",d)};jQuery(document).off("wplink-open",l).on("wplink-open",l),jQuery(document).off("wplink-close",d).on("wplink-close",d),"admin_frontend_editor"===vc_mode?r.open("vc-hidden-editor"):r.open("content"),_.isString(t.url)&&(e("#wp-link-url").length?e("#wp-link-url"):e("#url-field")).val(t.url),_.isString(t.title)&&(e("#wp-link-text").length?e("#wp-link-text"):e("#link-title-field")).val(t.title),(e("#wp-link-target").length?e("#wp-link-target"):e("#link-target-checkbox")).prop("checked",!_.isEmpty(t.target)),e("#vc-link-nofollow").length&&e("#vc-link-nofollow").prop("checked",!_.isEmpty(t.rel))}))}},vc.atts.sorted_list={init:function(t,n){e(".vc_sorted-list",n).VcSortedList()}},vc.atts.options={init:function(e,t){t.data("vc-param-object",new o({el:t}))}},vc.atts.iconpicker={change:function(e,t){(t=t.find(".vc-iconpicker")).val(this.value),t.data("vc-no-check",!0),t.find('[value="'+this.value+'"]').attr("selected","selected"),t.data("vcFontIconPicker").loadIcons()},parse:function(e){return this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").parent().find(".vc-iconpicker").val()},init:function(t,n){var i=n.find(".wpb_vc_param_value"),a=e.extend({iconsPerPage:100,iconDownClass:"fip-fa fa fa-arrow-down",iconUpClass:"fip-fa fa fa-arrow-up",iconLeftClass:"fip-fa fa fa-arrow-left",iconRightClass:"fip-fa fa fa-arrow-right",iconSearchClass:"fip-fa fa fa-search",iconCancelClass:"fip-fa fa fa-remove",iconBlockClass:"fip-fa"},i.data("settings"));n.find(".vc-iconpicker").vcFontIconPicker(a).on("change",(function(){var t=e(this);t.data("vc-no-check")||i.data("vc-no-check",!0).val(this.value).trigger("change"),t.data("vc-no-check",!1)})),i.on("change",(function(){i.data("vc-no-check")||vc.atts.iconpicker.change.call(this,t,n),i.data("vc-no-check",!1)}))}},vc.atts.animation_style={init:function(t,n){var i=n,a=e(".wpb_vc_param_value[name="+t.param_name+"]",i);function o(t,n){e(t).removeClass().addClass(n+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",(function(){e(this).removeClass().addClass("vc_param-animation-style-preview")}))}e('option[value="'+a.val()+'"]',i).attr("selected",!0),e(".vc_param-animation-style-trigger",i).on("click",(function(t){t.preventDefault(),"none"!==(t=e(".vc_param-animation-style",i).val())&&o(this.parentNode,"vc_param-animation-style-preview "+t)})),e(".vc_param-animation-style",i).on("change",(function(){var t=e(this).val();a.val(t),"none"!==t&&o(e(".vc_param-animation-style-preview",i),"vc_param-animation-style-preview "+t)}))}},vc.atts.gutenberg={content:null,gutenbergParamObj:null,$frame:null,closeEditor:function(e){e&&e.preventDefault&&e.preventDefault();var t=this;_.delay((function(){t.content.find(".vc_gutenberg-modal-wrapper").html(""),t.$frame=null,t.gutenbergParamObj=null}),100)},updateEditor:function(e){e&&e.preventDefault&&e.preventDefault(),this.gutenbergParamObj&&this.gutenbergParamObj.updateValueFromIframe(),this.closeEditor()},init:function(t,n){var i=vc.atts.gutenberg,a=(i.content=n,e(".wpb_vc_param_value[name="+t.param_name+"]",i.content));e('[data-vc-action="open"]',i.content).on("click",(function(e){e.preventDefault();e=a.val();var t=window.wpbGutenbergEditorUrl||"/wp-admin/post-new.php?post_type=wpb_gutenberg_param";i.gutenbergParamObj=new v({onSetValue:function(e){a.val(e),a.trigger("change")},onError:i.closeEditor,value:e}),vc.createOverlaySpinner(),i.content.find(".vc_gutenberg-modal-wrapper").html('<div class="wpb-gutenberg-modal"><div class="wpb-gutenberg-modal-inner"><iframe style="width: 100%;" data-vc-gutenberg-param-iframe></iframe></div></div>'),i.$frame=i.content.find("iframe[data-vc-gutenberg-param-iframe]"),i.$frame.attr("src",t),i.$frame.on("load",(function(){vc.removeOverlaySpinner(),i.gutenbergParamObj&&(i.gutenbergParamObj.iframe=i.$frame.get(0),i.gutenbergParamObj.iframeLoaded())}))}))}},function(){return'<style>.wpb-gutenberg-controls-container {display: flex;justify-content: center;align-items: center;}.vc_gutenberg-modal-update-button {padding-top: 8px;padding-bottom: 8px;min-height: 10px;padding: 5px 10px;font-size: 12px;line-height: 1.5;border-radius: 3px;color: #fff;background-color: #00aef0;border-color: transparent;cursor: pointer;display: inline-block;text-decoration: none !important;}.vc_gutenberg-modal-update-button:hover {background-color: #0089bd;}.wpb-gutenberg-modal-close-button {display: inline-flex;justify-content: center;align-items: center;margin: 0 0 0 10px;background: transparent;border: 0;box-shadow: none;padding: 5px;cursor: pointer;outline: none;}.wpb-gutenberg-modal-close-button:hover .vc-c-icon-close {opacity: 1;}.vc-c-icon-close {position: relative;display: inline-flex;width: 13px;height: 13px;justify-content: center;align-items: center;transform: rotate(45deg);opacity: .65;transition: opacity .2s ease-in-out;}.vc-c-icon-close::before,.vc-c-icon-close::after {content: "";position: absolute;background: #353535;}.vc-c-icon-close::before {width: 1px;height: 100%;}.vc-c-icon-close::after {width: 100%;height: 1px;}.interface-interface-skeleton__sidebar {z-index: -1;}</style>'}),v=function(t){return this.iframe=null,this.options=t||{},this.value=this.options&&this.options.value?this.options.value:"",this.iframeLoaded=function(){var t=!!this.iframe.contentWindow.wp&&this.iframe.contentWindow.wp.data,n=(t||(o=(o=window.i18nLocale||!1)&&o.gutenbergDoesntWorkProperly?o.gutenbergDoesntWorkProperly:"Gutenberg plugin doesn't work properly. Please check Gutenberg plugin.",window.alert(o),this.options&&this.options.onError&&this.options.onError()),parseInt(this.iframe.contentWindow.document.getElementById("post_ID").value)),i={id:n,guid:{raw:"/?",rendered:"/?"},title:{raw:""},content:{raw:this.value,rendered:this.value},type:"wpb_gutenberg_param",slug:"",status:"auto-draft",link:"/?",format:"standard",categories:[]},a=t.dispatch("core/editor"),o=t.select("core/edit-post"),s=this.iframe.contentWindow.document.querySelector(".editor-post-title"),c=this.iframe.contentWindow.document.querySelector(".components-notice-list"),r=(s&&s.classList.add("hidden"),c&&c.classList.add("hidden"),o.isPublishSidebarOpened=function(){return!0},"function"==typeof a.autosave&&(a.autosave=function(){}),this.value),l=!1,d=(t.subscribe((function(){var e=t.select("core/editor").getCurrentPost();!l&&e&&e.id===n&&(l=!0,a.setupEditor(i,{content:r}))})),this.iframe);setTimeout((function(){var t,n,i;n=(t=e(t=d).contents()).find(".edit-post-header-toolbar"),i=function(){var e=window.i18nLocale.gutenbergEditorUpdateButton||"Update";return'<div class="wpb-gutenberg-controls-container">'+p()+'<button class="vc_gutenberg-modal-update-button">'+e+'</button><button class="wpb-gutenberg-modal-close-button"><i class="vc-composer-icon vc-c-icon-close"></i></button></div>'}(),e(i).insertAfter(n),t.find(".vc_gutenberg-modal-update-button, .wpb-gutenberg-modal-close-button").on("click",(function(){setTimeout((function(){window.sessionStorage.removeItem("wp-autosave-block-editor-post-auto-draft")}),"3000")})),i=vc.atts.gutenberg,t.find(".wpb-gutenberg-modal-close-button").on("click",i.closeEditor.bind(i)),t.find(".vc_gutenberg-modal-update-button").on("click",i.updateEditor.bind(i))}),"3000")},this.updateValueFromIframe=function(){var e;this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.wp&&this.iframe.contentWindow.wp.data&&(e=this.iframe.contentWindow.wp.data)&&(e=e.select("core/editor").getEditedPostContent(),this.setValue(e))},this.setValue=function(e){this.value=e,this.options.onSetValue&&this.options.onSetValue(e)},this};function u(e,t,n,i){vc.backendEditorParamsAjaxStorage=vc.backendEditorParamsAjaxStorage||{},vc.backendEditorParamsAjaxStorage[i.id]={action:e,source:i.getParam("source"),paramName:t.param_name,value:n}}vc.atts.vc_grid_id={parse:function(){return"vc_gid:"+Date.now()+"-"+this.model.get("id")+"-"+Math.floor(11*Math.random())}},vc.atts.addShortcodeIdParam=function(e){var t=!1,n=e.get("params"),i=vc.map[e.get("shortcode")];_.isArray(i.params)&&_.each(i.params,(function(i){i&&!_.isUndefined(i.type)&&("tab_id"===i.type&&_.isEmpty(n[i.param_name])?(t=!0,n[i.param_name]=vc_guid()+"-"+Math.floor(11*Math.random())):"vc_grid_id"===i.type&&(t=!0,n[i.param_name]=vc.atts.vc_grid_id.parse.call({model:e})))})),t&&e.save("params",n,{silent:!0})},vc.getMapped=vc.memoizeWrapper((function(e){return vc.map[e]||{}}))})(window.jQuery),(e=>{vc.debug=!1,vc.map=_.isUndefined(window.vc_mapper)?{}:window.vc_mapper,vc.roles=_.isUndefined(window.vc_roles)?{}:window.vc_roles,vc.Storage=function(){this.data={}},vc.Storage.prototype={url:window.ajaxurl,checksum:!1,locked:!1,isChanged:!1,create:function(e){return e.id||(e.id=e.attributes.id=vc_guid()),this.data[e.id]=e.toJSON(),this.setModelRoot(e.id),this.save(),e},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},setModelRoot:function(e){e=this.data[e],_.isString(e.parent_id)&&_.isObject(this.data[e.parent_id])&&(e.root_id=this.data[e.parent_id].root_id),_.isObject(this.data[e.root_id])&&(this.data[e.root_id].html=!1)},update:function(e){return this.data[e.id]=e.toJSON(),this.setModelRoot(e.id),this.save(),e},destroy:function(e){return _.isUndefined(this.data[e.id])||_.isUndefined(this.data[e.id].root_id)||!_.isObject(this.data[this.data[e.id].root_id])||(this.data[this.data[e.id].root_id].html=!1),_.isUndefined(this.data[e.id])||delete this.data[e.id],this.save(),e},find:function(e){return this.data[e]},findAll:function(){return this.fetch(),_.values(this.data)},findAllRootSorted:function(){var e=_.filter(_.values(this.data),(function(e){return!1===e.parent_id}));return _.sortBy(e,(function(e){return e.order}))},escapeParam:function(t){return"array"!==e.type(t)?_.isUndefined(t)||_.isNull(t)||!t.toString?"":t.toString().replace(/"/g,"``").replace(/\[/g,"`{`").replace(/\]/g,"`}`"):t},unescapeParam:function(e){return e=e.replace(/\`{\`/g,"[").replace(/\`}\`/g,"]").replace(/(\`{2})/g,'"'),vc_wpnop(e)},storageCreateShortcodeString:function(e){var t,n=e.get("shortcode"),i=_.extend({},e.get("params")),a={};i=vc.getMergedParams(n,i);return _.each(i,(function(e,t){a[t]=this.escapeParam(e)}),this),i=vc.getMapped(n),i=_.isObject(i)&&(_.isBoolean(i.is_container)&&!0===i.is_container||!_.isEmpty(i.as_parent)),t=this._storageGetShortcodeContent(e),t={tag:n,attrs:a,content:t,type:_.isUndefined(vc.getParamSettings(n,"content"))&&!i?"single":""},e.trigger("stringify",e,t),wp.shortcode.string(t)},save:function(){var e;return this.locked?this.locked=!1:(e=_.reduce(this.findAllRootSorted(),(function(e,t){return t=vc.shortcodes.get(t),e+this.storageCreateShortcodeString(t)}),"",this),this.setContent(e),this.checksum=vc_globalHashCode(e),this)},_storageGetShortcodeContent:function(e){var t=_.sortBy(_.filter(this.data,(function(t){return t.parent_id===e.get("id")})),(function(e){return e.order}));return t.length?_.reduce(t,(function(e,t){return t=vc.shortcodes.get(t),e+this.storageCreateShortcodeString(t)}),"",this):(t=_.extend({},e.get("params")),_.isUndefined(t.content)?"":t.content)},getContent:function(){return _.isObject(window.tinymce)&&tinymce.editors.content&&tinymce.editors.content.save(),window.vc_wpnop(e("#content").val()||"")},addUndo:_.debounce((function(e){vc.undoRedoApi&&vc.undoRedoApi.add(e)}),100),setContent:function(t){this.addUndo(t);var n=window.tinyMCE&&window.tinyMCE.get&&window.tinyMCE.get("content");t=vc_wpautop(t),this.isChanged||window.jQuery(window).on("beforeunload.vcSave",(function(){return window.i18nLocale.confirm_to_leave})),this.isChanged=!0,e("#content").val(t),n&&n.setContent&&(n.setContent(t),n.fire("change"))},parseContent:function(e,t,n){var i=_.keys(vc.map).join("|"),a=window.wp.shortcode.regexp(i);t=t.trim().match(a);return _.isNull(t)||_.each(t,(function(t){var a,o=t.match(this.regexp(i)),s=o[5],c=new RegExp("^[\\s]*\\[\\[?("+_.keys(vc.map).join("|")+")(?![\\w-])"),r=window.vc_guid(),l=window.wp.shortcode.attrs(o[3]),d={};_.each(l.named,(function(e,t){d[t]=this.unescapeParam(e)}),this),l={id:r,shortcode:o[2],order:this.order,params:_.extend({},d),parent_id:!!_.isObject(n)&&n.id,root_id:_.isObject(n)?n.root_id:r},a=vc.map[l.shortcode],this.order+=1,_.isArray(e)?(e.push(l),r=e.length-1):e[r]=l,r==l.root_id&&(e[r].html=t),_.isString(s)&&s.match(c)&&(_.isBoolean(a.is_container)&&!0===a.is_container||!_.isEmpty(a.as_parent)&&!1!==a.as_parent)?e=this.parseContent(e,s,e[r]):_.isString(s)&&s.length&&"vc_row"===o[2]?e=this.parseContent(e,'[vc_column width="1/1"][vc_column_text]'+s+"[/vc_column_text][/vc_column]",e[r]):_.isString(s)&&s.length&&"vc_column"===o[2]?e=this.parseContent(e,"[vc_column_text]"+s+"[/vc_column_text]",e[r]):_.isString(s)&&(e[r].params.content=s)}),this),e},isContentChanged:function(){return!1===this.checksum||this.checksum!==vc_globalHashCode(this.getContent())},wrapData:function(e){var t=_.keys(vc.map).join("|"),n=this.regexp_split("vc_row"),i=new RegExp("^\\[(\\[?)("+t+")","g"),a=this,o={},s=0;e=wp.shortcode.replace("vc_section",e,(function(e){e={attrs:e.attrs.named,content:a.wrapData(e.content)};var t="vc_pseudo_section_"+ ++s+"_"+VCS4()+VCS4();return o[t]={tag:t,data:e},'[vc_row][vc_pseudo_section id="'+t+'"][/vc_pseudo_section][/vc_row]'})),t=_.filter(e.trim().split(n),(function(e){if(!_.isEmpty(e))return e}));return e=_.reduce(t,(function(e,t){var n=(t=-1!==t.trim().indexOf("vc_pseudo_section_")||t.trim().match(i)?t:"[vc_row][vc_column][vc_column_text]"+t+"[/vc_column_text][/vc_column][/vc_row]").match(vc_regexp_shortcode());return e+(!_.isArray(n)||_.isUndefined(n[2])||-1!==n[2].indexOf("vc_pseudo_section_")||_.isUndefined(vc.map[n[2]])||!_.isUndefined(vc.map[n[2]].is_container)&&vc.map[n[2]].is_container||!_.isEmpty(vc.map[n[2]].as_parent)?t:"[vc_row][vc_column]"+t+"[/vc_column][/vc_row]")}),""),0<Object.keys(o).length&&(e=(e=e.replace(/\[vc_row\]\[vc_pseudo_section/g,"[vc_pseudo_section")).replace(/\[\/vc_pseudo_section\]\[\/vc_row\]/g,"[/vc_pseudo_section]"),e=wp.shortcode.replace("vc_pseudo_section",e,(function(e){return e=o[e.attrs.named.id],wp.shortcode.string({tag:"vc_section",attrs:e.data.attrs,content:e.data.content})}))),e},fetch:function(){if(!this.isContentChanged())return this;this.order=0;var e=this.getContent();this.checksum=vc_globalHashCode(e),e=this.wrapData(e),this.data=this.parseContent({},e)},append:function(e){this.data={},this.order=0;try{var t=this.getContent();this.setContent(t+""+e)}catch(e){window.console&&window.console.warn&&window.console.warn("storage.append error",e)}},regexp_split:_.memoize((function(e){return new RegExp("(\\[(\\[?)["+e+"]+(?![\\w-])[^\\]\\/]*[\\/(?!\\])[^\\]\\/]*]?(?:\\/]\\]|\\](?:[^\\[]*(?:\\[(?!\\/"+e+"\\])[^\\[]*)*\\[\\/"+e+"\\])?)\\]?)","g")})),regexp:_.memoize((function(e){return new RegExp("\\[(\\[?)("+e+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")}))},vc.storage=new vc.Storage})(window.jQuery),(()=>{var e=vc.storage;vc.shortcode=Backbone.Model.extend({settings:!1,defaults:function(){var e=window.vc_guid();return{id:e,shortcode:"vc_text_block",order:vc.shortcodes.getNextOrder(),params:{},parent_id:!1,root_id:e,cloned:!1,html:!1,view:!1}},initialize:function(){this.bind("remove",this.removeChildren,this),this.bind("remove",this.removeEvents,this)},removeEvents:function(e){vc.events.triggerShortcodeEvents("destroy",e)},sync:function(t,n,i){if(i&&i.silent)return i.success(n);var a;switch(t){case"read":a=n.id?e.find(n):e.findAll();break;case"create":a=e.create(n);break;case"update":a=e.update(n);break;case"delete":a=e.destroy(n)}a?i.success(a):i.error("Record not found")},getParam:function(e){return _.isObject(this.get("params"))&&!_.isUndefined(this.get("params")[e])?this.get("params")[e]:""},removeChildren:function(e){e=vc.shortcodes.where({parent_id:e.id}),_.each(e,(function(e){vc.storage.lock(),e.destroy(),this.removeChildren(e)}),this),e.length&&vc.storage.save()},setting:function(e){return!1===this.settings&&(this.settings=vc.getMapped(this.get("shortcode"))||{}),this.settings[e]}}),vc.shortcodes_collection=Backbone.Collection.extend({model:vc.shortcode,last_index:0,getNextOrder:function(){return this.last_index++},comparator:function(e){return e.get("order")},initialize:function(){},createFromString:function(e,t){e=vc.storage.parseContent({},e,!!_.isObject(t)&&t.toJSON()),_.each(_.values(e),(function(e){vc.shortcodes.create(e)}),this)},sync:function(t,n,i){var a;switch(t){case"read":a=n.id?e.find(n):e.findAll();break;case"create":a=e.create(n);break;case"update":a=e.update(n);break;case"delete":a=e.destroy(n)}a?i.success(a):i.error("Record not found")},stringify:function(e){var t=_.sortBy(vc.shortcodes.where({parent_id:!1}),(function(e){return e.get("order")}));return this.modelsToString(t,e)},singleStringify:function(e,t){return this.modelsToString([vc.shortcodes.get(e)],t)},createShortcodeString:function(e,t){var n,i=e.get("shortcode"),a=_.extend({},e.get("params")),o={};a=vc.getMergedParams(i,a);return _.each(a,(function(e,t){o[t]=vc.storage.escapeParam(e)}),this),a=vc.getMapped(i),a=_.isObject(a)&&(_.isBoolean(a.is_container)&&!0===a.is_container||!_.isEmpty(a.as_parent)),n=this._getShortcodeContent(e,t),n={tag:i,attrs:o,content:n,type:_.isUndefined(vc.getParamSettings(i,"content"))&&!a?"single":""},_.isUndefined(t)?e.trigger("stringify",e,n):e.trigger("stringify:"+t,e,n),n.remove?"":wp.shortcode.string(n)},modelsToString:function(e,t){return _.reduce(e,(function(e,n){return e+this.createShortcodeString(n,t)}),"",this)},_getShortcodeContent:function(e,t){var n=_.sortBy(vc.shortcodes.where({parent_id:e.get("id")}),(function(e){return e.get("order")}));return n.length?_.reduce(n,(function(e,n){return e+this.createShortcodeString(n,t)}),"",this):(n=_.extend({},e.get("params")),_.isUndefined(n.content)?"":n.content)}}),vc.shortcodes=new vc.shortcodes_collection,vc.getDefaults=vc.memoizeWrapper((function(e){var t={};e=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[];return _.each(e,(function(e){_.isObject(e)&&(_.isUndefined(e.std)?vc.atts[e.type]&&vc.atts[e.type].defaults?t[e.param_name]=vc.atts[e.type].defaults(e):_.isUndefined(e.value)||(_.isObject(e.value)?t[e.param_name]=_.values(e.value)[0]:_.isArray(e.value)?t[e.param_name]=e.value[0]:t[e.param_name]=e.value):t[e.param_name]=e.std)})),t})),vc.getDefaultsAndDependencyMap=vc.memoizeWrapper((function(e){var t={},n={};e=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[];return _.each(e,(function(e){_.isObject(e)&&"content"!==e.param_name&&(_.isUndefined(e.std)?_.isUndefined(e.value)||(vc.atts[e.type]&&vc.atts[e.type].defaults?n[e.param_name]=vc.atts[e.type].defaults(e):_.isObject(e.value)?n[e.param_name]=_.values(e.value)[0]:_.isArray(e.value)?n[e.param_name]=e.value[0]:n[e.param_name]=e.value):n[e.param_name]=e.std,_.isUndefined(e.dependency)||_.isUndefined(e.dependency.element)||(t[e.param_name]=e.dependency))})),{defaults:n,dependencyMap:t}})),vc.getMergedParams=function(e,t){var n,i=vc.getDefaultsAndDependencyMap(e),a={};return t=_.extend({},i.defaults,t),n=_.extend({},i.dependencyMap),_.each(t,(function(o,s){if("content"!==s){if(!_.isUndefined(n[s])){if(!_.isUndefined(n[n[s].element])&&_.isBoolean(n[n[s].element].failed)&&!0===n[n[s].element].failed)return void(n[s].failed=!0);var c=n[s].element,r=t[c],l=_.isEmpty(r),d=!1;if("string"==typeof r&&(d=t[c].split(",").map((function(e){return e.trim()})).filter((function(e){return e}))),c=_.omit(n[s],"element"),_.isBoolean(c.not_empty)&&!0===c.not_empty&&l||_.isBoolean(c.is_empty)&&!0===c.is_empty&&!l||c.value&&!_.intersection(_.isArray(c.value)?c.value:[c.value],_.isArray(r)?r:[r]).length&&d&&c.value&&!_.intersection(_.isArray(c.value)?c.value:[c.value],_.isArray(d)?d:[d]).length||c.value_not_equal_to&&_.intersection(_.isArray(c.value_not_equal_to)?c.value_not_equal_to:[c.value_not_equal_to],_.isArray(r)?r:[r]).length&&d&&c.value_not_equal_to&&_.intersection(_.isArray(c.value_not_equal_to)?c.value_not_equal_to:[c.value_not_equal_to],_.isArray(d)?d:[d]).length||c.value_includes&&(!r||"string"==typeof r&&!r.includes(c.value_includes)))return void(n[s].failed=!0)}l=vc.getParamSettings(e,s),(_.isUndefined(l)||!_.isUndefined(i.defaults[s])&&i.defaults[s]!==o||_.isUndefined(i.defaults[s])&&""!==o||!_.isUndefined(l.save_always)&&!0===l.save_always)&&(a[s]=o)}})),a},vc.getParamSettings=vc.memoizeWrapper((function(e,t){return e=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[],_.find(e,(function(e){return _.isObject(e)&&e.param_name===t}),this)}),(function(){return arguments[0]+","+arguments[1]})),vc.getParamSettingsByType=vc.memoizeWrapper((function(e,t){return e=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[],_.find(e,(function(e){return _.isObject(e)&&e.type===t}),this)}),(function(){return arguments[0]+","+arguments[1]})),vc.shortcodeHasIdParam=vc.memoizeWrapper((function(e){return vc.getParamSettingsByType(e,"el_id")}))})(),(e=>{vc.shortcode_view=Backbone.View.extend({tagName:"div",$content:"",use_default_content:!1,params:{},events:{"click .column_delete,.vc_control-btn-delete":"deleteShortcode","touchstart .column_delete,.vc_control-btn-delete":"deleteShortcode","click .column_add,.vc_control-btn-prepend":"addElement","touchstart .column_add,.vc_control-btn-prepend":"addElement","click .column_edit,.vc_control-btn-edit, .column_edit_trigger":"editElement","touchstart .column_edit,.vc_control-btn-edit, .column_edit_trigger":"editElement","click .column_clone,.vc_control-btn-clone":"clone","touchstart .column_clone,.vc_control-btn-clone":"clone","click .column_copy,.vc_control-btn-copy":"copy","touchstart .column_copy,.vc_control-btn-copy":"copy","click .column_paste,.vc_control-btn-paste":"paste","touchstart .column_paste,.vc_control-btn-paste":"paste",mousemove:"checkControlsPosition"},removeView:function(){vc.closeActivePanel(this.model),this.remove()},checkControlsPosition:function(){var t,n;this.$controls_buttons&&(n=this.$el.height(),e(window).height()<n)&&(40<(t=e(window).scrollTop()-this.$el.offset().top+e(window).height()/2)&&t<n?this.$controls_buttons.css("top",t):n<t?this.$controls_buttons.css("top",n-40):this.$controls_buttons.css("top",40))},initialize:function(){this.model.bind("destroy",this.removeView,this),this.model.bind("change:params",this.changeShortcodeParams,this),this.model.bind("change_parent_id",this.changeShortcodeParent,this),this.createParams()},hasUserAccess:function(){var e=this.model.get("shortcode");return-1<_.indexOf(["vc_row","vc_column","vc_row_inner","vc_column_inner"],e)||!!_.every(vc.roles.current_user,(function(t){return!(!_.isUndefined(vc.roles[t])&&!_.isUndefined(vc.roles[t].shortcodes)&&_.isUndefined(vc.roles[t].shortcodes[e]))}))},canCurrentUser:function(e){var t=this.model.get("shortcode");return void 0===e||"all"===e?vc_user_access().shortcodeAll(t):vc_user_access().shortcodeEdit(t)},createParams:function(){var e=this.model.get("shortcode");e=_.isObject(vc.map[e])&&_.isArray(vc.map[e].params)?vc.map[e].params:[];this.model.get("params"),this.params={},_.each(e,(function(e){this.params[e.param_name]=e}),this)},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper > .vc_container_for_children, > .vc_element-wrapper > .vc_container_for_children")},setEmpty:function(){},unsetEmpty:function(){},checkIsEmpty:function(){this.model.get("parent_id")&&vc.app.views[this.model.get("parent_id")].checkIsEmpty()},html2element:function(t){var n={};t=vc.template(t),t=e(t(this.model.toJSON()).trim());_.each(t.get(0).attributes,(function(e){n[e.name]=e.value})),this.$el.attr(n).html(t.html()),this.setContent(),this.renderContent()},render:function(){var t=e("#vc_shortcode-template-"+this.model.get("shortcode"));return t.is("script")&&this.html2element(t.html()),(this.model.view=this).$controls_buttons=this.$el.find(".vc_controls > :first"),this},renderContent:function(){return this.$el.attr("data-model-id",this.model.get("id")),this.$el.data("model",this.model),this},changedContent:function(){},_loadDefaults:function(){var e=this.model.get("shortcode");!vc.shortcodes.where({parent_id:this.model.get("id")}).length&&!0===this.use_default_content&&_.isObject(vc.map[e])&&_.isString(vc.map[e].default_content)&&vc.map[e].default_content.length&&(this.use_default_content=!1,vc.shortcodes.createFromString(vc.map[e].default_content,this.model))},_callJsCallback:function(){var e=this.model.get("shortcode");_.isObject(vc.map[e])&&_.isObject(vc.map[e].js_callback)&&!_.isUndefined(vc.map[e].js_callback.init)&&(e=vc.map[e].js_callback.init,window[e](this.$el))},ready:function(){return this._loadDefaults(),this._callJsCallback(),this.model.get("parent_id")&&_.isObject(vc.app.views[this.model.get("parent_id")])&&vc.app.views[this.model.get("parent_id")].changedContent(this),_.defer(_.bind((function(){vc.events.trigger("shortcodeView:ready",this),vc.events.trigger("shortcodeView:ready:"+this.model.get("shortcode"),this)}),this)),this},addShortcode:function(e,t){var n=_.last(vc.shortcodes.filter((function(e){return e.get("parent_id")===this.get("parent_id")&&parseFloat(e.get("order"))<parseFloat(this.get("order"))}),e.model));n?e.render().$el.insertAfter("[data-model-id="+n.id+"]"):"append"===t?this.$content.append(e.render().el):this.$content.prepend(e.render().el)},changeShortcodeParams:function(t){var n=t.get("shortcode"),i=t.get("params"),a=vc.map[n];_.defer((function(){vc.events.trigger("backend.shortcodeViewChangeParams:"+n)})),(_.isArray(a.params)||_.isObject(a.params))&&_.each(a.params,(function(t){var n,a,o=t.param_name,s=i[o],c=this.$el.find("> .wpb_element_wrapper, > .vc_element-wrapper"),r=s;o=c.children(".admin_label_"+o);_.isObject(vc.atts[t.type])&&_.isFunction(vc.atts[t.type].render)&&(s=vc.atts[t.type].render.call(this,t,s)),c.children("."+t.param_name).is("input,textarea,select")?c.children("[name="+t.param_name+"]").val(s):c.children("."+t.param_name).is("iframe")?c.children("[name="+t.param_name+"]").attr("src",s):c.children("."+t.param_name).is("img")?(n=c.children("[name="+t.param_name+"]"),s&&s.match(/^\d+$/)?e.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:s,size:"thumbnail",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done((function(e){n.attr("src",e)})):s&&n.attr("src",s)):c.children("[name="+t.param_name+"]").html(s?vc_wpautop(s):""),o.length&&(""===s||_.isUndefined(s)?o.hide().addClass("hidden-label"):(_.isObject(t.value)&&!_.isArray(t.value)&&"checkbox"===t.type?(a=_.invert(t.value),r=_.map(s.split(/[\s]*\,[\s]*/),(function(e){return _.isString(a[e])?a[e]:e})).join(", ")):_.isObject(t.value)&&!_.isArray(t.value)&&(a=_.invert(t.value),r=_.isString(a[s])?a[s]:s),o.html("<label>"+o.find("label").text()+"</label>: "+_.escape(r)),o.show().removeClass("hidden-label")))}),this),a=vc.app.views[t.get("parent_id")],!1!==t.get("parent_id")&&_.isObject(a)&&a.checkIsEmpty()},changeShortcodeParent:function(t){var n;if(!1===this.model.get("parent_id"))return t;t=e("[data-model-id="+this.model.get("parent_id")+"]"),n=vc.app.views[this.model.get("parent_id")],this.$el.appendTo(t.find("> .wpb_element_wrapper > .wpb_column_container, > .vc_element-wrapper > .wpb_column_container")),n.checkIsEmpty()},deleteShortcode:function(e){_.isObject(e)&&e.preventDefault(),this.model.destroy()},addElement:function(t){_.isObject(t)&&t.preventDefault(),vc.add_element_block_view.render(this.model,!_.isObject(t)||!e(t.currentTarget).closest(".bottom-controls").hasClass("bottom-controls"))},editElement:function(e){_.isObject(e)&&e.preventDefault(),vc.active_panel&&vc.active_panel.model&&this.model&&(!vc.active_panel.model||!this.model||vc.active_panel.model.get("id")===this.model.get("id"))||(vc.closeActivePanel(),vc.edit_element_block_view.render(this.model))},clone:function(e){return _.isObject(e)&&(e.preventDefault(),"touchstart"===e.type)&&e.stopPropagation(),e=this.cloneModel(this.model,this.model.get("parent_id")),window.vc.latestAddedElement=e},copy:function(e){return _.isObject(e)&&(e.preventDefault(),e.currentTarget.focus()),vc.copyShortcode(this.model)},paste:function(e){return _.isObject(e)&&e.preventDefault(),vc.pasteShortcode(this.model)},cloneModel:function(e,t,n){var i="number"==typeof n?n:vc.utils.getMidpointOrder(e),a=_.extend({},e.get("params")),o=e.get("shortcode"),s=vc.shortcodes.create({shortcode:o,id:window.vc_guid(),parent_id:t,order:i,cloned:!0,cloned_from:e.toJSON(),params:a});return _.each(vc.shortcodes.where({parent_id:e.id}),(function(e){this.cloneModel(e,s.get("id"),!0===n?e.get("order"):void 0)}),this),s},remove:function(){this.$content&&this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content&&this.$content.data("uiDroppable")&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.vc.shortcode_view.__super__.remove.call(this)}}),vc.shortcodes.on("sync",(function(e){_.isObject(e)&&!_.isEmpty(e.models)&&_.each(e.models,(function(e){vc.events.triggerShortcodeEvents("sync",e)}))})),vc.shortcodes.on("add",(function(e){_.isObject(e)&&vc.events.triggerShortcodeEvents("add",e)}))})(window.jQuery),(e=>{vc.showMessage=function(t,n,i,a){vc.message_timeout&&(e(".vc_message").remove(),window.clearTimeout(vc.message_timeout)),n=n||"success",i=i||1e4;var o=window.vc_mode&&"admin_page"===window.vc_mode?".metabox-composer-content":"body",s=(a=a||o,e('<div class="vc_message '+n+'" style="z-index: 999;">'+t+"</div>").prependTo(e(a)));s.fadeIn(500),vc.message_timeout=window.setTimeout((function(){s.slideUp(500,(function(){e(this).remove()})),vc.message_timeout=!1}),i)},window.vc_user_access&&!window.vc_user_access().partAccess("unfiltered_html")&&vc.showMessage(window.i18nLocale.unfiltered_html_access,"type-error",15e3)})(window.jQuery),(e=>{vc.saved_custom_css=!1,vc.createPreLoader=function(){e("#vc_preloader").show()},vc.removePreLoader=function(){e("#vc_preloader").hide()},vc.createOverlaySpinner=function(){vc.$overlaySpinner=e("#vc_overlay_spinner").show()},vc.removeOverlaySpinner=function(){vc.$overlaySpinner&&vc.$overlaySpinner.hide()},vc.visualComposerView=Backbone.View.extend({el:e("#wpb_wpbakery"),views:{},isEditorInFocus:!1,isKeydownEventAssigned:!1,disableFixedNav:!1,dummyNav:null,events:{"click #wpb-add-new-row":"createRow","click #vc_post-settings-button":"editSettings","click #vc_custom-code-button":"openCustomCode",'click #vc_add-new-element, [data-vc-element="add-element-action"]':"addElement","click #vc_fullscreen-button":"enterFullscreen","click #vc_windowed-button":"leaveFullscreen","click #vc_seo-button":"openSeo",'click [data-vc-element="add-text-block-action"]':"addTextBlock","click .wpb_switch-to-composer":"switchComposer","click #vc_templates-editor-button":"openTemplatesWindow","click #vc_templates-more-layouts":"openTemplatesWindow","click .vc_template[data-template_id] > .wpb_wrapper":"loadDefaultTemplate","click #wpb-save-post":"save","click .vc_control-preview":"preview","dragover .metabox-composer-content":"handleDragOver","dragleave .metabox-composer-content":"handleDragLeave","drop .metabox-composer-content":"handleDrop","touchstart .wpb_column_container .wpb_content_element":"handleTouchStart"},initializeAccessPolicy:function(){this.accessPolicy={be_editor:vc_user_access().editor("backend_editor"),fe_editor:vc_frontend_enabled&&vc_user_access().editor("frontend_editor"),classic_editor:!vc_user_access().check("backend_editor","disabled_ce_editor",void 0,!0)}},accessPolicyActions:function(){var t,n="",i="";this.accessPolicy.fe_editor&&(n='<a class="wpb_switch-to-front-composer" href="'+e("#wpb-edit-inline").attr("href")+'">'+window.i18nLocale.main_button_title_frontend_editor+"</a>"),this.accessPolicy.classic_editor?this.accessPolicy.be_editor&&(i='<a class="wpb_switch-to-composer" href="#">'+window.i18nLocale.main_button_title_backend_editor+"</a>"):(e("#postdivrich").addClass("vc-disable-editor"),this.accessPolicy.be_editor&&(t=this,_.defer((function(){t.show(),t.status="shown"})))),(n||i||gutenberg)&&(this.$buttonsContainer=e('<div class="composer-switch"><div class="composer-inner-switch"><span class="logo-icon"></span>'+i+n+"</div></div>").insertAfter("div#titlediv"),this.accessPolicy.classic_editor)&&(this.$switchButton=this.$buttonsContainer.find(".wpb_switch-to-composer"),this.$switchButton.on("click",this.switchComposer))},initialize:function(){var t=this;_.bindAll(this,"switchComposer","dropButton","processScroll","updateRowsSorting","updateElementsSorting"),this.accessPolicy=vc.accessPolicy,this.buildRelevance(),vc.events.on("shortcodes:add",vcAddShortcodeDefaultParams,this),vc.events.on("shortcodes:add",vc.atts.addShortcodeIdParam,this),vc.events.on("shortcodes:sync",vc.atts.addShortcodeIdParam,this),vc.events.on("shortcodes:add",this.addShortcode,this),vc.events.on("shortcodes:destroy",this.checkEmpty,this),vc.shortcodes.on("change:params",this.changeParamsEvents,this),vc.shortcodes.on("reset",this.addAll,this),e(document).on("wp-collapse-menu",(function(e,n){"open"===n.state&&t.leaveFullscreen()})),this.render()},changeParamsEvents:function(e){vc.events.triggerShortcodeEvents("update",e)},render:function(){return this.$buttonsContainer=e(".composer-switch"),this.$switchButton=this.$buttonsContainer.find(".wpb_switch-to-composer"),this.$vcType=e("#wpb_vc_editor_type"),this.$vcStatus=e("#wpb_vc_js_status"),this.$metablock_content=e(".metabox-composer-content"),this.$content=e("#wpbakery_content"),this.$post=e("#postdivrich"),this.$loading_block=e("#vc_logo"),vc.add_element_block_view=new vc.AddElementUIPanelBackendEditor({el:"#vc_ui-panel-add-element"}),vc.edit_element_block_view=new vc.EditElementUIPanel({el:"#vc_ui-panel-edit-element"}),vc.templates_panel_view=new vc.TemplateWindowUIPanelBackendEditor({el:"#vc_ui-panel-templates"}),vc.post_settings_view=new vc.PostSettingsUIPanelBackendEditor({el:"#vc_ui-panel-post-settings"}),vc.preset_panel_view=new vc.PresetSettingsUIPanelFrontendEditor({el:"#vc_ui-panel-preset"}),vc.post_seo_view=vc.PostSettingsSeoUIPanel&&new vc.PostSettingsSeoUIPanel({el:"#vc_ui-panel-post-seo"}),vc.custom_code_view=new vc.CustomCodeUIPanelBackendEditor({el:"#vc_ui-panel-custom-code"}),this.setSortable(),vc.is_mobile=0<e("body.mobile").length,vc.saved_custom_css=e("#wpb_custom_post_css_field").val(),vc.updateSettingsBadge(),_.defer((function(){vc.events.trigger("app.render")})),e("body").on("click",e.proxy(this.handleBodyClick,this)),this.$vcStatus.val(!0),this},addAll:function(){this.views={},this.$content.removeClass("loading").empty(),this.addChild(!1),this.checkEmpty(),this.$loading_block.removeClass("vc_ui-wp-spinner"),this.$metablock_content.removeClass("vc_loading-shortcodes"),_.defer((function(){vc.events.trigger("app.addAll")}))},addChild:function(e){_.each(vc.shortcodes.where({parent_id:e}),(function(e){this.appendShortcode(e),this.addChild(e.get("id"))}),this),this.setSortable()},getView:function(e){var t=new(_.isObject(vc.map[e.get("shortcode")])&&_.isString(vc.map[e.get("shortcode")].js_view)&&vc.map[e.get("shortcode")].js_view.length&&!_.isUndefined(window[window.vc.map[e.get("shortcode")].js_view])?window[window.vc.map[e.get("shortcode")].js_view]:vc.shortcode_view)({model:e});return e.set({view:t}),t},setDraggable:function(){e("#wpb-add-new-element, #wpb-add-new-row").draggable({helper:function(){return e('<div id="drag_placeholder"></div>').appendTo("body")},zIndex:99999,cursor:"move",revert:"invalid",start:function(){e("#drag_placeholder").addClass("column_placeholder").html(window.i18nLocale.drag_drop_me_in_column)}})},setDropable:function(){this.$content.droppable({greedy:!0,accept:".dropable_el,.dropable_row",hoverClass:"wpb_ui-state-active",drop:this.dropButton})},dropButton:function(e,t){t.draggable.is("#wpb-add-new-element")?this.addElement():t.draggable.is("#wpb-add-new-row")&&this.createRow()},appendShortcode:function(e){var t=this.getView(e),n=_.extend(vc.getDefaults(e.get("shortcode")),e.get("params"));e.set("params",n,{silent:!0}),n=!1!==e.get("parent_id")&&this.views[e.get("parent_id")],this.views[e.id]=t,e.get("parent_id")&&this.views[e.get("parent_id")].unsetEmpty(),n?n.addShortcode(t,"append"):this.$content.append(t.render().el),t.ready(),t.changeShortcodeParams(e),t.checkIsEmpty(),this.setNotEmpty()},addShortcode:function(e){var t,n=_.extend(vc.getDefaults(e.get("shortcode")),e.get("params")),i=(e.set("params",n,{silent:!0}),t=this.getView(e),n=!1!==e.get("parent_id")&&this.views[e.get("parent_id")],t.use_default_content=!0!==e.get("cloned"),this.views[e.id]=t,this);n?(n.addShortcode(t),n.checkIsEmpty(),_.defer((function(){t.changeShortcodeParams&&t.changeShortcodeParams(e),t.ready(),t.checkIsEmpty(),i.setSortable(),i.setNotEmpty()}))):(this.addRow(t),_.defer((function(){t.changeShortcodeParams&&t.changeShortcodeParams(e),t.ready(),t.checkIsEmpty(),"vc_section"===t.model.get("shortcode")&&i.setNotEmpty()})))},addRow:function(e){var t=_.last(vc.shortcodes.filter((function(e){return!1===e.get("parent_id")&&parseFloat(e.get("order"))<parseFloat(this.get("order"))}),e.model));t?e.render().$el.insertAfter("[data-model-id="+t.id+"]"):this.$content.append(e.render().el)},addTextBlock:function(e){var t,n;return e&&e.preventDefault&&e.preventDefault(),e=vc.shortcodes.create({shortcode:"vc_row",params:{}}),t=vc.shortcodes.create({shortcode:"vc_column",params:{width:"1/1"},parent_id:e.id,root_id:e.id}),n=vc.getDefaults("vc_column_text"),vc.shortcodes.create({shortcode:"vc_column_text",parent_id:t.id,root_id:e.id,params:n})},createRow:function(){var e=vc.shortcodes.create({shortcode:"vc_row",params:{}});return vc.shortcodes.create({shortcode:"vc_column",params:{width:"1/1"},parent_id:e.id,root_id:e.id}),e},addElement:function(e){e&&e.preventDefault&&e.preventDefault(),vc.add_element_block_view.render(!1)},openTemplatesWindow:function(t){t&&t.preventDefault&&t.preventDefault(),e(t.currentTarget).is("#vc_templates-more-layouts")&&vc.templates_panel_view.once("show",(function(){e('[data-vc-ui-element-target="[data-tab=default_templates]"]').click()})),vc.templates_panel_view.render().show()},loadDefaultTemplate:function(e){e&&e.preventDefault&&e.preventDefault(),vc.templates_panel_view.loadTemplate(e)},editSettings:function(e){e&&e.preventDefault&&e.preventDefault(),vc.post_settings_view.render().show()},enterFullscreen:function(){var t=e("body");t.hasClass("folded")?(t.data("vcKeepMenuFolded",!0),t.addClass("vc_fullscreen")):t.addClass("vc_fullscreen folded"),e("#vc_windowed-button").show(),e("#vc_fullscreen-button").hide()},leaveFullscreen:function(){var t=e("body");t.hasClass("vc_fullscreen")&&(t.data("vcKeepMenuFolded")?(t.removeClass("vc_fullscreen"),t.removeData("vcKeepMenuFolded")):t.removeClass("vc_fullscreen folded"),e("#vc_windowed-button").hide(),e("#vc_fullscreen-button").show())},sortingStarted:function(){e("#wpbakery_content").addClass("vc_sorting-started")},sortingStopped:function(t,n){var i=n.item.data("element_type"),a=n.placeholder.closest("[data-element_type]").data("element_type")||"";vc.check_relevance(a,i)&&a!=i||(n.placeholder.addClass("vc_hidden-placeholder"),e(t.target).sortable("cancel")),e("#wpbakery_content").removeClass("vc_sorting-started")},updateElementsSorting:function(t,n){_.defer((function(t){var i,a=n.item.parent().closest("[data-model-id]").data("model"),o=n.item.data("model"),s=t.views[a.id].$content.find("> [data-model-id]"),c=0;_.isNull(n.sender)||(i=o.get("parent_id"),vc.storage.lock(),o.save({parent_id:a.id}),i&&t.views[i].checkIsEmpty(),t.views[a.id].checkIsEmpty()),s.each((function(){var t=e(this).data("model");vc.storage.lock(),t.save({order:c++})})),o.save()}),this)},updateRowsSorting:function(t,n){_.defer((function(i){var a=n.item.parent(),o=!!(o=a.closest("[data-model-id]")).length&&o.data("model").get("id"),s=n.item.data("model"),c=n.item.data("element_type"),r=n.item.parent().closest("[data-element_type]").data("element_type")||"";vc.check_relevance(r,c)&&r!=c?(r=s.get("parent_id"),a.find(i.rowSortableSelector).each((function(){var t=e(this).index();vc.storage.lock(),e(this).data("model").save({order:t})})),s.save({parent_id:o}),r&&i.views[r].checkIsEmpty(),o&&i.views[o].checkIsEmpty()):e(t.target).sortable("cancel")}),this)},renderPlaceholder:function(t,n){n=e(n).data("element_type");var i=_.isObject(vc.map[n])&&(_.isBoolean(vc.map[n].is_container)&&!0===vc.map[n].is_container||!_.isEmpty(vc.map[n].as_parent));return e('<div class="vc_helper vc_helper-'+n+'"><i class="vc_general vc_element-icon'+(vc.map[n].icon?" "+vc.map[n].icon:"")+'"'+(i?' data-is-container="true"':"")+"></i> "+vc.map[n].name+"</div>").prependTo("body")},rowSortableSelector:"> .wpb_vc_row, > .vc_main-sortable-element",setSortable:function(){if(vc_user_access().partAccess("dragndrop"))return e(".wpb_main_sortable").sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder",cursor:"move",connectWith:".vc_section_container",items:this.rowSortableSelector,handle:".vc_column-move",cancel:".vc-non-draggable-row",distance:.5,start:this.sortingStarted,stop:this.sortingStopped,update:this.updateRowsSorting,tolerance:"intersect",over:function(e,t){var n=t.item.data("element_type"),i=t.placeholder.closest("[data-element_type]").data("element_type")||"";if(!vc.check_relevance(i,n)||i==n)return t.placeholder.addClass("vc_hidden-placeholder"),!1;t.placeholder.css({maxWidth:t.placeholder.parent().width()})},out:function(e,t){t.placeholder.removeClass("vc_hidden-placeholder"),t.placeholder.css({maxWidth:t.placeholder.parent().width()})}}),e(".wpb_column_container").sortable({forcePlaceholderSize:!0,forceHelperSize:!1,connectWith:".wpb_column_container",placeholder:"vc_placeholder",items:"> div.wpb_sortable,> div.vc-non-draggable",helper:this.renderPlaceholder,distance:3,cancel:".vc-non-draggable",scroll:!0,scrollSensitivity:70,cursor:"move",cursorAt:{top:20,left:16},tolerance:"intersect",start:function(){e("#wpbakery_content").addClass("vc_sorting-started"),e(".vc_not_inner_content").addClass("dragging_in")},stop:function(t,n){e("#wpbakery_content").removeClass("vc_sorting-started"),e(".dragging_in").removeClass("dragging_in");var i=n.item.data("element_type"),a=n.item.parent().closest("[data-element_type]").data("element_type")||"",o=!!_.isUndefined(vc.map[a].allowed_container_element)||vc.map[a].allowed_container_element;vc.check_relevance(a,i)&&a!=i||e(this).sortable("cancel"),_.isObject(vc.map[i])&&(_.isBoolean(vc.map[i].is_container)&&!0===vc.map[i].is_container||!_.isEmpty(vc.map[i].as_parent))&&!0!==o&&o!==n.item.data("element_type").replace(/_inner$/,"")&&e(this).sortable("cancel"),e(".vc_sorting-empty-container").removeClass("vc_sorting-empty-container")},update:this.updateElementsSorting,over:function(e,t){var n=t.item.data("element_type"),i=t.placeholder.closest("[data-element_type]").data("element_type"),a=!!_.isUndefined(vc.map[i].allowed_container_element)||vc.map[i].allowed_container_element;vc.check_relevance(i,n)&&i!=n||t.placeholder.addClass("vc_hidden-placeholder"),_.isObject(vc.map[n])&&(_.isBoolean(vc.map[n].is_container)&&!0===vc.map[n].is_container||!_.isEmpty(vc.map[n].as_parent))&&!0!==a&&a!==t.item.data("element_type").replace(/_inner$/,"")&&t.placeholder.addClass("vc_hidden-placeholder"),_.isNull(t.sender)||!t.sender.length||t.sender.find("> [data-element_type]:not(.ui-sortable-helper):visible").length||t.sender.addClass("vc_sorting-empty-container"),t.placeholder.css({maxWidth:t.placeholder.parent().width()})},out:function(e,t){t.placeholder.removeClass("vc_hidden-placeholder"),t.placeholder.css({maxWidth:t.placeholder.parent().width()})}}).disableSelection(),this},setNotEmpty:function(){e("#vc_no-content-helper").addClass("vc_not-empty"),e("#vc_navbar").addClass("vc_not-empty")},setIsEmpty:function(){vc.views={},e("#vc_no-content-helper").removeClass("vc_not-empty"),e("#vc_navbar").removeClass("vc_not-empty")},checkEmpty:function(e){if(_.isObject(e)&&!1!==e.get("parent_id")&&e.get("parent_id")!=e.id){if(!(e=this.views[e.get("parent_id")]))return;e.checkIsEmpty()}0===vc.shortcodes.length?this.setIsEmpty():this.setNotEmpty()},switchComposer:function(e){e&&e.preventDefault&&e.preventDefault(),"shown"===this.status?(this.accessPolicy.can("classic_editor")&&(_.isUndefined(this.$switchButton)||this.$switchButton.text(window.i18nLocale.main_button_title_backend_editor),_.isUndefined(this.$buttonsContainer)||this.$buttonsContainer.removeClass("vc_backend-status")),this.close(),this.status="closed"):(this.accessPolicy.can("classic_editor")&&(_.isUndefined(this.$switchButton)||this.$switchButton.text(window.i18nLocale.main_button_title_revert),_.isUndefined(this.$buttonsContainer)||this.$buttonsContainer.addClass("vc_backend-status")),this.show(),this.status="shown")},show:function(){this.$el.show(),this.$post.addClass("vc-disable-editor"),this.$vcType.val("backend"),this.navOnScroll(),this.hideOtherEditors(),vc.storage.isContentChanged()&&(vc.undoRedoApi&&vc.undoRedoApi.add(vc.storage.getContent()),vc.app.setLoading(),vc.app.views={},_.defer((function(){vc.shortcodes.fetch({reset:!0}),vc.events.trigger("backendEditor.show")}))),this.switchEditorsUrlParams("wpb-classic-editor","wpb-backend-editor")},close:function(){this.$vcType.val("classic"),this.$el.hide(),_.isObject(window.editorExpand)&&(_.delay((function(){window.scrollBy(0,-1)}),17),_.delay((function(){window.scrollBy(0,1)}),17)),this.$post.removeClass("vc-disable-editor"),_.defer((function(){vc.events.trigger("backendEditor.close")})),this.switchEditorsUrlParams("wpb-backend-editor","wpb-classic-editor")},switchEditorsUrlParams:function(e,t){var n=new URL(window.location.href);n.searchParams.delete(e),e=n.href.replace(/#$/,"");n.searchParams.has(t)||(-1===e.indexOf("?")?window.history.replaceState(null,"",e+"?"+t):window.history.replaceState(null,"",e+"&"+t))},hideOtherEditors:function(){e("#elementor-editor").insertAfter("#wpb_wpbakery"),e("#elementor-switch-mode").insertAfter("#wpb_wpbakery")},setLoading:function(){this.setNotEmpty(),this.$loading_block.addClass("vc_ui-wp-spinner"),this.$metablock_content.addClass("vc_loading-shortcodes")},checkVcStatus:function(){try{vc.accessPolicy&&"function"==typeof vc.accessPolicy.can?this.shouldSwitchComposer()&&this.switchComposer():console.warn("Access policy is not properly initialized.")}catch(e){console.error("Error in checkVcStatus method:",e)}},shouldSwitchComposer:function(){var e=(e=(t=new URL(window.location.href)).searchParams.get("action"))&&"vc_load_template_preview"===e,t=t.searchParams.has("wpb-backend-editor");t=this.$vcType&&"backend"===this.$vcType.val()||t;return vc.accessPolicy.can("be_editor")&&(!vc.accessPolicy.can("classic_editor")||t||e)},setNavTop:function(){this.navTop=this.$nav.length&&this.$nav.offset().top-28},save:function(){e("#wpb-save-post p").text(window.i18nLocale.loading),e("#publish").click()},preview:function(){e("#post-preview").click()},navOnScroll:function(){this.$nav=e("#vc_navbar"),this.setNavTop(),this.processScroll(),e(window).off("scroll.composer resize.composer").on("scroll.composer resize.composer",this.processScroll)},processScroll:function(t){var n,i;!0===this.disableFixedNav?this.$nav.removeClass("vc_subnav-fixed"):((!this.navTop||this.navTop<0)&&this.setNavTop(),n=this.$nav.hasClass("vc_subnav-fixed"),this.scrollTop=parseInt(e(window).scrollTop()-10),0<this.navTop&&this.scrollTop>=this.navTop&&!this.isFixed?(this.isFixed=1,!this.dummyNav&&1005<window.innerWidth&&(i=e('<div class="vc-dummy-nav" style="height:'+this.$nav.outerHeight()+'px"></div>'),this.$nav.after(i),this.dummyNav=i),this.$nav.addClass("vc_subnav-fixed")):(this.scrollTop<=this.navTop&&this.isFixed&&1005<window.innerWidth||1005<window.innerWidth&&10===this.scrollTop)&&1066<=window.innerWidth&&(this.isFixed=0,this.dummyNav&&1005<window.innerWidth&&(this.dummyNav.remove(),this.dummyNav=!1),this.$nav.removeClass("vc_subnav-fixed"),this.setNavTop()),t&&"resize"===t.type&&this.scrollTop<this.navTop&&(window.innerWidth<1066&&!n?this.$nav.addClass("vc_subnav-fixed"):1066<window.innerWidth&&n&&this.$nav.removeClass("vc_subnav-fixed")),0!==this.$nav.length&&(window.innerWidth<=600?46<window.scrollY?"0px"!==this.$nav.css("top")&&this.$nav.css("top","0"):(i=46-window.scrollY+"px",this.$nav.css("top")!==i&&this.$nav.css("top",i)):""!==this.$nav.css("top")&&this.$nav.css("top","")))},buildRelevance:function(){vc.shortcode_relevance={},_.map(vc.map,(function(e){_.isObject(e.as_parent)&&_.isString(e.as_parent.only)&&(vc.shortcode_relevance["parent_only_"+e.base]=e.as_parent.only.replace(/\s/g,"").split(",")),_.isObject(e.as_parent)&&_.isString(e.as_parent.except)&&(vc.shortcode_relevance["parent_except_"+e.base]=e.as_parent.except.replace(/\s/g,"").split(",")),_.isObject(e.as_child)&&_.isString(e.as_child.only)&&(vc.shortcode_relevance["child_only_"+e.base]=e.as_child.only.replace(/\s/g,"").split(",")),_.isObject(e.as_child)&&_.isString(e.as_child.except)&&(vc.shortcode_relevance["child_except_"+e.base]=e.as_child.except.replace(/\s/g,"").split(","))})),vc.check_relevance=function(e,t){return!(_.isArray(vc.shortcode_relevance["parent_only_"+e])&&!_.contains(vc.shortcode_relevance["parent_only_"+e],t)||_.isArray(vc.shortcode_relevance["parent_except_"+e])&&_.contains(vc.shortcode_relevance["parent_except_"+e],t)||_.isArray(vc.shortcode_relevance["child_only_"+t])&&!_.contains(vc.shortcode_relevance["child_only_"+t],e)||_.isArray(vc.shortcode_relevance["child_except_"+t])&&_.contains(vc.shortcode_relevance["child_except"+t],e))}},handleEditorPaste:function(e){e=e.originalEvent.clipboardData.getData("text/plain")||"",vc.pasteShortcode(!1,!1,e)},handleBodyClick:function(t){this.isEditorInFocus=!!e(t.target).closest("#wpb_wpbakery, .vc_ui-panel-window").length,this.isEditorInFocus&&!this.isKeydownEventAssigned?(e("body").on("paste",this.handleEditorPaste),this.isKeydownEventAssigned=!0):!this.isEditorInFocus&&this.isKeydownEventAssigned&&(e("body").off("paste",this.handleEditorPaste),this.isKeydownEventAssigned=!1)},openSeo:function(e){e&&e.preventDefault&&e.preventDefault(),vc.post_seo_view.render()},handleDragOver:function(e){vc.imageDrop&&vc.imageDrop.handleDragOver(e)},handleDragLeave:function(e){vc.imageDrop&&vc.imageDrop.handleDragLeave(e)},handleDrop:function(e){vc.imageDrop&&vc.imageDrop.handleDrop(e)},handleTouchStart:function(t){(t=e(t.target).closest(".wpb_content_element")).length&&(this.$el.find(".wpb_content_element.vc_active").removeClass("vc_active"),t.addClass("vc_active"))},openCustomCode:function(e){e&&e.preventDefault&&e.preventDefault(),vc.custom_code_view.render().show()}}),e((function(){var t=e("#wpb_wpbakery");t.is("div")&&(vc.app=new vc.visualComposerView({el:t}),vc.accessPolicy.can("be_editor")&&!vc_user_access().isBlockEditorIsEnabled()&&vc.app.checkVcStatus(),e("#post").on("submit",(function(){!vc.storage.isChanged||document.activeElement&&"post-preview"===document.activeElement.id||(vc.storage.isChanged=!1,window.jQuery(window).off("beforeunload.vcSave"))})),e(window).on("beforeunload",(function(){if(vc.storage.isChanged)return window.i18nLocale.confirm_to_leave})),vc.events.on("vc:backend_editor:show",(function(){vc.app.show(),vc.app.status="shown"})),vc.events.on("vc:backend_editor:switch",(function(){vc.app.switchComposer()})))}))})(window.jQuery),(e=>{var t=vc.shortcodes,n=new RegExp("background:\\s*(.+?)\\s+url\\(\\s*['\"]?(.*?)['\"]?\\s*\\)"),i=new RegExp("background\\-image:\\s*url\\(([^)]+)\\)"),a=new RegExp("background-color:\\s*([^;!]+)");window.VcRowView=vc.shortcode_view.extend({change_columns_layout:!1,events:{'click > .vc_controls [data-vc-control="delete"]':"deleteShortcode",'touchstart > .vc_controls [data-vc-control="delete"]':"deleteShortcode","click > .vc_controls .set_columns":"setColumns","touchstart > .vc_controls .set_columns":"setColumns",'click > .vc_controls [data-vc-control="add"]':"addElement",'touchstart > .vc_controls [data-vc-control="add"]':"addElement",'click > .vc_controls [data-vc-control="edit"]':"editElement",'touchstart > .vc_controls [data-vc-control="edit"]':"editElement",'click > .vc_controls [data-vc-control="clone"]':"clone",'touchstart > .vc_controls [data-vc-control="clone"]':"clone",'click > .vc_controls [data-vc-control="copy"]':"copy",'touchstart > .vc_controls [data-vc-control="copy"]':"copy",'click > .vc_controls [data-vc-control="paste"]':"paste",'touchstart > .vc_controls [data-vc-control="paste"]':"paste",'click > .vc_controls [data-vc-control="move"]':"moveElement",'touchstart > .vc_controls [data-vc-control="move"]':"moveElement",'click > .vc_controls [data-vc-control="toggle"]':"toggleElement",'touchstart > .vc_controls [data-vc-control="toggle"]':"toggleElement","click > .wpb_element_wrapper .vc_controls":"openClosedRow","touchstart > .wpb_element_wrapper .vc_controls":"openClosedRow","touchstart > .vc_controls .vc_row_layouts":"toggleRowLayouts"},convertRowColumns:function(e){var n=e.toString().split(/_/),i=t.where({parent_id:this.model.id}),a=[],o=[],s="";return _.each(n,(function(e,n){var c;e=_.map(e.toString().split(""),(function(e){return parseInt(e,10)}));s=3<e.length?e[0]+""+e[1]+"/"+e[2]+e[3]:2<e.length?e[0]+"/"+e[1]+e[2]:e[0]+"/"+e[1],o.push(s),e=_.extend(_.isUndefined(i[n])?{}:i[n].get("params"),{width:s}),vc.storage.lock(),c=t.create({shortcode:this.getChildTag(),params:e,parent_id:this.model.id}),_.isObject(i[n])&&_.each(t.where({parent_id:i[n].id}),(function(e){vc.storage.lock(),e.save({parent_id:c.id}),vc.storage.lock(),e.trigger("change_parent_id")})),a.push(c)}),this),n.length<i.length&&_.each(i.slice(n.length),(function(e){_.each(t.where({parent_id:e.id}),(function(e){vc.storage.lock(),e.save({parent_id:_.last(a).id}),vc.storage.lock(),e.trigger("change_parent_id")}))})),_.each(i,(function(e){vc.storage.lock(),e.destroy()}),this),this.model.save(),this.setActiveLayoutButton(""+e),o},changeShortcodeParams:function(e){window.VcRowView.__super__.changeShortcodeParams.call(this,e),this.buildDesignHelpers(),this.setRowClasses()},setRowClasses:function(){var e=this.model.getParam("disable_element"),t="vc_hidden-xs vc_hidden-sm  vc_hidden-md vc_hidden-lg";this.disable_element_class&&this.$el.removeClass(this.disable_element_class),_.isEmpty(e)||(this.$el.addClass(t),this.disable_element_class=t)},designHelpersSelector:"> .vc_controls .column_toggle",controlSection:".vc_controls.vc_controls-row.controls_row.vc_clearfix",buildDesignHelpers:function(){var t,o,s,c=this.model.getParam("css"),r=this.$el.find(this.designHelpersSelector),l=this.$el.find(this.controlSection);this.$el.find("> .vc_controls .vc_row_color").remove(),this.$el.find("> .vc_controls .vc_row_image").remove(),this.$el.find("> .vc_row_title").remove(),(s=c.match(i))&&!_.isUndefined(s[1])&&(t=s[1]),(s=c.match(a))&&!_.isUndefined(s[1])&&(o=s[1]),(s=c.match(n))&&!_.isUndefined(s[1])&&(o=s[1],t=s[2]),c=this.model.getParam("el_id"),this.$el.find("> .vc_controls .vc_row-hash-id").remove(),_.isEmpty(c)||e('<span class="vc_row-hash-id"></span>').text("#"+c).insertAfter(r),t&&e('<span class="vc_row_image" style="background-image: url('+t+');" title="'+window.i18nLocale.row_background_image+'"></span>').insertAfter(r),o&&e('<span class="vc_row_color" style="background-color: '+o+'" title="'+window.i18nLocale.row_background_color+'"></span>').insertAfter(r),(s=this.model.getParam("row_title"))&&e('<div class="vc_row_title" >'+s+"</div>").insertBefore(l)},addElement:function(e){e&&e.preventDefault&&e.preventDefault(),t.create({shortcode:this.getChildTag(),params:{},parent_id:this.model.id}),this.setActiveLayoutButton(),this.$el.removeClass("vc_collapsed-row")},getChildTag:function(){return"vc_row_inner"===this.model.get("shortcode")?"vc_column_inner":"vc_column"},sortingSelector:"> [data-element_type=vc_column], > [data-element_type=vc_column_inner]",sortingSelectorCancel:".vc-non-draggable-column",setSorting:function(){var t;vc_user_access().partAccess("dragndrop")&&(1<(t=this).$content.find(this.sortingSelector).length?this.$content.removeClass("wpb-not-sortable").sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder-column",tolerance:"pointer",cursor:"move",items:this.sortingSelector,cancel:this.sortingSelectorCancel,distance:.5,start:function(t,n){e("#wpbakery_content").addClass("vc_sorting-started"),n.placeholder.width(n.item.width())},stop:function(){e("#wpbakery_content").removeClass("vc_sorting-started")},update:function(){var n=e(t.sortingSelector,t.$content);n.each((function(){var t=e(this).data("model"),i=e(this).index();t.set("order",i),n.length-1>i&&vc.storage.lock(),t.save()}))},over:function(e,t){t.placeholder.css({maxWidth:t.placeholder.parent().width()}),t.placeholder.removeClass("vc_hidden-placeholder")},beforeStop:function(){}}):(this.$content.hasClass("ui-sortable")&&this.$content.sortable("destroy"),this.$content.addClass("wpb-not-sortable")))},validateCellsList:function(e){var t,n=[];e=e.replace(/\s/g,"").split("+");return 12===_.reduce(_.map(e,(function(e){var i;return e.match(/^(vc_)?span\d?$/)?!1===(i=vc_convert_column_span_size(e))?1e3:(t=i.split(/\//),n.push(t[0]+""+t[1]),12*parseInt(t[0],10)/parseInt(t[1],10)):e.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)?(t=e.split(/\//),n.push(t[0]+""+t[1]),12*parseInt(t[0],10)/parseInt(t[1],10)):1e4})),(function(e,t){return t+e}),0)&&n.join("_")},setActiveLayoutButton:function(e){e=e||_.map(vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){return(e=e.getParam("width"))?e.replace(/\//,""):"11"})).join("_"),this.$el.find("> .vc_controls .vc_active").removeClass("vc_active"),((e=this.$el.find('> .vc_ [data-cells-mask="'+vc_get_column_mask(e)+'"] [data-cells="'+e+'"], > .vc_controls [data-cells-mask="'+vc_get_column_mask(e)+'"][data-cells="'+e+'"]')).length?e:this.$el.find("> .vc_controls [data-cells-mask=custom]")).addClass("vc_active")},layoutEditor:function(){return _.isUndefined(vc.row_layout_editor)&&(vc.row_layout_editor=new vc.RowLayoutUIPanelBackendEditor({el:e("#vc_ui-panel-row-layout")})),vc.row_layout_editor},setColumns:function(t){var n;_.isObject(t)&&t.preventDefault(),"custom"===(t=e(t.currentTarget)).data("cells")?this.layoutEditor().render(this.model).show():(vc.is_mobile&&!(n=t.parent()).hasClass("vc_visible")&&(n.addClass("vc_visible"),e(document).off("click.vcRowColumnsControl").on("click.vcRowColumnsControl",(function(){n.removeClass("vc_visible")}))),t.is(".vc_active")||(this.change_columns_layout=!0,_.defer((function(e,t){e.convertRowColumns(t)}),this,t.data("cells")))),this.$el.removeClass("vc_collapsed-row")},sizeRows:function(){var t=45;e("> .wpb_vc_column, > .wpb_vc_column_inner",this.$content).each((function(){var n=e(this).find("> .wpb_element_wrapper > .wpb_column_container").css({minHeight:0}).height();t<n&&(t=n)})).each((function(){e(this).find("> .wpb_element_wrapper > .wpb_column_container").css({minHeight:t})}))},ready:function(e){return window.VcRowView.__super__.ready.call(this,e),this},checkIsEmpty:function(){window.VcRowView.__super__.checkIsEmpty.call(this),this.setSorting()},changedContent:function(){if(this.change_columns_layout)return this;this.setActiveLayoutButton()},moveElement:function(e){e&&e.preventDefault&&e.preventDefault()},toggleElement:function(e){e&&e.preventDefault&&e.preventDefault(),this.$el.toggleClass("vc_collapsed-row")},openClosedRow:function(){this.$el.removeClass("vc_collapsed-row")},remove:function(){this.$content&&(this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content.data("uiDroppable"))&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.VcRowView.__super__.remove.call(this)},toggleRowLayouts:function(t){e(t.currentTarget).toggleClass("vc_active")}}),window.VcColumnView=vc.shortcode_view.extend({events:{'click > .vc_controls [data-vc-control="delete"]':"deleteShortcode",'touchstart > .vc_controls [data-vc-control="delete"]':"deleteShortcode",'click > .vc_controls [data-vc-control="add"]':"addElement",'touchstart > .vc_controls [data-vc-control="add"]':"addElement",'click > .vc_controls [data-vc-control="edit"]':"editElement",'touchstart > .vc_controls [data-vc-control="edit"]':"editElement",'click > .vc_controls [data-vc-control="clone"]':"clone",'touchstart > .vc_controls [data-vc-control="clone"]':"clone",'click > .vc_controls [data-vc-control="copy"]':"copy",'touchstart > .vc_controls [data-vc-control="copy"]':"copy",'click > .vc_controls [data-vc-control="paste"]':"paste",'touchstart > .vc_controls [data-vc-control="paste"]':"paste","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty","clicktouchstart > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},current_column_width:!1,initialize:function(e){window.VcColumnView.__super__.initialize.call(this,e),_.bindAll(this,"setDropable","dropButton")},render:function(){return window.VcColumnView.__super__.render.call(this),this.current_column_width=this.model.get("params").width||"1/1",this.$el.attr("data-width",this.current_column_width),this.setEmpty(),this},changeShortcodeParams:function(e){window.VcColumnView.__super__.changeShortcodeParams.call(this,e),this.setColumnClasses(),this.buildDesignHelpers()},designHelpersSelector:"> .vc_controls .column_add",buildDesignHelpers:function(){var t,o,s,c=this.model.getParam("css"),r=this.$el.find(this.designHelpersSelector).get(0);this.$el.find("> .vc_controls .vc_column_color").remove(),this.$el.find("> .vc_controls .vc_column_image").remove(),(t=c.match(i))&&!_.isUndefined(t[1])&&(o=t[1]),(t=c.match(a))&&!_.isUndefined(t[1])&&(s=t[1]),(t=c.match(n))&&!_.isUndefined(t[1])&&(s=t[1],o=t[2]),o&&e('<span class="vc_column_image" style="background-image: url('+o+');" title="'+i18nLocale.column_background_image+'"></span>').insertBefore(r),s&&e('<span class="vc_column_color" style="background-color: '+s+'" title="'+i18nLocale.column_background_color+'"></span>').insertBefore(r)},setColumnClasses:function(){var e,t=this.model.getParam("offset")||"",n=this.model.getParam("width")||"1/1",i=this.convertSize(n);this.current_offset_class&&this.$el.removeClass(this.current_offset_class),this.current_column_width!==n&&(e=this.convertSize(this.current_column_width),this.$el.attr("data-width",n).removeClass(e).addClass(i),this.current_column_width=n),t.match(/vc_col\-sm\-\d+/)&&this.$el.removeClass(i),_.isEmpty(t)||this.$el.addClass(t),this.current_offset_class=t},addToEmpty:function(t){t&&t.preventDefault&&t.preventDefault(),e(t.target).hasClass("vc_empty-container")&&this.addElement(t)},setDropable:function(){return this.$content.droppable({greedy:!0,accept:"vc_column_inner"===this.model.get("shortcode")?".dropable_el":".dropable_el,.dropable_row",hoverClass:"wpb_ui-state-active",drop:this.dropButton}),this},dropButton:function(e,t){t.draggable.is("#wpb-add-new-element")?vc.add_element_block_view({model:{position_to_add:"end"}}).show(this):t.draggable.is("#wpb-add-new-row")&&this.createRow()},setEmpty:function(){this.$el.addClass("vc_empty-column"),"edit"!==vc_user_access().getState("shortcodes")&&this.$content.addClass("vc_empty-container")},unsetEmpty:function(){this.$el.removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")},checkIsEmpty:function(){t.where({parent_id:this.model.id}).length?this.unsetEmpty():this.setEmpty(),window.VcColumnView.__super__.checkIsEmpty.call(this)},createRow:function(){var e=t.create({shortcode:"vc_row_inner",params:{},parent_id:this.model.id});return t.create({shortcode:"vc_column_inner",params:{width:"1/1"},parent_id:e.id}),e},convertSize:function(e){var t="vc_col-sm-",n=(e=e?e.split("/"):[1,1],_.range(1,13)),i=!_.isUndefined(e[0])&&0<=_.indexOf(n,parseInt(e[0],10))&&parseInt(e[0],10);n=!_.isUndefined(e[1])&&0<=_.indexOf(n,parseInt(e[1],10))&&parseInt(e[1],10);return!1!==i&&!1!==n?t+12*i/n:t+"12"},deleteShortcode:function(e){var t,n=this.model.get("parent_id");if(e&&e.preventDefault&&e.preventDefault(),!0!==confirm(window.i18nLocale.press_ok_to_delete_section))return!1;this.model.destroy(),n&&!vc.shortcodes.where({parent_id:n}).length?(t=vc.shortcodes.get(n),_.contains(["vc_column","vc_column_inner"],t.get("shortcode"))||t.destroy()):n&&(t=vc.shortcodes.get(n))&&t.view&&t.view.setActiveLayoutButton&&t.view.setActiveLayoutButton()},remove:function(){this.$content&&this.$content.data("uiSortable")&&this.$content.sortable("destroy"),this.$content&&this.$content.data("uiDroppable")&&this.$content.droppable("destroy"),delete vc.app.views[this.model.id],window.VcColumnView.__super__.remove.call(this)}}),window.VcSectionView=VcColumnView.extend({designHelpersSelector:"> .vc_controls-row .vc_column-edit",setColumnClasses:function(){var e=this.model.getParam("disable_element"),t="vc_hidden-xs vc_hidden-sm  vc_hidden-md vc_hidden-lg";this.disable_element_class&&this.$el.removeClass(this.disable_element_class),_.isEmpty(e)||(this.$el.addClass(t),this.disable_element_class=t)},buildDesignHelpers:function(){var t,o,s,c=this.model.getParam("css"),r=this.$el.find(this.designHelpersSelector);this.$el.find("> .vc_controls-row .vc_row_color").remove(),this.$el.find("> .vc_controls-row .vc_row_image").remove(),(s=c.match(i))&&!_.isUndefined(s[1])&&(t=s[1]),(s=c.match(a))&&!_.isUndefined(s[1])&&(o=s[1]),(s=c.match(n))&&!_.isUndefined(s[1])&&(o=s[1],t=s[2]),c=this.model.getParam("el_id"),this.$el.find("> .vc_controls-row .vc_row-hash-id").remove(),_.isEmpty(c)||e('<span class="vc_row-hash-id"></span>').text("#"+c).insertAfter(r),t&&e('<span class="vc_row_image" style="background-image: url('+t+');" title="'+window.i18nLocale.row_background_image+'"></span>').insertAfter(r),o&&e('<span class="vc_row_color" style="background-color: '+o+'" title="'+window.i18nLocale.row_background_color+'"></span>').insertAfter(r)},checkIsEmpty:function(){window.VcSectionView.__super__.checkIsEmpty.call(this),this.setSorting()},setSorting:function(){var t;vc_user_access().partAccess("dragndrop")&&(t=this).$content.sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder",connectWith:".wpb_main_sortable,.wpb_vc_section .vc_section_container",cursor:"move",items:"> .wpb_vc_row",handle:".vc_column-move",cancel:".vc-non-draggable-row",distance:.5,scroll:!0,scrollSensitivity:70,tolerance:"intersect",update:function(n,i){var a,o=i.item.data("element_type"),s=i.item.parent().closest("[data-element_type]").data("element_type");vc.check_relevance(s,o)&&s!=o&&(a=e("> div.wpb_sortable,> div.vc-non-draggable",t.$content)).each((function(){var t,n=e(this).data("model"),o=e(this).index();n.set("order",o),a.length-1>o&&vc.storage.lock(),_.isNull(i.sender)||(o=i.item.parent().closest("[data-model-id]").data("model"),t=n.get("parent_id"),vc.storage.lock(),n.save({parent_id:o.id}),t&&vc.app.views[t].checkIsEmpty(),vc.app.views[o.id].checkIsEmpty()),n.save()}))},stop:function(t,n){e("#wpbakery_content").removeClass("vc_sorting-started"),e(".dragging_in").removeClass("dragging_in");var i=n.item.data("element_type");n=n.item.parent().closest("[data-element_type]").data("element_type");vc.check_relevance(n,i)&&n!=i||e(this).sortable("cancel"),e(".vc_sorting-empty-container").removeClass("vc_sorting-empty-container")},over:function(e,t){var n=t.item.data("element_type"),i=t.placeholder.closest("[data-element_type]").data("element_type")||"",a=!!_.isUndefined(vc.map[i].allowed_container_element)||vc.map[i].allowed_container_element;return!vc.check_relevance(i,n)||i==n||_.isObject(vc.map[n])&&(_.isBoolean(vc.map[n].is_container)&&!0===vc.map[n].is_container||!_.isEmpty(vc.map[n].as_parent))&&!0!==a&&a!==t.item.data("element_type").replace(/_inner$/,"")?(t.placeholder.addClass("vc_hidden-placeholder"),!1):(_.isNull(t.sender)||!t.sender.length||t.sender.find("> [data-element_type]:not(.ui-sortable-helper):visible").length||t.sender.addClass("vc_sorting-empty-container"),void t.placeholder.css({maxWidth:t.placeholder.parent().width()}))},out:function(e,t){t.placeholder.removeClass("vc_hidden-placeholder"),t.placeholder.css({maxWidth:t.placeholder.parent().width()}),_.isNull(t.sender)||!t.sender.length||t.sender.find("> [data-element_type]:not(.ui-sortable-helper):visible").length||t.sender.addClass("vc_sorting-empty-container")}})}}),window.VcAccordionView=vc.shortcode_view.extend({adding_new_tab:!1,events:{'click .tab_controls:not(".nested_tab_controls") .add_tab':"addTab","touchstart .add_tab":"addTab","click > .vc_controls .column_delete, > .vc_controls .vc_control-btn-delete":"deleteShortcode","touchstart > .vc_controls .column_delete, > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .column_edit, > .vc_controls .vc_control-btn-edit":"editElement","touchstart > .vc_controls .column_edit, > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .column_clone,> .vc_controls .vc_control-btn-clone":"clone","touchstart > .vc_controls .column_clone,> .vc_controls .vc_control-btn-clone":"clone"},render:function(){return window.VcAccordionView.__super__.render.call(this),vc_user_access().shortcodeAll("vc_accordion_tab")?vc_user_access().partAccess("dragndrop")&&this.$content.sortable({axis:"y",handle:"h3",stop:function(t,n){n.item.prev().triggerHandler("focusout"),e(this).find("> .wpb_sortable").each((function(){e(this).data("model").save({order:e(this).index()})}))}}):this.$el.find(".tab_controls").hide(),this},changeShortcodeParams:function(e){window.VcAccordionView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),e=!(!_.isString(e.collapsible)||"yes"!==e.collapsible),this.$content.hasClass("ui-accordion")&&this.$content.accordion("option","collapsible",e)},changedContent:function(e){this.$content.hasClass("ui-accordion")&&this.$content.accordion("destroy");var t=!(!_.isString(this.model.get("params").collapsible)||"yes"!==this.model.get("params").collapsible);this.$content.accordion({header:"h3:not('.wpb_vc_accordion_tab h3')",navigation:!1,autoHeight:!0,heightStyle:"content",collapsible:t,active:!1===this.adding_new_tab&&!0!==e.model.get("cloned")?0:e.$el.index()}),this.adding_new_tab=!1},addTab:function(e){if(e&&e.preventDefault&&e.preventDefault(),!vc_user_access().shortcodeAll("vc_accordion_tab"))return!1;this.adding_new_tab=!0,vc.shortcodes.create({shortcode:"vc_accordion_tab",params:{title:window.i18nLocale.section},parent_id:this.model.id})},_loadDefaults:function(){window.VcAccordionView.__super__._loadDefaults.call(this)}}),window.VcNestedAccordionView=vc.shortcode_view.extend({adding_new_tab:!1,events:{"click .nested_tab_controls .add_tab":"addTab","click > .vc_controls .column_delete, > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .column_edit, > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .column_clone,> .vc_controls .vc_control-btn-clone":"clone"},render:function(){return window.VcNestedAccordionView.__super__.render.call(this),this.$content.sortable({axis:"y",handle:"h3",stop:function(t,n){n.item.prev().triggerHandler("focusout"),e(this).find("> .wpb_sortable").each((function(){e(this).data("model").save({order:e(this).index()})}))}}),this},changeShortcodeParams:function(e){window.VcNestedAccordionView.__super__.changeShortcodeParams.call(this,e);var t=!(!_.isString(this.model.get("params").collapsible)||"yes"!==this.model.get("params").collapsible);this.$content.hasClass("ui-accordion")&&this.$content.accordion("option","collapsible",t)},changedContent:function(e){this.$content.hasClass("ui-accordion")&&this.$content.accordion("destroy");var t=!(!_.isString(this.model.get("params").collapsible)||"yes"!==this.model.get("params").collapsible);this.$content.accordion({header:"h3",navigation:!1,autoHeight:!0,heightStyle:"content",collapsible:t,active:!1===this.adding_new_tab&&!0!==e.model.get("cloned")?0:e.$el.index()}),this.adding_new_tab=!1},addTab:function(e){this.adding_new_tab=!0,e.preventDefault(),vc.shortcodes.create({shortcode:"vc_nested_accordion_tab",params:{title:window.i18nLocale.section},parent_id:this.model.id})},_loadDefaults:function(){window.VcNestedAccordionView.__super__._loadDefaults.call(this)}}),window.VcNestedAccordionTabView=window.VcColumnView.extend({events:{"click > [data-element_type] > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > [data-element_type] >  .vc_controls .vc_control-btn-prepend":"addElement","click > [data-element_type] >  .vc_controls .vc_control-btn-edit":"editElement","click > [data-element_type] > .vc_controls .vc_control-btn-clone":"clone","click > [data-element_type] > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> [data-element_type] > .wpb_element_wrapper > .vc_container_for_children")},changeShortcodeParams:function(e){var t=e.get("params");window.VcNestedAccordionTabView.__super__.changeShortcodeParams.call(this,e),_.isObject(t)&&_.isString(t.title)&&this.$el.find("> h3 .tab-label").text(t.title)},setEmpty:function(){e("> [data-element_type]",this.$el).addClass("vc_empty-column"),this.$content.addClass("vc_empty-container")},unsetEmpty:function(){e("> [data-element_type]",this.$el).removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")}}),window.VcAccordionTabView=window.VcColumnView.extend({events:{"click > [data-element_type] > .vc_controls .vc_control-btn-delete":"deleteShortcode","touchstart > [data-element_type] > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > [data-element_type] >  .vc_controls .vc_control-btn-prepend":"addElement","touchstart > [data-element_type] >  .vc_controls .vc_control-btn-prepend":"addElement","click > [data-element_type] >  .vc_controls .vc_control-btn-edit":"editElement","touchstart > [data-element_type] >  .vc_controls .vc_control-btn-edit":"editElement","click > [data-element_type] > .vc_controls .vc_control-btn-clone":"clone","touchstart > [data-element_type] > .vc_controls .vc_control-btn-clone":"clone","click > [data-element_type] > .wpb_element_wrapper > .vc_empty-container":"addToEmpty","touchstart > [data-element_type] > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> [data-element_type] > .wpb_element_wrapper > .vc_container_for_children")},changeShortcodeParams:function(e){window.VcAccordionTabView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),_.isObject(e)&&_.isString(e.title)&&this.$el.find("> h3 .tab-label").text(e.title)},setEmpty:function(){e("> [data-element_type]",this.$el).addClass("vc_empty-column"),"edit"!==vc_user_access().getState("shortcodes")&&this.$content.addClass("vc_empty-container")},unsetEmpty:function(){e("> [data-element_type]",this.$el).removeClass("vc_empty-column"),this.$content.removeClass("vc_empty-container")}}),window.VcMessageView=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t;window.VcMessageView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),t=this.$el.find("> .wpb_element_wrapper").removeClass(_.values(this.params.color.value).join(" ")),_.isObject(e)&&_.isString(e.color)&&t.addClass(e.color)}}),window.VcMessageView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(t){var n,i,a,o;switch(window.VcMessageView_Backend.__super__.changeShortcodeParams.call(this,t),n=t.get("params"),t=this.$el.find("> .wpb_element_wrapper"),i=["vc_message_box"],_.isUndefined(n.message_box_style)&&(n.message_box_style="classic"),_.isUndefined(n.message_box_color)&&(n.message_box_color="alert-info"),n.style?"3d"===n.style?(n.message_box_style="3d",n.style="rounded"):"outlined"===n.style?(n.message_box_style="outline",n.style="rounded"):"square_outlined"===n.style&&(n.message_box_style="outline",n.style="square"):n.style="rounded",i.push("vc_message_box-"+n.style),n.message_box_style&&i.push("vc_message_box-"+n.message_box_style),t.attr("class","wpb_element_wrapper"),t.find(".vc_message_box-icon").remove(),a=_.isUndefined(n["icon_"+n.icon_type])?"fa fa-info-circle":n["icon_"+n.icon_type],o=n.color,n.color){case"info":a="fa fa-info-circle";break;case"alert-info":a="vc_pixel_icon vc_pixel_icon-info";break;case"success":a="fa fa-check";break;case"alert-success":a="vc_pixel_icon vc_pixel_icon-tick";break;case"warning":a="fa fa-exclamation-triangle";break;case"alert-warning":a="vc_pixel_icon vc_pixel_icon-alert";break;case"danger":a="fa fa-times";break;case"alert-danger":a="vc_pixel_icon vc_pixel_icon-explanation";break;default:o=n.message_box_color}i.push("vc_color-"+o),t.addClass(i.join(" ")),t.prepend(e('<div class="vc_message_box-icon"><i class="'+a+'"></i></div>'))}}),window.VcTextSeparatorView=vc.shortcode_view.extend({changeShortcodeParams:function(t){window.VcTextSeparatorView.__super__.changeShortcodeParams.call(this,t),t=t.get("params");var n=this.$el.find("> .wpb_element_wrapper");_.isObject(t)&&_.isString(t.title_align)&&n.removeClass(_.values(this.params.title_align.value).join(" ")).addClass(t.title_align),_.isObject(t)&&_.isString(t.add_icon)&&"true"===t.add_icon&&((t=e('<i class="'+t["i_icon_"+t.i_type]+'" ></i>')).prependTo(n.find("[name=title]")),t.after(" "))}}),window.VcCallToActionView=vc.shortcode_view.extend({changeShortcodeParams:function(e){window.VcCallToActionView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),_.isObject(e)&&_.isString(e.position)&&this.$el.find("> .wpb_element_wrapper").removeClass(_.values(this.params.position.value).join(" ")).addClass(e.position)}}),window.VcCallToActionView3=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t;window.VcCallToActionView3.__super__.changeShortcodeParams.call(this,e),e=_.extend({add_icon:"",i_type:""},e.get("params")),t=this.$el.find(".vc_admin_label.admin_label_i_type"),_.isEmpty(e.add_icon)?t.addClass("hidden-label").hide():_.isEmpty(e.i_type)||_.isEmpty(e["i_icon_"+e.i_type])||(e=vc_toTitleCase(e.i_type)+' - <i class="'+e["i_icon_"+e.i_type]+'"></i>',t.html("<label>"+t.find("label").text()+"</label>: "+e),t.show().removeClass("hidden-label"))}}),window.VcToggleView=vc.shortcode_view.extend({events:function(){return _.extend({"click .vc_toggle_title":"toggle","click .toggle_title":"toggle"},window.VcToggleView.__super__.events)},toggle:function(t){t&&t.preventDefault&&t.preventDefault(),e(t.currentTarget).toggleClass("vc_toggle_title_active"),e(".vc_toggle_content",this.$el).slideToggle(500)},changeShortcodeParams:function(t){window.VcToggleView.__super__.changeShortcodeParams.call(this,t),t=t.get("params"),_.isObject(t)&&_.isString(t.open)&&"true"===t.open&&e(".vc_toggle_title",this.$el).addClass("vc_toggle_title_active").next().show()}}),window.VcButtonView=vc.shortcode_view.extend({events:function(){return _.extend({"click button":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(e){e&&e.preventDefault&&e.preventDefault()},changeShortcodeParams:function(e){var t;window.VcButtonView.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),_.isObject(e)&&(t=e.color+" "+e.size+" "+e.icon,this.$el.find(".wpb_element_wrapper").removeClass(t),this.$el.find("button.title").attr({class:"title textfield wpb_button "+t}),"none"!==e.icon&&0===this.$el.find("button i.icon").length?this.$el.find("button.title").append('<i class="icon"></i>'):this.$el.find("button.title i.icon").remove())}}),window.VcButton2View=vc.shortcode_view.extend({events:function(){return _.extend({"click button":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(e){e&&e.preventDefault&&e.preventDefault()},changeShortcodeParams:function(e){window.VcButton2View.__super__.changeShortcodeParams.call(this,e),e=e.get("params"),_.isObject(e)&&(e=(e.color?"vc_btn_"+e.color:"")+" "+(e.color?"vc_btn-"+e.color:"")+" "+(e.size?"vc_btn-"+e.size:"")+" "+(e.size?"vc_btn_"+e.size:"")+" "+(e.style?"vc_btn_"+e.style:""),this.$el.find(".wpb_element_wrapper").removeClass(e),this.$el.find("button.title").attr({class:"title textfield vc_btn  "+e}))}}),window.VcButton3View=vc.shortcode_view.extend({buttonTemplate:!1,buttonTemplateCompiled:!1,$wrapper:!1,events:function(){return _.extend({"click .vc_btn3":"buttonClick"},window.VcToggleView.__super__.events)},buttonClick:function(e){e&&e.preventDefault&&e.preventDefault()},changeShortcodeParams:function(t){var n;window.VcButton3View.__super__.changeShortcodeParams.call(this,t),n=_.extend({},t.get("params")),this.buttonTemplate||(this.buttonTemplate=this.$el.find(".vc_btn3-container").html(),this.buttonTemplateCompiled=vc.template(this.buttonTemplate,vc.templateOptions.custom)),this.$wrapper||(this.$wrapper=this.$el.find(".wpb_element_wrapper")),_.isObject(n)&&(n.title&&_.isEmpty(n.title.trim())&&(n.title='<span class="vc_btn3-placeholder">&nbsp;</span>'),"custom"===n.style?(n.color=void 0,_.isEmpty(n.custom_background)&&_.isEmpty(n.custom_text)&&(n.color="grey")):"outline-custom"===n.style&&(n.color=void 0,_.isEmpty(n.outline_custom_color))&&_.isEmpty(n.outline_custom_hover_background)&&_.isEmpty(n.outline_custom_hover_text)&&(n.style="outline",n.color="grey"),t=e(this.buttonTemplateCompiled({params:n})),"custom"===n.style?("undefined"!==n.custom_background&&t.css("background-color",n.custom_background),"undefined"!==n.custom_text&&t.css("color",n.custom_text)):"outline-custom"===n.style&&t.css({"background-color":"transparent","border-color":n.outline_custom_color,color:n.outline_custom_color}).hover((function(){e(this).css({"background-color":n.outline_custom_hover_background,"border-color":n.outline_custom_hover_background,color:n.outline_custom_hover_text})}),(function(){e(this).css({"background-color":"transparent","border-color":n.outline_custom_color,color:n.outline_custom_color})})),this.$wrapper.find(".vc_btn3-container").html(t))}}),window.VcTabsView=vc.shortcode_view.extend({new_tab_adding:!1,events:{'click .tabs_controls .add_tab:not(".nested_tab_controls .add_tab")':"addTab","touchstart .add_tab":"addTab","click > .vc_controls .vc_control-btn-delete":"deleteShortcode","touchstart > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","touchstart > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","touchstart > .vc_controls .vc_control-btn-clone":"clone"},initialize:function(e){window.VcTabsView.__super__.initialize.call(this,e),_.bindAll(this,"stopSorting")},render:function(){return window.VcTabsView.__super__.render.call(this),this.$tabs=this.$el.find(".wpb_tabs_holder"),this.createAddTabButton(),this},ready:function(e){window.VcTabsView.__super__.ready.call(this,e)},createAddTabButton:function(){var t=Date.now()+"-"+Math.floor(11*Math.random());this.$tabs.append('<div id="new-tab-'+t+'" class="new_element_button"></div>'),this.$add_button=e('<li class="add_tab_block"><a href="#new-tab-'+t+'" class="add_tab" title="'+window.i18nLocale.add_tab+'"></a></li>').appendTo(this.$tabs.find(".tabs_controls")),vc_user_access().shortcodeAll("vc_tab")||this.$add_button.hide()},addTab:function(e){var t;return e&&e.preventDefault&&e.preventDefault(),vc_user_access().shortcodeAll("vc_tab")&&(this.new_tab_adding=!0,e=window.i18nLocale.tab,t=this.$tabs.find("[data-element_type=vc_tab]").length,t=Date.now()+"-"+t+"-"+Math.floor(11*Math.random()),vc.shortcodes.create({shortcode:"vc_tab",params:{title:e,tab_id:t},parent_id:this.model.id})),!1},stopSorting:function(){var t;this.$tabs.find("ul.tabs_controls li:not(.add_tab_block)").each((function(){e(this).find("a").attr("href").replace("#",""),t=vc.shortcodes.get(e("[id="+e(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),t.save({order:e(this).index()})})),t&&t.save()},changedContent:function(t){var n=t.model.get("params");this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({activate:function(t,n){var i=e(":first-child",n.newTab).attr("href").substr(1),a=e(":first-child",n.oldTab).attr("href").substr(1);"http"==i.substr(4,4)&&e("[id='"+i+"']").css("display","block"),"http"==a.substr(4,4)&&e("[id='"+a+"']").css("display","none")},select:function(t,n){return!e(n.tab).hasClass("add_tab")}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),vc_user_access().shortcodeAll("vc_tab")&&this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"===this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",update:this.stopSorting,items:"> li:not(.add_tab_block)"})),!0===t.model.get("cloned")?(t.model.get("cloned_from"),t=e(".tabs_controls > .add_tab_block",this.$content),t=e('<li><a href="#tab-'+n.tab_id+'">'+n.title+"</a></li>").insertBefore(t),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",t.index())):(e('<li><a href="#tab-'+n.tab_id+'">'+n.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",this.new_tab_adding?e(".ui-tabs-nav li",this.$content).length-2:0)),this.new_tab_adding=!1},cloneModel:function(e,n,i){i=_.isBoolean(i)&&!0===i?e.get("order"):parseFloat(e.get("order"))+vc.clone_index;var a,o=_.extend({},e.get("params")),s=e.get("shortcode");return"vc_tab"===s&&_.extend(o,{tab_id:Date.now()+"-"+this.$tabs.find("[data-element-type=vc_tab]").length+"-"+Math.floor(11*Math.random())}),a=t.create({shortcode:s,id:vc_guid(),parent_id:n,order:i,cloned:"vc_tab"!==s,cloned_from:e.toJSON(),params:o}),_.each(t.where({parent_id:e.id}),(function(e){this.cloneModel(e,a.get("id"),!0)}),this),a}}),window.VcNestedTabsView=vc.shortcode_view.extend({new_tab_adding:!1,events:{"click .add_tab":"addTab","click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone"},initialize:function(e){window.VcNestedTabsView.__super__.initialize.call(this,e),_.bindAll(this,"stopSorting")},render:function(){return window.VcNestedTabsView.__super__.render.call(this),this.$tabs=this.$el.find(".wpb_nested_tabs_holder"),this.createAddTabButton(),this},ready:function(e){window.VcNestedTabsView.__super__.ready.call(this,e)},createAddTabButton:function(){var t=+new Date+"-"+Math.floor(11*Math.random());this.$tabs.append('<div id="new-tab-'+t+'" class="new_element_button"></div>'),this.$add_button=e('<li class="add_tab_block"><a href="#new-tab-'+t+'" class="add_tab" title="'+window.i18nLocale.add_tab+'"></a></li>').appendTo(this.$tabs.find(".nested_tabs_controls"))},addTab:function(e){e.preventDefault(),this.new_tab_adding=!0;var t=window.i18nLocale.tab,n=this.$tabs.find("[data-element_type=vc_nested_tab]").length,i=+new Date+"-"+n+"-"+Math.floor(11*Math.random());return vc.shortcodes.create({shortcode:"vc_nested_tab",params:{title:t,tab_id:i},parent_id:this.model.id}),!1},stopSorting:function(t,n){var i;this.$tabs.find("ul.nested_tabs_controls li:not(.add_tab_block)").each((function(t){e(this).find("a").attr("href").replace("#","");i=vc.shortcodes.get(e("[id="+e(this).attr("aria-controls")+"]").data("model-id")),vc.storage.lock(),i.save({order:e(this).index()})})),i.save()},changedContent:function(t){var n=t.model.get("params");if(this.$tabs.hasClass("ui-tabs")||(this.$tabs.tabs({activate:function(t,n){var i=e(":first-child",n.newTab).attr("href").substr(1),a=e(":first-child",n.oldTab).attr("href").substr(1);"http"==i.substr(4,4)&&e("[id='"+i+"']").css("display","block"),"http"==a.substr(4,4)&&e("[id='"+a+"']").css("display","none")},select:function(t,n){return!e(n.tab).hasClass("add_tab")}}),this.$tabs.find(".ui-tabs-nav").prependTo(this.$tabs),this.$tabs.find(".ui-tabs-nav").sortable({axis:"vc_tour"==this.$tabs.closest("[data-element_type]").data("element_type")?"y":"x",update:this.stopSorting,items:"> li:not(.add_tab_block)"})),!0===t.model.get("cloned")){var i,a=t.model.get("cloned_from"),o=e('[href="#tab-'+a.params.tab_id+'"]',this.$content).parent();i=void 0!==o.prop("tagName")?e("<li><a href='#tab-"+n.tab_id+"'>"+n.title+"</a></li>").insertAfter(o):e("<li><a href='#tab-"+n.tab_id+"'>"+n.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",i.index())}else e("<li><a href='#tab-"+n.tab_id+"'>"+n.title+"</a></li>").insertBefore(this.$add_button),this.$tabs.tabs("refresh"),this.$tabs.tabs("option","active",this.new_tab_adding?e(".nested_tabs_controls li",this.$content).length-2:0);this.new_tab_adding=!1},cloneModel:function(e,t,n){var i,a=_.isBoolean(n)&&!0===n?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,o=_.extend({},e.get("params"));return"vc_nested_tab"===e.get("shortcode")&&_.extend(o,{tab_id:+new Date+"-"+this.$tabs.find("[data-element-type=vc_nested_tab]").length+"-"+Math.floor(11*Math.random())}),i=Shortcodes.create({shortcode:e.get("shortcode"),id:vc_guid(),parent_id:t,order:a,cloned:"vc_nested_tab"!==e.get("shortcode"),cloned_from:e.toJSON(),params:o}),_.each(Shortcodes.where({parent_id:e.id}),(function(e){this.cloneModel(e,i.get("id"),!0)}),this),i}}),window.VcTabView=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","touchstart > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","touchstart > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","touchstart > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","touchstart > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty","touchstart > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var e=this.model.get("params");return window.VcTabView.__super__.render.call(this),e.tab_id||(e.tab_id=Date.now()+"-"+Math.floor(11*Math.random()),this.model.save("params",e)),this.id="tab-"+e.tab_id,this.$el.attr("id",this.id),this},ready:function(e){return window.VcTabView.__super__.ready.call(this,e),this.$tabs=this.$el.closest(".wpb_tabs_holder"),this.model.get("params"),this},changeShortcodeParams:function(t){window.VcTabView.__super__.changeShortcodeParams.call(this,t),t=t.get("params"),_.isObject(t)&&_.isString(t.title)&&_.isString(t.tab_id)&&e('.ui-tabs-nav [href="#tab-'+t.tab_id+'"]').text(t.title)},deleteShortcode:function(t){t&&t.preventDefault&&t.preventDefault();t=confirm(window.i18nLocale.press_ok_to_delete_section);var n,i=this.model.get("parent_id");return!0===t&&(this.model.destroy(),vc.shortcodes.where({parent_id:i}).length?(t=this.model.get("params"),n=e('[href="#tab-'+t.tab_id+'"]',this.$tabs).parent().index(),e('[href="#tab-'+t.tab_id+'"]').parent().remove(),0<(t=this.$tabs.find(".ui-tabs-nav li:not(.add_tab_block)").length)&&this.$tabs.tabs("refresh"),void(n<t?this.$tabs.tabs("option","active",n):0<t&&this.$tabs.tabs("option","active",t-1))):(vc.shortcodes.get(i).destroy(),!1))},cloneModel:function(e,n,i){i=_.isBoolean(i)&&!0===i?e.get("order"):parseFloat(e.get("order"))+vc.clone_index;var a,o=_.extend({},e.get("params")),s=e.get("shortcode");return"vc_tab"===s&&_.extend(o,{tab_id:Date.now()+"-"+this.$tabs.find("[data-element_type=vc_tab]").length+"-"+Math.floor(11*Math.random())}),a=t.create({shortcode:s,parent_id:n,order:i,cloned:!0,cloned_from:e.toJSON(),params:o}),_.each(t.where({parent_id:e.id}),(function(e){this.cloneModel(e,a.get("id"),!0)}),this),a}}),window.VcNestedTabView=window.VcColumnView.extend({events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-prepend":"addElement","click > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_empty-container":"addToEmpty"},render:function(){var e=this.model.get("params");return window.VcNestedTabView.__super__.render.call(this),e.tab_id&&-1==e.tab_id.indexOf("def")||(e.tab_id=+new Date+"-"+Math.floor(11*Math.random()),this.model.save("params",e)),this.id="tab-"+e.tab_id,this.$el.attr("id",this.id),this},ready:function(e){window.VcNestedTabView.__super__.ready.call(this,e),this.$tabs=this.$el.closest(".wpb_nested_tabs_holder");this.model.get("params");return this},changeShortcodeParams:function(t){var n=t.get("params");window.VcNestedTabView.__super__.changeShortcodeParams.call(this,t),_.isObject(n)&&_.isString(n.title)&&_.isString(n.tab_id)&&e('.ui-tabs-nav [href="#tab-'+n.tab_id+'"]').text(n.title)},deleteShortcode:function(t){_.isObject(t)&&t.preventDefault();var n=confirm(window.i18nLocale.press_ok_to_delete_section),i=this.model.get("parent_id");if(!0!==n)return!1;if(this.model.destroy(),!vc.shortcodes.where({parent_id:i}).length)return vc.shortcodes.get(i).destroy(),!1;var a=this.model.get("params"),o=e('[href="#tab-'+a.tab_id+'"]',this.$tabs).parent().index();e('[href="#tab-'+a.tab_id+'"]').parent().remove();var s=this.$tabs.find(".ui-tabs-nav li:not(.add_tab_block)").length;s>0&&this.$tabs.tabs("refresh"),o<s?this.$tabs.tabs("option","active",o):s>0&&this.$tabs.tabs("option","active",s-1)},cloneModel:function(e,t,n){var i=_.isBoolean(n)&&!0===n?e.get("order"):parseFloat(e.get("order"))+vc.clone_index,a=_.extend({},e.get("params"));"vc_nested_tab"===e.get("shortcode")&&_.extend(a,{tab_id:+new Date+"-"+this.$tabs.find("[data-element_type=vc_nested_tab]").length+"-"+Math.floor(11*Math.random())});var o=Shortcodes.create({shortcode:e.get("shortcode"),parent_id:t,order:i,cloned:!0,cloned_from:e.toJSON(),params:a});return _.each(Shortcodes.where({parent_id:e.id}),(function(e){this.cloneModel(e,o.id,!0)}),this),o}}),window.VcIconElementView_Backend=vc.shortcode_view.extend({changeShortcodeParams:function(e){var t=e.get("shortcode"),n=e.get("params");t=vc.map[t];_.isArray(t.params)&&_.each(t.params,(function(e){var t,i;!_.isUndefined(e.admin_label)&&e.admin_label&&(e=e.param_name,t=n[e],(i=this.$el.find("> .wpb_element_wrapper").children(".admin_label_"+e)).length)&&(""===t||_.isUndefined(t)?i.hide().addClass("hidden-label"):("type"!==e||_.isUndefined(n["icon_"+t])||(t=vc_toTitleCase(t)+' - <i class="'+n["icon_"+t]+'"></i>'),i.html("<label>"+i.find("label").text()+"</label>: "+t),i.show().removeClass("hidden-label")))}),this),t=vc.app.views[this.model.get("parent_id")],!1!==e.get("parent_id")&&_.isObject(t)&&t.checkIsEmpty()}}),window.VcBackendTtaViewInterface=vc.shortcode_view.extend({sortableSelector:!1,$sortable:!1,$navigation:!1,defaultSectionTitle:window.i18nLocale.tab,sortableUpdateModelIdSelector:"data-vc-target-model-id",activeClass:"vc_active",sortingPlaceholder:"vc_placeholder",events:{"click > .vc_controls .vc_control-btn-delete":"deleteShortcode","touchstart > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .vc_controls .vc_control-btn-edit":"editElement","touchstart > .vc_controls .vc_control-btn-edit":"editElement","click > .vc_controls .vc_control-btn-clone":"clone","touchstart > .vc_controls .vc_control-btn-clone":"clone","click > .vc_controls .vc_control-btn-copy":"copy","touchstart > .vc_controls .vc_control-btn-copy":"copy","click > .vc_controls .vc_control-btn-paste":"paste","touchstart > .vc_controls .vc_control-btn-paste":"paste","click > .vc_controls .vc_control-btn-prepend":"clickPrependSection","touchstart > .vc_controls .vc_control-btn-prepend":"clickPrependSection","click .vc_tta-section-append":"clickAppendSection","touchstart .vc_tta-section-append":"clickAppendSection"},initialize:function(e){window.VcBackendTtaViewInterface.__super__.initialize.call(this,e),_.bindAll(this,"updateSorting")},render:function(){return window.VcBackendTtaViewInterface.__super__.render.call(this),this.$el.addClass("vc_tta-container vc_tta-o-non-responsive"),this},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper .vc_tta-panels")},clickAppendSection:function(e){e&&e.preventDefault&&e.preventDefault(),this.addSection()},clickPrependSection:function(e){e&&e.preventDefault&&e.preventDefault(),this.addSection(!0)},addSection:function(e){return e={shortcode:"vc_tta_section",params:{title:this.defaultSectionTitle},parent_id:this.model.get("id"),order:_.isBoolean(e)&&e?vc.add_element_block_view.getFirstPositionIndex():vc.shortcodes.getNextOrder(),prepend:e},vc.shortcodes.create(e)},findSection:function(e){return this.$content.children('[data-model-id="'+e+'"]')},getIndex:function(e){return e.index()},buildSortable:function(e){return!("edit"===vc_user_access().getState("shortcodes")||!vc_user_access().shortcodeAll("vc_tta_section"))&&e.sortable({forcePlaceholderSize:!0,placeholder:this.sortingPlaceholder,helper:this.renderSortingPlaceholder,scroll:!0,cursor:"move",cursorAt:{top:20,left:16},start:function(){},over:function(){},stop:function(e,t){t.item.attr("style","")},update:this.updateSorting,items:this.sortableSelector})},updateSorting:function(){var t;if(!vc_user_access().shortcodeAll("vc_tta_section"))return!1;(t=this).$sortable.find(this.sortableSelector).each((function(){var n=e(this),i=n.attr(t.sortableUpdateModelIdSelector);i=vc.shortcodes.get(i);vc.storage.lock(),i.save({order:t.getIndex(n)})})),vc.storage.unlock(),vc.storage.save()},makeFirstSectionActive:function(){this.$content.children(":first-child").addClass(this.activeClass)},checkForActiveSection:function(){this.$content.children("."+this.activeClass).length||this.makeFirstSectionActive()},changeActiveSection:function(e){this.$content.children(".vc_tta-panel."+this.activeClass).removeClass(this.activeClass),this.findSection(e).addClass(this.activeClass)},changedContent:function(e){return e=window.VcBackendTtaViewInterface.__super__.changedContent.call(this,e),this.checkForActiveSection(),this.buildSortable(this.$sortable),e},notifySectionChanged:function(e){var t=e.get("view");_.isObject(t)&&(e=e.getParam("title"),_.isString(e)&&e.length||(e=this.defaultSectionTitle),t.$el.find(".vc_tta-panel-title a .vc_tta-title-text").text(e))},notifySectionRendered:function(){},getNextTab:function(e){var t=this.$navigation.children(),n=t.length-2;return n=(e=e.index())!==n?t.eq(e+1):t.eq(e-1)},renderSortingPlaceholder:function(e,t){return vc.app.renderPlaceholder(e,t)}}),window.VcBackendTtaTabsView=window.VcBackendTtaViewInterface.extend({sortableSelector:"> [data-vc-tab]",sortableSelectorCancel:".vc-non-draggable-container",sortablePlaceholderClass:"vc_placeholder-tta-tab",navigationSectionTemplate:null,navigationSectionTemplateParsed:null,$navigationSectionAdd:null,sortingPlaceholder:"vc_placeholder-tab vc_tta-tab",render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$el.find("> .wpb_element_wrapper .vc_tta-tabs-list"),this.$sortable=this.$navigation,this.$navigationSectionAdd=this.$navigation.children(".vc_tta-tab:first-child"),this.setNavigationSectionTemplate(this.$navigationSectionAdd.prop("outerHTML")),vc_user_access().shortcodeAll("vc_tta_section")?(this.$navigationSectionAdd.addClass("vc_tta-section-append").removeAttr("data-vc-target-model-id").removeAttr("data-vc-tab").find("[data-vc-target]").html('<i class="vc_tta-controls-icon vc_tta-controls-icon-plus"></i>').removeAttr("data-vc-tabs").removeAttr("data-vc-target").removeAttr("data-vc-target-model-id").removeAttr("data-vc-toggle"),"true"===this.$navigationSectionAdd.attr("data-hide-add-control")&&this.$navigationSectionAdd.css("display","none")):this.$navigationSectionAdd.hide(),this},setNavigationSectionTemplate:function(e){this.navigationSectionTemplate=e,this.navigationSectionTemplateParsed=vc.template(this.navigationSectionTemplate,vc.templateOptions.custom)},getNavigationSectionTemplate:function(){return this.navigationSectionTemplate},getParsedNavigationSectionTemplate:function(e){return this.navigationSectionTemplateParsed(e)},changeNavigationSectionTitle:function(e,t){this.findNavigationTab(e).find("[data-vc-target]").text(t)},changeActiveSection:function(e){window.VcBackendTtaTabsView.__super__.changeActiveSection.call(this,e),this.$navigation.children("."+this.activeClass).removeClass(this.activeClass),this.findNavigationTab(e).addClass(this.activeClass)},notifySectionRendered:function(t){var n,i;window.VcBackendTtaTabsView.__super__.notifySectionRendered.call(this,t),n=t.getParam("title"),n=e(this.getParsedNavigationSectionTemplate({model_id:t.get("id"),section_title:_.isString(n)&&0<n.length?n:this.defaultSectionTitle})),t.get("cloned")?(i=t.get("cloned_from"),_.isObject(i)&&((i=this.$navigation.children('[data-vc-target-model-id="'+i.id+'"]')).length?n.insertAfter(i):n.insertBefore(this.$navigation.children(".vc_tta-section-append")))):t.get("prepend")?n.insertBefore(this.$navigation.children(":first-child")):n.insertBefore(this.$navigation.children(":last-child"))},notifySectionChanged:function(e){var t;window.VcBackendTtaTabsView.__super__.notifySectionChanged.call(this,e),t=e.getParam("title"),_.isString(t)&&t.length||(t=this.defaultSectionTitle),this.changeNavigationSectionTitle(e.get("id"),t),e.view.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_element-name").removeClass("vc_element-move"),e.view.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_element-name .vc-c-icon-dragndrop").hide()},makeFirstSectionActive:function(){var e=this.$navigation.children(":first-child:not(.vc_tta-section-append)").addClass(this.activeClass);e.length&&this.findSection(e.data("vc-target-model-id")).addClass(this.activeClass)},findNavigationTab:function(e){return this.$navigation.children('[data-vc-target-model-id="'+e+'"]')},removeSection:function(e){var t;(e=this.findNavigationTab(e.get("id"))).hasClass(this.activeClass)&&((t=this.getNextTab(e)).addClass(this.activeClass),this.changeActiveSection(t.data("vc-target-model-id"))),e.remove()},renderSortingPlaceholder:function(e,t){var n=t,i=t.width()+1;t=t.height();return n.width(i),n.height(t),n}}),window.VcBackendTtaAccordionView=VcBackendTtaViewInterface.extend({sortableSelector:"> .vc_tta-panel:not(.vc_tta-section-append)",sortableSelectorCancel:".vc-non-draggable",sortableUpdateModelIdSelector:"data-model-id",defaultSectionTitle:window.i18nLocale.section,render:function(){return window.VcBackendTtaTabsView.__super__.render.call(this),this.$navigation=this.$content,this.$sortable=this.$content,vc_user_access().shortcodeAll("vc_tta_section")||this.$content.find(".vc_tta-section-append").hide(),this},removeSection:function(e){(e=this.findSection(e.get("id"))).hasClass(this.activeClass)&&this.getNextTab(e).addClass(this.activeClass)},addShortcode:function(e){var t=_.last(vc.shortcodes.filter((function(e){return e.get("parent_id")===this.get("parent_id")&&parseFloat(e.get("order"))<parseFloat(this.get("order"))}),e.model));t?e.render().$el.insertAfter("[data-model-id="+t.id+"]"):this.$content.prepend(e.render().el)}}),window.VcBackendTtaTourView=window.VcBackendTtaTabsView.extend({defaultSectionTitle:window.i18nLocale.section}),window.VcBackendTtaPageableView=window.VcBackendTtaTabsView.extend({defaultSectionTitle:window.i18nLocale.section}),window.VcBackendTtaSectionView=window.VcColumnView.extend({parentObj:null,events:{"click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-delete":"deleteShortcode","touchstart > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-delete":"deleteShortcode","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-prepend":"addElement","touchstart > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-prepend":"addElement","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-edit":"editElement","touchstart > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-edit":"editElement","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-clone":"clone","touchstart > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-clone":"clone","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-copy":"copy","touchstart > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-copy":"copy","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-paste":"paste","touchstart > .wpb_element_wrapper > .vc_tta-panel-body > .vc_controls .vc_control-btn-paste":"paste","click > .wpb_element_wrapper > .vc_tta-panel-body > .vc_empty-container":"addToEmpty","touchstart > .wpb_element_wrapper > .vc_tta-panel-body > .vc_empty-container":"addToEmpty"},setContent:function(){this.$content=this.$el.find("> .wpb_element_wrapper > .vc_tta-panel-body > .vc_container_for_children")},render:function(){var e;return window.VcBackendTtaSectionView.__super__.render.call(this),e=vc.shortcodes.get(this.model.get("parent_id")),_.isObject(e)&&!_.isUndefined(e.view)&&(this.parentObj=e),this.$el.addClass("vc_tta-panel"),this.$el.attr("style",""),this.$el.attr("data-vc-toggle","tab"),this.replaceTemplateVars(),this},replaceTemplateVars:function(){var e=this.model.getParam("title"),t=(_.isEmpty(e)&&(e=this.parentObj&&this.parentObj.defaultSectionTitle&&this.parentObj.defaultSectionTitle.length?this.parentObj.defaultSectionTitle:window.i18nLocale.section),this.$el.find(".vc_tta-panel-heading")),n=vc.template(t.html(),vc.templateOptions.custom);t.html(n({model_id:this.model.get("id"),section_title:e}))},getIndex:function(){return this.$el.index()},ready:function(){this.updateParentNavigation(),window.VcBackendTtaSectionView.__super__.ready.call(this)},updateParentNavigation:function(){_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionRendered&&this.parentObj.view.notifySectionRendered(this.model)},deleteShortcode:function(e){return e&&e.preventDefault&&e.preventDefault(),!0===confirm(window.i18nLocale.press_ok_to_delete_section)&&(1===vc.shortcodes.where({parent_id:this.model.get("parent_id")}).length?(this.model.destroy(),this.parentObj&&this.parentObj.destroy()):(this.parentObj&&this.parentObj.view&&this.parentObj.view.removeSection&&this.parentObj.view.removeSection(this.model),this.model.destroy()),!0)},changeShortcodeParams:function(e){window.VcBackendTtaSectionView.__super__.changeShortcodeParams.call(this,e),_.isObject(this.parentObj)&&this.parentObj.view&&this.parentObj.view.notifySectionChanged&&this.parentObj.view.notifySectionChanged(e)}}),vc.addTemplateFilter((function(e){var t=VCS4()+"-"+VCS4();return e.replace(/tab\_id\=\"([^\"]+)\"/g,'tab_id="$1'+t+'"')}))})(window.jQuery),jQuery(window).on("load",(function(){var e;vc.backendEditorParamsAjaxStorage&&(jQuery.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_backend_editor_params",elements:vc.backendEditorParamsAjaxStorage,_vcnonce:window.vcAdminNonce},dataType:"json"}).done((function(t){t.success?jQuery.each(t.data,(function(t,n){e[n.action](t,n)})):console.warn("Failed to get element params from server")})).fail((function(){console.warn("Failed to get element params from server")})),e={get_attach_image:function(e,t){var n=jQuery('[data-model-id="'+e+'"]');n.length?(n=n.find(".attachment-thumbnail[data-name="+t.paramName+"]"),vc.atts.attach_image.updateImage(n,t,!0)):console.warn('Element with data-model-id="'+e+'" not found')},get_gallery_images:function(e,t){var n=jQuery('[data-model-id="'+e+'"]');n.length?(n=n.find(".attachment-thumbnails[data-name="+t.paramName+"]"),vc.atts.attach_images.updateImages(n,t.html)):console.warn('Element with data-model-id="'+e+'" not found')}})})),(e=>{var t=function(e,t,n){this.target=e,this.$pointer=null,this.texts=n,this.pointerOptions=t,this.init()};t.prototype={init:function(){_.bindAll(this,"openedEvent","reposition")},show:function(){this.$pointer=e(this.target),this.$pointer.data("vcPointerMessage",this),this.pointerOptions.opened=this.openedEvent,this.$pointer.addClass("vc-with-vc-pointer").pointer(this.pointerOptions).pointer("open"),e(window).on("resize.vcPointer",this.reposition)},domButtonsWrapper:function(){return e('<div class="vc_wp-pointer-controls" />')},domCloseBtn:function(){return e('<a class="vc_pointer-close close">'+this.texts.finish+"</a>")},domNextBtn:function(){return e('<button class="button button-primary button-large vc_wp-pointers-next">'+this.texts.next+'<i class="vc_pointer-icon"></i></button>')},domPrevBtn:function(){return e('<button class="button button-primary button-large vc_wp-pointers-prev"><i class="vc_pointer-icon"></i>'+this.texts.prev+"</button> ")},openedEvent:function(t,n){var i=n.pointer.offset();n.pointer.css("z-index",1e5),i&&i.top&&e("body").scrollTop(80<i.top?i.top-80:0)},reposition:function(){this.$pointer.length&&e.contains(document,this.$pointer[0])?(this.$pointer.pointer("reposition"),window.vcPointersUpdatePosition(this.$pointer)):this.close()},close:function(){this.$pointer&&this.$pointer.removeClass("vc-with-vc-pointer").pointer("close"),e(window).off("resize.vcPointer")}},window.vcPointerMessage=t})(window.jQuery),(e=>{var t=function(e,t){this.pointers=e&&e.messages||[],this._texts=t,this.pointerId=e&&e.pointer_id?e.pointer_id:"",this.pointerData={},this._index=0,this.messagesDismissed=!1,this.init()};t.prototype={init:function(){_.bindAll(this,"show","clickEventClose","clickEventNext","clickEventPrev","buttonsEvent"),this.build()},getPointer:function(t){return this.pointerData=this.pointers[t]&&this.pointers[t].target?this.pointers[t]:null,this.pointerData&&this.pointerData.options?(e("body").hasClass("vc_editor")&&"#vc_ui-panel-post-custom-layout"===this.pointerData.target&&"none"===e(this.pointerData.target).css("display")&&this.next(),new vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts)):null},buildOptions:function(e){return e.buttonsEvent&&_.isFunction(window[e.buttonsEvent])?e.buttons=_.bind(window[e.buttonsEvent],this):e.buttons=this.buttonsEvent,e.vcPointerController=this,e},build:function(){if(this.pointer=this.getPointer(this._index),vc.events.once("backendEditor.close",this.close,this),!this.pointer)return!1;this.setShowEventHandler()},show:function(){this.pointer.show(),this.setCloseEventHandler(),vc.events.trigger("vcPointer:show"),window.vcPointersUpdatePosition(this.pointer.$pointer)},setShowEventHandler:function(){var t;this.pointerData.showCallback&&window[this.pointerData.showCallback]?window[this.pointerData.showCallback].call(this):this.pointerData.showEvent?this.pointerData.showEvent.match(/\s/)?1<(t=this.pointerData.closeEvent.split(/\s+(.+)?/)).length&&e(t[1]).one(t[0],this.show):vc.events.once(this.pointerData.showEvent,this.show):this.show()},setCloseEventHandler:function(){var t;this.pointerData.closeCallback&&window[this.pointerData.closeCallback]?window[this.pointerData.closeCallback].call(this):this.pointerData.closeEvent?this.pointerData.closeEvent.match(/\s/)?(t=this.pointerData.closeEvent.split(/\s+(.+)?/),e(t[1]||this.$pointer).one(t[1]&&t[0]?t[0]:"click",this.clickEventNext)):vc.events.once(this.pointerData.closeEvent,this.nextOnEvent,this):this.pointer.$pointer&&0<this.pointer.$pointer.length&&e(this.pointer.$pointer).one("click",this.clickEventNext)},nextOnEvent:function(){this.close(),this.next()},next:function(){this._index++,this.build()},prev:function(){this._index--,this.build()},close:function(){this.pointer&&(this.pointer.close(),this.pointerData=null,this.pointer=null,vc.events.trigger("vcPointer:close",this))},buttonsEvent:function(){var e=this.pointer.domCloseBtn(),t=this.pointer.domNextBtn(),n=this.pointer.domPrevBtn();return e.bind("click.vcPointer",this.clickEventClose),e=this.pointer.domButtonsWrapper().append(e),0<this._index&&(n.bind("click.vcPointer",this.clickEventPrev),e.addClass("vc_wp-pointer-controls-prev").append(n)),this._index+1<this.pointers.length&&(t.bind("click.vcPointer",this.clickEventNext),e.addClass("vc_wp-pointer-controls-next").append(t)),e},clickEventClose:function(){this.close(),this.dismissMessages()},clickEventNext:function(){this.close(),this.next()},clickEventPrev:function(){this.close(),this.prev()},dismissMessages:function(){if(this.messagesDismissed)return!1;e.post(window.ajaxurl,{pointer:this.pointerId,action:"dismiss-wp-pointer"}),this.messagesDismissed=!0}},window.vcPointersController=t})(window.jQuery),(e=>{vc.events.on("app.render",(function(){window.vcPointer&&window.vcPointer.pointers&&window.vcPointer.pointers.length&&_.each(vcPointer.pointers,(function(e){new vcPointersController(e,vcPointer.texts)}),this)})),vc.events.on("vcPointer:show",(function(){vc.app.disableFixedNav=!0})),vc.events.on("vcPointer:close",(function(){vc.app.disableFixedNav=!1})),window.vcPointersEditorsTourEvents=function(){var e=this.pointer.domCloseBtn();return e.bind("click.vcPointer",this.clickEventClose),e},window.vcPointersShowOnContentElementControls=function(){this.pointer&&e(this.pointer.target).length?(e(this.pointer.target).parent().addClass("vc-with-vc-pointer-controls"),this.show(),e("#wpb_wpbakery").one("click",(function(){e(".vc-with-vc-pointer-controls").removeClass("vc-with-vc-pointer-controls")}))):vc.events.once("shortcodes:add",vcPointersShowOnContentElementControls,this)},window.vcPointersSetInIFrame=function(){this.pointerData&&vc.frame_window.jQuery(this.pointerData.target).length?(vc.frame_window.vcPointersUpdatePosition=window.vcPointersUpdatePosition,this.pointer=new vc.frame_window.vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts),this.show(),this.pointer.$pointer.closest(".vc_controls").addClass("vc-with-vc-pointer-controls")):vc.events.once("shortcodeView:ready",vcPointersSetInIFrame,this)},window.vcPointersCloseInIFrame=function(){var e=this,t=vc.frame_window.jQuery;t("body").one("click",(function(){t(".vc-with-vc-pointer-controls").removeClass("vc-with-vc-pointer-controls"),e.nextOnEvent()}))},window.vcPointersUpdatePosition=function(t){var n=t.data("wpPointer"),i=e("#vc_post-custom-layout").val(),a=t[0]&&t[0].getBoundingClientRect();t=t.hasClass("vc_controls-cc");"admin_frontend_editor"===window.vc_mode&&n&&"blank"===i&&t&&a.top<90&&(i=n.pointer,t=n.arrow,n=a.top+a.height/2,i.css("top","10px"),t.css("top",n-10+"px"))}})(window.jQuery),(()=>{var e={stack:[],stackPosition:0,stackHash:JSON.stringify(""),zeroState:null,locked:!1,add:function(e){null===this.zeroState&&this.setZeroState(e),this.stackHash!==JSON.stringify(e)&&(this.can("redo")&&(this.stack=this.stack.slice(0,this.stackPosition)),this.stack.push(e),this.stackPosition=this.stack.length,this.stackHash=JSON.stringify(this.get()))},can:function(e){var t=!1;return"undo"===e?t=0<this.stack.length&&0<this.stackPosition:"redo"===e&&(t=0<this.stack.length&&this.stackPosition<this.stack.length),t},undo:function(){this.can("undo")&&(--this.stackPosition,this.stackHash=JSON.stringify(this.get()))},redo:function(){this.can("redo")&&(this.stackPosition+=1,this.stackHash=JSON.stringify(this.get()))},set:function(e){return this.stackPosition<e&&(this.stack=this.stack.slice(e-this.stackPosition),this.stackHash=JSON.stringify(this.get()),!0)},get:function(){return this.stackPosition<1?this.zeroState:this.stack[this.stackPosition-1]},setZeroState:function(e){this.zeroState=e,this.stackHash=JSON.stringify(this.get())}},t={add:function(t){!0!==e.locked&&(e.add(t),window.vc.events.trigger("undoredo:add",t))},getCurrentPosition:function(){return e.stackPosition},undo:function(){return e.undo(),window.vc.events.trigger("undoredo:undo"),t.get()},redo:function(){return e.redo(),window.vc.events.trigger("undoredo:redo"),t.get()},get:function(){return e.get()},canUndo:function(){return!this.isLocked()&&e.can("undo")},canRedo:function(){return!this.isLocked()&&e.can("redo")},setZeroState:function(t){null===e.zeroState?this.add(t):e.setZeroState(t)},lock:function(){e.locked=!0,window.vc.events.trigger("undoredo:lock")},unlock:function(){e.locked=!1,window.vc.events.trigger("undoredo:unlock")},isLocked:function(){return!0===e.locked}};void 0===window.vc&&(window.vc={}),window.vc.undoRedoApi=t})(),(e=>{e((function(){var t,n,i;window.vc&&window.vc.events&&(t=e(".vc_undo-button"),n=e(".vc_redo-button"),i=function(e){vc.storage.setContent(e),vc.shortcodes.fetch({reset:!0}),_.delay((function(){window.vc.undoRedoApi.unlock()}),50)},window.vc.events.on("undoredo:add undoredo:undo undoredo:redo undoredo:lock undoredo:unlock",_.debounce((function(){t.attr("disabled",!window.vc.undoRedoApi.canUndo()),n.attr("disabled",!window.vc.undoRedoApi.canRedo())}),150)),t.on("click.vc-undo",(function(t){e(this).is("[disabled]")||window.vc.undoRedoApi.isLocked()?t&&t.preventDefault&&t.preventDefault():(vc.closeActivePanel(),window.vc.undoRedoApi.lock(),t=window.vc.undoRedoApi.undo(),i(t))})),n.on("click.vc-redo",(function(t){e(this).is("[disabled]")||window.vc.undoRedoApi.isLocked()?t&&t.preventDefault&&t.preventDefault():(vc.closeActivePanel(),window.vc.undoRedoApi.lock(),t=window.vc.undoRedoApi.redo(),i(t))})))}))})(window.jQuery),window.vc||(window.vc={}),(()=>{function e(e,i,a){"fromLocalStorage"===a&&(a=JSON.parse(localStorage.getItem("copiedShortcode")));for(var o=!1,s=(e&&(o=e.get("id")),Object.values(i?vc.ShortcodesBuilder.prototype.parse({},a,o):vc.storage.parseContent({},a,o))),c=0;c<s.length;c++){var r=s[c];if(t(e,r,s))break;n(0===c&&e,r,s,i)}i&&i.render()}vc.pasteShortcode=function(t,n,i){i?e(t,n,i):navigator.clipboard?navigator.permissions.query({name:"clipboard-read"}).then((function(i){"granted"===i.state?navigator.clipboard.readText().then((function(i){e(t,n,i)})):e(t,n,"fromLocalStorage")})).catch((function(){e(t,n,"fromLocalStorage")})):e(t,n,"fromLocalStorage")},vc.copyShortcode=function(e){e=vc.shortcodes.createShortcodeString(e),localStorage.setItem("copiedShortcode",JSON.stringify(e)),vc.utils.copyTextToClipboard(e)};var t=function(e,t,n){var a,o,s,c,r,l,d,h,p=!0;return e?(t=(e=i(e,t,n)).isModelRow,a=e.isModelRowInner,o=e.isModelTtaSection,s=e.isModelTtaToggleSection,c=e.isTopShortcodeRow,r=e.isTopShortcodeRowInner,l=e.isTopShortcodeSection,d=e.containerPreventsShortcode,p=(h=e.isShortcodeContainer)&&(d&&!((o||s)&&r)||!d&&(o||s)&&c||t&&!(c||l)||a&&!r||e.isModelColumn&&c||e.isModelColumnInner&&(r||c))||!h&&(t||a)||(e.shortcodeRejectsAsChild||e.containerRejectsAsParent)&&!(l&&(e.isModelSection||t))):"vc_row"===n[0].shortcode&&(p=!1),p},n=function(e,t,n,a){var o,s,c,r,l,d,h=Object.assign({},t);return e&&(n=(t=i(e,t,n)).isModelRow,o=t.isModelRowInner,s=t.isModelSection,c=t.isTopShortcodeRow,r=t.isTopShortcodeRowInner,l=t.isTopShortcodeSection,d=t.isModelContainer,t=t.isModelColumn,h.params.tab_id&&(h.params.tab_id=Date.now()+"-"+vc_guid()),o&&r||n&&c||!e.get("parent_id")&&(!s||!c)?(a&&(h.place_after_id=e.get("id")),h.parent_id=e.get("parent_id")):d&&!n&&(h.parent_id=e.get("id")),(n||o)&&(c||r)||(n||s)&&l?h.order=vc.utils.getMidpointOrder(e):t&&(h.order=vc.utils.getMidpointOrder(e,!0))),d=a?(a.create(h),a.last()):vc.shortcodes.create(h),window.vc.latestAddedElement=vc.shortcodes.get(d.get("id")),d},i=function(e,t,n){e=e.get("shortcode");var i=vc.map[e].allowed_container_element,a=vc.map[e].as_parent&&vc.map[e].as_parent.only,o=vc.map[n[0].shortcode].as_child&&vc.map[n[0].shortcode].as_child.only;return{isModelRow:"vc_row"===e,isModelSection:"vc_section"===e,isModelColumn:"vc_column"===e,isModelColumnInner:"vc_column_inner"===e,isModelRowInner:"vc_row_inner"===e,isModelTtaSection:"vc_tta_section"===e,isModelTtaToggleSection:"vc_tta_toggle_section"===e,isModelContainer:vc.map[e].is_container,isTopShortcodeRow:"vc_row"===n[0].shortcode,isTopShortcodeRowInner:"vc_row_inner"===n[0].shortcode,isTopShortcodeSection:"vc_section"===n[0].shortcode,containerPreventsShortcode:"string"==typeof i&&!i.includes(n[0].shortcode)||!1===i,isShortcodeContainer:vc.map[n[0].shortcode].is_container,shortcodeRejectsAsChild:"string"==typeof o&&!o.includes(e),containerRejectsAsParent:"string"==typeof a&&!a.includes(n[0].shortcode)}}})(),(e=>{var t=e("#vc_ui-helper-promo-popup");t.on("click",(function(n){e(n.target).closest('[data-vc-ui-element="button-close"]').length&&t.removeClass("vc_active")}))})(window.jQuery),(e=>{e.fn.initializeTooltips=function(t){return this.each((function(){var n,i=this,a=e(this).next(".tooltip-content")[0];function o(){clearTimeout(n),i.setAttribute("data-show",""),c.update()}function s(){n=setTimeout((function(){i.removeAttribute("data-show")}),500)}["mouseenter","focus"].forEach((function(e){i.addEventListener(e,o),a.addEventListener(e,o)})),["mouseleave","blur"].forEach((function(e){i.addEventListener(e,s),a.addEventListener(e,s)})),t=t||".vc_shortcode-param";var c=Popper.createPopper(i,a,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[10,5]}},{name:"preventOverflow",options:{boundary:i.closest(t),altAxis:!0,tether:!1,rootBoundary:"document"}}]})})),this}})(jQuery),window.vc||(window.vc={}),(()=>{function e(e,t,n,i){var a=e?e.querySelector(".wpb-color-picker"):null,o=e?e.querySelector(".vc_color-control"):null,s=o&&o.hasAttribute("data-default-colorpicker-color")?o.getAttribute("data-default-colorpicker-color"):"",c=e&&(o.value||s)||"",r=(a={el:a,container:e,default:c,theme:"classic",appClass:"wpb-pickr",autoReposition:!1,swatches:(()=>{var e=["#000000","#FFFFFF","#DD3333","#DD9933","#EEEE22","#81D742","#1E73BE","#8224E3"];return wpbData&&wpbData.pickrColors&&wpbData.pickrColors.length?wpbData.pickrColors:e})(),position:"bottom-middle",components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,hsla:!0,hsva:!1,cmyk:!1,input:!0,cancel:!0,clear:!0,save:!1}},i18n:{"btn:cancel":"Cancel","btn:clear":"Default"}},t&&(a=Object.assign({},a,t)),new Pickr(a));r.on("change",_.debounce((function(e){o.value=e.toHEXA().toString(),r.applyColor(),n&&n.change&&n.change(o)}),200)).on("cancel",_.debounce((function(){var e=o.dataset.prevColor||c;o.value=e,r.setColor(e),n&&n.cancel&&n.cancel(o)}),200)).on("hide",(function(){o.dataset.prevColor=o.value,r.hide()})).on("clear",_.debounce((function(){o.value=s,n&&n.change&&n.change(o),o.dataset.prevColor=s,r.setColor(s)}),200)),i.push(r)}vc.initColorPicker=function(t,n,i,a){n=n||{},i=i||{},a=a||[],t=(t||document).querySelectorAll(".color-group");try{n&&n.single?e(null,n,i,a):t.length&&t.forEach((function(t){e(t,n,i,a)}))}catch(t){console.error("Error initializing color picker",t)}}})(),(e=>{e(document).ready((function(){e(".vc_dropdown-toggle").on("click",(function(t){t.stopPropagation(),e(this).closest(".vc_dropdown").toggleClass("open")})),e(document).on("click",(function(){e(".vc_dropdown").removeClass("open")}))})),e("iframe").on("load",(function(){(this.contentWindow||this.contentDocument.defaultView).document.addEventListener("click",(function(){e(".vc_dropdown").removeClass("open")}))}))})(window.jQuery),window.vc||(window.vc={}),(e=>{window.vc.InitGalleries=function(){e(".gallery_widget_attached_images_list",this.$view).off("click.removeImage").on("click.removeImage","a.vc_icon-remove",(function(t){t.preventDefault();t=e(this).closest(".edit_form_line");var n=(e(this).parent().remove(),[]),i=(t.find(".added img").each((function(){n.push(e(this).attr("rel"))})),t.find(".gallery_widget_attached_images_ids").val(n.join(",")).trigger("change"),t.attr("data-social-net-preview-slug"));i&&((i=e("#"+i)).find(".wpb-social-placeholder-image").show(),i.find("img").attr("src",""),t.find(".gallery_widget_attached_images_ids").val(""))})),e(".gallery_widget_attached_images_list").each((function(){var t=e(this);t.sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder-gallery",cursor:"move",items:"li",update:function(){var n=[];e(this).find(".added img").each((function(){n.push(e(this).attr("rel"))})),t.closest(".edit_form_line").find(".gallery_widget_attached_images_ids").val(n.join(",")).trigger("change")}})}))},new window.vc.InitGalleries})(window.jQuery);